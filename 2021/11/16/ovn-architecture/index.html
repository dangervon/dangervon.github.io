<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|EB Garamond:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/nextlib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dangervon.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="ovn的官方架构文档，此处给出简单的翻译，以便于大家理解OVN的基本架构和基本数据流向">
<meta property="og:type" content="article">
<meta property="og:title" content="ovn-architecture">
<meta property="og:url" content="http://dangervon.github.io/2021/11/16/ovn-architecture/index.html">
<meta property="og:site_name" content="DangerZone">
<meta property="og:description" content="ovn的官方架构文档，此处给出简单的翻译，以便于大家理解OVN的基本架构和基本数据流向">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-11-16T08:12:39.000Z">
<meta property="article:modified_time" content="2021-11-16T08:19:26.754Z">
<meta property="article:author" content="dangervon">
<meta property="article:tag" content="translate">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://dangervon.github.io/2021/11/16/ovn-architecture/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en-US'
  };
</script>

  <title>ovn-architecture | DangerZone</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
<a target="_blank" rel="noopener" href="https://github.com/dangervon" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">DangerZone</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Linus Benedict Torvalds Once Said:Talk is Cheap,Show me the Code.That is true Correct!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">3</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">2</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">3</span></a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en-US">
    <link itemprop="mainEntityOfPage" href="http://dangervon.github.io/2021/11/16/ovn-architecture/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.png">
      <meta itemprop="name" content="dangervon">
      <meta itemprop="description" content="to be a better man">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DangerZone">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ovn-architecture
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-11-16 16:12:39 / Modified: 16:19:26" itemprop="dateCreated datePublished" datetime="2021-11-16T16:12:39+08:00">2021-11-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/manpage/" itemprop="url" rel="index"><span itemprop="name">manpage</span></a>
                </span>
            </span>

          
            <div class="post-description">ovn的官方架构文档，此处给出简单的翻译，以便于大家理解OVN的基本架构和基本数据流向</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="name"><a href="#name" class="headerlink" title="name"></a>name</h1><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ovn-<span class="keyword">architecture</span> - <span class="keyword">Open</span> Virtual Network <span class="keyword">architecture</span></span><br><span class="line"><span class="keyword">architecture</span>:n. 建筑学；建筑风格；建筑式样；架构</span><br><span class="line"></span><br><span class="line">名称：</span><br><span class="line">OVN-架构<span class="comment">--开源虚拟网络架构</span></span><br></pre></td></tr></table></figure>

<h1 id="description"><a href="#description" class="headerlink" title="description"></a>description</h1><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">OVN, the Open Virtual Network, <span class="built_in">is</span> a system <span class="keyword">to</span> support virtual network abstraction. OVN complements the existing capabilities <span class="keyword">of</span> OVS <span class="keyword">to</span> add native support <span class="keyword">for</span> virtual network abstractions,such <span class="keyword">as</span> virtual L2 <span class="built_in">and</span> L3 overlays <span class="built_in">and</span> security groups. Services such <span class="keyword">as</span> DHCP are also desirable features. Just <span class="built_in">like</span> OVS, OVN’s design goal <span class="built_in">is</span> </span><br><span class="line"><span class="keyword">to</span> have a production-quality  implementation that can operate at significant scale.</span><br><span class="line"></span><br><span class="line"><span class="symbol">description:</span>n. 描述，描写；类型；说明书</span><br><span class="line">abstraction：n. 抽象；提取；抽象概念；空想；心不在焉</span><br><span class="line">complement：n. 补语；余角；补足物 vt. 补足，补助</span><br><span class="line">existing：v. 存在；（尤指在困境或贫困中）生活；被发现；（exist 的现在分词），adj. 存在的；现行的</span><br><span class="line">capability：n. 才能，能力；性能，容量</span><br><span class="line">native：adj. 本国的；土著的；天然的；与生俱来的；天赋的 n. 本地人；土产；当地居民</span><br><span class="line">desirable：adj. 可取的，值得拥有的，令人向往的；引起性欲的，性感的  n. 称心如意的东西，合意的人，好的品质</span><br><span class="line">feature：n. 特色，特征；容貌；特写或专题节目 vi. 起重要作用 vt. 特写；以…为特色；由…主演</span><br><span class="line">production-quality：产品级</span><br><span class="line"><span class="symbol">production:</span>n. 成果；产品；生产；作品</span><br><span class="line"><span class="symbol">quality:</span>n. 质量，[统计] 品质；特性；才能  adj. 优质的；高品质的</span><br><span class="line"><span class="symbol">implementation:</span>n. [计] 实现；履行；安装启用</span><br><span class="line"><span class="symbol">operate:</span>vi. 运转；动手术；起作用 vt. 操作；经营；引起；对…开刀；行动</span><br><span class="line"><span class="symbol">significant:</span>adj. 重大的；有效的；有意义的；值得注意的；意味深长的  n. 象征；有意义的事物</span><br><span class="line"><span class="symbol">scale:</span>n. 规模；比例；鳞；刻度；数值范围  vt. 测量；攀登；刮鳞；依比例决定  vi. 衡量；攀登；剥落；生水垢；改变大小</span><br><span class="line"></span><br><span class="line">描述：</span><br><span class="line">OVN，即开源虚拟网络，是一个支持抽象虚拟网络的系统。 OVN对OVS的现有功能作出补充，以添加对抽象虚拟网络的原生支持，例如虚拟二层和三层覆盖网络和安全组。 DHCP等服务也是可取的特点。 就像OVS一样，OVN的设计目标是拥有可以大规模运转的产品级实现。</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">An OVN deployment consists of several component<span class="variable">s:</span></span><br><span class="line">deploymen<span class="variable">t:n</span>. 调度，部署</span><br><span class="line">consis<span class="variable">t:vi</span>. 由…组成；在于；符合</span><br><span class="line">componen<span class="variable">t:n</span>. 组成部分；成分；组件，元件 adj. 组成的；构成的</span><br><span class="line"></span><br><span class="line">OVN部署由数个组件构成：</span><br></pre></td></tr></table></figure>

<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">·      A  <span class="keyword">Cloud </span> Management  System  (CMS), which is OVN’s ultimate client (via its users <span class="keyword">and </span>administrators). OVN integration requires <span class="keyword">installing </span>a CMS-specific </span><br><span class="line">       plugin <span class="keyword">and </span>related software (see <span class="keyword">below). </span>OVN initially targets OpenStack as CMS.</span><br><span class="line">       We generally speak of ``the’’ CMS, <span class="keyword">but </span>one can imagine <span class="keyword">scenarios </span>in which <span class="keyword">multiple </span>CMSes manage <span class="keyword">different </span>parts of an OVN deployment.</span><br><span class="line"><span class="symbol">ultimate:</span>adj. 最终的；极限的；根本的 n. 终极；根本；基本原则</span><br><span class="line">client :n. [经] 客户；顾客；委托人</span><br><span class="line">administrator：n. 管理人；行政官</span><br><span class="line">integration：n. 集成；综合</span><br><span class="line">specific：adj. 特殊的，特定的；明确的；详细的；[药] 具有特效的 n. 特性；细节；特效药</span><br><span class="line">related：adj. 有关系的，有关联的；讲述的，叙述的 v. 叙述（relate过去式）</span><br><span class="line">initially：adv. 最初，首先；开头</span><br><span class="line">targets：n. 目标；枪靶；投放范围（target的复数） v. 把…作为目标（target的单三形式）</span><br><span class="line"><span class="symbol">generally:</span>adv. 通常；普遍地，一般地</span><br><span class="line">imagine：vt. 想象；猜想；臆断 vi. 想象；猜想；想象起来</span><br><span class="line"><span class="keyword">scenarios：n. </span>情节；脚本；情景介绍（<span class="keyword">scenario </span>的复数）</span><br><span class="line"><span class="keyword">multiple：adj. </span>多重的；多样的；许多的 n. 倍数；[电] 并联</span><br><span class="line"></span><br><span class="line">·      云管理系统(CMS)，它是OVN的最终客户（通过其用户和管理员），OVN集成需要安装CMS特定的插件和相关软件（见下文），OVN最初将OpenStack定位为云管理系统。</span><br><span class="line">       我们通常会说“这个”云管理系统，但可以想象多个云管理系统管理OVN部署的不同部分的场景。</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">·      An OVN <span class="keyword">Database</span> physical <span class="keyword">or</span> virtual node (<span class="keyword">or</span>, eventually, <span class="keyword">cluster</span>) installed <span class="keyword">in</span> a central <span class="keyword">location</span>.</span><br><span class="line">physical :adj. 物理的；身体的；物质的；根据自然规律的，符合自然法则的 n. 体格检查</span><br><span class="line">eventually:adv. 最后，终于</span><br><span class="line"><span class="keyword">cluster</span>:n. 群；簇；丛；串 vi. 群聚；丛生 vt. 使聚集；聚集在某人的周围</span><br><span class="line">central:adj. 中心的；主要的；中枢的</span><br><span class="line"></span><br><span class="line">·      一个OVN数据库物理或者虚拟节点（或者，最终是集群）被安装在一个中心位置。</span><br></pre></td></tr></table></figure>

<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">·      <span class="keyword">One</span> or <span class="keyword">more</span> (usually many) hypervisors. Hypervisors must <span class="keyword">run</span> <span class="keyword">Open</span> vSwitch and implement the interface described <span class="keyword">in</span> IntegrationGuide.rst <span class="keyword">in</span> the OVS source </span><br><span class="line">       tree. Any hypervisor platform supported <span class="keyword">by</span> <span class="keyword">Open</span> vSwitch is acceptable.</span><br><span class="line">implement :vt. 实施，执行；实现，使生效 <span class="keyword">n</span>. 工具，器具；手段</span><br><span class="line">described :v. 描述，描写（<span class="keyword">describe</span>的过去式） adj. 描述的</span><br><span class="line">acceptable:adj. 可接受的；合意的；可忍受的</span><br><span class="line"></span><br><span class="line">·      一个或更多（通常是多个）hypervisor,hypervisor必须运行<span class="keyword">Open</span> vSwitch并使OVS源码树中IntegrationGuide.rst所描述的接口生效,任何hypervisor平台被<span class="keyword">Open</span> vSwitch支持都</span><br><span class="line">       是可以接受的。</span><br></pre></td></tr></table></figure>

<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">·      <span class="built_in">Zero</span> <span class="keyword">or </span>more gateways. A gateway <span class="keyword">extends </span>a tunnel-<span class="keyword">based </span>logical network into a physical network <span class="keyword">by </span><span class="keyword">bidirectionally </span>forwarding packets <span class="keyword">between </span>tunnels <span class="keyword">and </span>a </span><br><span class="line">       physical Ethernet port. This allows non-virtualized machines to participate in logical networks. A gateway may <span class="keyword">be </span>a physical host, a virtual machine, <span class="keyword">or </span>an  </span><br><span class="line">       ASIC-<span class="keyword">based </span> hardware  <span class="keyword">switch </span> that supports the vtep(<span class="number">5</span>) <span class="keyword">schema.</span></span><br><span class="line"><span class="keyword"></span>       Hypervisors <span class="keyword">and </span>gateways are together called transport node <span class="keyword">or </span>chassis.</span><br><span class="line"><span class="symbol">gateway:</span>n. 门；网关；方法；通道；途径</span><br><span class="line"><span class="keyword">extend:vt. </span>延伸；扩大；推广；伸出；给予；使竭尽全力；对…估价 vi. 延伸；扩大；伸展；使疏开</span><br><span class="line"><span class="symbol">tunnel:</span>n. 隧道；坑道；洞穴通道 vt. 挖；在…打开通道；在…挖掘隧道 vi. 挖掘隧道；打开通道</span><br><span class="line"><span class="keyword">bidirectionally </span>:双向地</span><br><span class="line">forwarding :v. 转递（信）；递交；运送（货物）；促进（forward 的现在分词） n. 转发；促进；（最后包封面之前的）各项装订工序；货运</span><br><span class="line">virtualized :虚拟化</span><br><span class="line">participate :vi. 参与，参加；分享 vt. 分享；分担</span><br><span class="line"><span class="keyword">schema:n. </span>[计][心理] 模式；计划；图解；概要</span><br><span class="line">transport :n. 运输；运输机；狂喜；流放犯 vt. 运输；流放；使狂喜</span><br><span class="line"><span class="symbol">chassis:</span>n. 底盘，底架</span><br><span class="line"></span><br><span class="line">·      零个或多个网关。 网关通过在隧道和物理以太网端口之间双向转发数据包，将基于隧道的逻辑网络扩展到物理网络。 这将允许非虚拟化的机器参与到逻辑网络中。 网关可以是</span><br><span class="line">       物理主机、虚拟机或支持vtep模式的基于ASIC的硬件交换机。</span><br><span class="line">       hypervisor和网关统称为传输节点或chassis。</span><br></pre></td></tr></table></figure>

<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The <span class="keyword">diagram </span><span class="keyword">below </span><span class="keyword">shows </span>how the major components of OVN <span class="keyword">and </span>related software interact. Starting <span class="built_in">at</span> the top of the <span class="keyword">diagram, </span>we have:</span><br><span class="line"><span class="keyword">diagram </span>：n. 图表；图解 vt. 用图解法表示</span><br><span class="line">major ：adj. 主要的；重要的；主修的；较多的 n. [人类] 成年人；主修科目；陆军少校 vi. 主修</span><br><span class="line">interact：vt. 互相影响；互相作用 vi. 互相影响；互相作用 n. 幕间剧；幕间休息</span><br><span class="line"></span><br><span class="line">下图显示了OVN的主要组件和相关软件如何交互，从图的顶部开始，我们有：</span><br></pre></td></tr></table></figure>

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">·      The Cloud Management System, as <span class="keyword">defined</span> above.</span><br><span class="line">management <span class="symbol">:n</span>. 管理；管理人员；管理部门；操纵；经营手段</span><br><span class="line"><span class="keyword">defined</span> <span class="symbol">:adj</span>. 界定的；清晰的，轮廓分明的 v. 下定义；明确；使轮廓分明（define 的过去式和过去分词）</span><br><span class="line"></span><br><span class="line">·      云管理系统，和上面定义的一致。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">·      The  OVN/CMS Plugin <span class="built_in">is</span> the component <span class="keyword">of</span> the CMS that interfaces <span class="keyword">to</span> OVN. <span class="keyword">In</span> OpenStack, this <span class="built_in">is</span> a Neutron plugin. The plugin’s main purpose <span class="built_in">is</span> <span class="keyword">to</span> translate </span><br><span class="line">       the CMS’s notion <span class="keyword">of</span> logical network configuration, stored <span class="keyword">in</span> the CMS’s configuration database <span class="keyword">in</span> a CMS-specific format, <span class="keyword">into</span> an intermediate representation </span><br><span class="line">       understood <span class="keyword">by</span> OVN.</span><br><span class="line">		   This component <span class="built_in">is</span> necessarily CMS-specific, so a <span class="built_in">new</span> plugin needs <span class="keyword">to</span> be developed <span class="keyword">for</span> <span class="keyword">each</span> CMS that <span class="built_in">is</span> integrated <span class="keyword">with</span> OVN. All <span class="keyword">of</span> the components below this </span><br><span class="line">       one <span class="keyword">in</span> the  diagram are CMS-independent.</span><br><span class="line"><span class="symbol">interface:</span>n. 界面；&lt;计&gt;接口；交界面 v. （使通过界面或接口）接合，连接；[计算机]使联系 vi. 相互作用（或影响）；交流，交谈</span><br><span class="line">translate ：vt. 翻译；转化；解释；转变为；调动 vi. 翻译</span><br><span class="line"><span class="symbol">notion:</span>n. 概念；见解；打算</span><br><span class="line"><span class="symbol">configuration:</span>n. 配置；结构；外形</span><br><span class="line"><span class="symbol">stored:</span>v. 储存；容纳（store 的过去式和过去分词）</span><br><span class="line"><span class="symbol">format:</span>n. 格式；版式；开本 vt. 使格式化；规定…的格式  vi. 设计版式</span><br><span class="line">intermediate :adj. 中间的，过渡的；中级的，中等的 n. 中级生；（化合物）中间体，中间物；中介，媒介  v. 充当调解人，起媒介作用</span><br><span class="line">representation :n. 代表；表现；表示法；陈述</span><br><span class="line"><span class="symbol">necessarily:</span>adv. 必要地；必定地，必然地</span><br><span class="line"><span class="symbol">develop:</span>vt. 开发；进步；使成长；使显影 vi. 发育；生长；进化；显露</span><br><span class="line"><span class="symbol">developed:</span>adj. 发达的（国家或地区）；成熟的</span><br><span class="line">integrated :adj. 综合的；完整的；互相协调的 v. 整合；使…成整体（integrate的过去分词）</span><br><span class="line"><span class="symbol">independent:</span>adj. 独立的；单独的；无党派的；不受约束的 n. 独立自主者；无党派者</span><br><span class="line"></span><br><span class="line">·      OVN/CMS插件是与OVN接口的CMS组件，在OpenStack中，这是一个Neutron插件。这个插件的主要目的是将CMS的逻辑网络配置概念（以CMS特定格式存储在CMS的配置数据库中）转换</span><br><span class="line">       为OVN能理解的中间表示。</span><br><span class="line">			 这个组件必须是特定于CMS的，因此需要为每个与OVN集成的CMS开发一个新插件，图中这个组件下方的所有组件均独立于CMS。</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">·      The  OVN  Northbound Database receives <span class="keyword">the</span> intermediate representation <span class="keyword">of</span> logical network configuration passed down <span class="keyword">by</span> <span class="keyword">the</span> OVN/CMS Plugin. The database schema  </span><br><span class="line">       is meant <span class="built_in">to</span> be ``impedance matched’’ <span class="keyword">with</span> <span class="keyword">the</span> concepts used <span class="keyword">in</span> <span class="keyword">a</span> CMS, so that <span class="keyword">it</span> directly supports notions <span class="keyword">of</span> logical switches, routers, ACLs, <span class="keyword">and</span> so on. See </span><br><span class="line">       ovn-nb(<span class="number">5</span>) <span class="keyword">for</span> details.</span><br><span class="line">       The OVN Northbound Database has only <span class="literal">two</span> clients: <span class="keyword">the</span> OVN/CMS Plugin above <span class="keyword">it</span> <span class="keyword">and</span> ovn-northd below <span class="keyword">it</span>.</span><br><span class="line">Northbound ：adj. 北行的；向北方的</span><br><span class="line">pass down：传下来；遗传</span><br><span class="line">meant ：v. 意味；打算（mean的过去式和过去分词）；表示…的意思</span><br><span class="line">impedance :n. [电] 阻抗</span><br><span class="line">impedance match：阻抗匹配</span><br><span class="line">concept :n. 观念，概念</span><br><span class="line">directly ：adv. 直接地；立即；马上；正好地；坦率地 conj. 一…就</span><br><span class="line"></span><br><span class="line">·      OVN北向数据库接收由OVN/CMS插件传递的逻辑网络配置的中间表示，数据库模式旨在与CMS中使用的概念“阻抗匹配”，因此它直接支持逻辑交换机、路由器、ACL等概念，有关详细</span><br><span class="line">       信息，请参阅 ovn-nb(<span class="number">5</span>)。</span><br><span class="line">       OVN北向数据库只有两个客户端：其上的OVN/CMS Plugin和其下的ovn-northd。.</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">·      ovn-northd(<span class="number">8</span>) connects <span class="built_in">to</span> <span class="keyword">the</span> OVN Northbound Database above <span class="keyword">it</span> <span class="keyword">and</span> <span class="keyword">the</span> OVN Southbound Database below <span class="keyword">it</span>. It translates <span class="keyword">the</span> logical network configuration <span class="keyword">in</span> </span><br><span class="line">       terms <span class="keyword">of</span> conventional network concepts, taken <span class="built_in">from</span> <span class="keyword">the</span> OVN Northbound Database, <span class="keyword">into</span> logical datapath flows <span class="keyword">in</span> <span class="keyword">the</span> OVN Southbound Database below <span class="keyword">it</span>.</span><br><span class="line"><span class="keyword">in</span> terms <span class="keyword">of</span> ：依据；按照；在…方面；以…措词</span><br><span class="line">terms：n. 地位，关系；[法] 条款；术语；措辞；价钱（term的复数形式） v. 把…称为（term的三单形式）</span><br><span class="line">conventional ：adj. 符合习俗的，传统的；常见的；惯例的</span><br><span class="line">datapath :数据通路运算器数据路径数据通道</span><br><span class="line"></span><br><span class="line">·      ovn-northd连接其上的OVN北向数据库和其下的OVN南向数据库，它将从OVN北向数据库中依据传统概念的逻辑网络配置转换为其下的OVN南向数据库中的逻辑数据路径流。</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">·      The OVN Southbound <span class="keyword">Database</span> <span class="keyword">is</span> the center <span class="keyword">of</span> the <span class="keyword">system</span>. Its clients are ovn-northd(<span class="number">8</span>) above it <span class="keyword">and</span> ovn-controller(<span class="number">8</span>) <span class="keyword">on</span> every transport node below it.</span><br><span class="line">       The OVN Southbound <span class="keyword">Database</span> contains three kinds <span class="keyword">of</span> data: Physical Network (PN) <span class="keyword">tables</span> that specify how <span class="keyword">to</span> reach hypervisor <span class="keyword">and</span> other nodes, Logical Network</span><br><span class="line">       (LN) <span class="keyword">tables</span> that describe the logical network <span class="keyword">in</span> terms <span class="keyword">of</span> ``logical datapath flows,’’ <span class="keyword">and</span> Binding <span class="keyword">tables</span> that link logical network components’ locations <span class="keyword">to</span> </span><br><span class="line">       the physical network. The hypervisors populate the PN <span class="keyword">and</span> Port_Binding <span class="keyword">tables</span>, whereas ovn-northd(<span class="number">8</span>) populates the LN <span class="keyword">tables</span>.</span><br><span class="line">       OVN  Southbound  <span class="keyword">Database</span> performance must scale <span class="keyword">with</span> the number <span class="keyword">of</span> transport nodes. This will likely require <span class="keyword">some</span> <span class="keyword">work</span> <span class="keyword">on</span> ovsdb-<span class="keyword">server</span>(<span class="number">1</span>) <span class="keyword">as</span> we encounter </span><br><span class="line">       bottlenecks. Clustering <span class="keyword">for</span> availability may be needed.</span><br><span class="line">contain :vt. 包含；控制；容纳；牵制（敌军） vi. 含有；自制</span><br><span class="line">specify :vt. 指定；详细说明；列举；把…列入说明书</span><br><span class="line">populate :vt. 居住于；构成人口；移民于；殖民于;填充</span><br><span class="line">whereas :conj. 然而；鉴于 n. 序言，开场白；条件语句</span><br><span class="line">performance :n. 性能；绩效；表演；执行；表现</span><br><span class="line">likely :adj. 很可能的；合适的；有希望的</span><br><span class="line">encounter :v. 遭遇；邂逅；遇到  n. 遭遇；偶然碰见</span><br><span class="line">bottlenecks:n. [包装] 瓶颈（bottleneck的复数）</span><br><span class="line">Clustering :n. 聚集，收集；分类归并 v. 使成群（<span class="keyword">cluster</span>的现在分词）</span><br><span class="line">availability :n. 可用性；有效性；实用性</span><br><span class="line"></span><br><span class="line">·      OVN南向数据库是整个系统的中心，它的客户端是在其上的ovn-northd和其下每个传输节点上的ovn-controller。</span><br><span class="line">       OVN南向数据库包含三种数据：指定如何到达hypervisor和其他节点的物理网络(PN)表、依据“逻辑数据路径流”描述逻辑网络的逻辑网络(LN)表、将逻辑网络组件的位置链接到物</span><br><span class="line">       理网络的Binding表。hypervisor填充PN和Port_Binding表，ovn-northd填充LN表。</span><br><span class="line">       OVN南向数据库性能必须随着传输节点的数量而扩展,当我们遇到瓶颈时，可能需要在ovsdb-<span class="keyword">server</span>上做一些工作, 为了可用性的群集可能是需要的。</span><br></pre></td></tr></table></figure>

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The remaining components are replicated onto each <span class="symbol">hypervisor:</span></span><br><span class="line">remaining <span class="symbol">:v</span>. 仍然是；剩余；仍需去做；逗留（remain 的现在分词） adj. 剩下的，剩余的；还需处理的</span><br><span class="line">replicate <span class="symbol">:vt</span>. 复制；折叠 vi. 重复；折转 adj. 复制的；折叠的 n. 复制品；八音阶间隔的反覆音</span><br><span class="line"></span><br><span class="line">其余组件被复制到每个hypervisor上：</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">·      ovn-controller(<span class="number">8</span>) <span class="keyword">is</span> OVN’s agent <span class="keyword">on</span> <span class="keyword">each</span> hypervisor <span class="keyword">and</span> software gateway. Northbound, it connects <span class="keyword">to</span> the OVN Southbound <span class="keyword">Database</span> <span class="keyword">to</span> learn about OVN </span><br><span class="line">       <span class="keyword">configuration</span> <span class="keyword">and</span>  status <span class="keyword">and</span>  <span class="keyword">to</span> populate the PN <span class="keyword">table</span> <span class="keyword">and</span> the Chassis <span class="keyword">column</span> <span class="keyword">in</span> Binding <span class="keyword">table</span> <span class="keyword">with</span> the hypervisor’s status. Southbound, it connects <span class="keyword">to</span> </span><br><span class="line">       ovs-vswitchd(<span class="number">8</span>) <span class="keyword">as</span> an OpenFlow controller, <span class="keyword">for</span> control <span class="keyword">over</span> network traffic, <span class="keyword">and</span> <span class="keyword">to</span> the <span class="keyword">local</span> ovsdb-<span class="keyword">server</span>(<span class="number">1</span>) <span class="keyword">to</span> allow it <span class="keyword">to</span> monitor <span class="keyword">and</span> control <span class="keyword">Open</span> vSwitch    </span><br><span class="line">       <span class="keyword">configuration</span>.</span><br><span class="line">agent :n. 代理人，代理商；药剂；特工；动因 vt. 由…作中介；由…代理 adj. 代理的</span><br><span class="line">control <span class="keyword">over</span>：控制；支配；征服</span><br><span class="line">traffic:n. 交通；运输；贸易；[通信] 通信量vt. 用…作交换；在…通行vi. 交易，买卖</span><br><span class="line">monitor：n. 监视器；监听器；监控器；显示屏；班长 vt. 监控</span><br><span class="line"></span><br><span class="line">·      ovn-controller是OVN在每个hypervisor和软件网关上的代理,北向它连接到OVN南向数据库以了解OVN配置和状态，并使用hypervisor的状态填充PN表和绑定表中的chassis列,南向</span><br><span class="line">       它作为OpenFlow控制器连接到ovs-vswitchd，用于控制网络流量，并连接到本地ovsdb-<span class="keyword">server</span>以允许它监视和控制<span class="keyword">Open</span> vSwitch的配置。 </span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">·      ovs-vswitchd(<span class="number">8</span>) <span class="keyword">and</span> ovsdb-<span class="keyword">server</span>(<span class="number">1</span>) are conventional components <span class="keyword">of</span> <span class="keyword">Open</span> vSwitch.</span><br><span class="line"></span><br><span class="line">·      ovs-vswitchd和ovsdb-<span class="keyword">server</span>是<span class="keyword">Open</span> vSwitch的传统组件。</span><br></pre></td></tr></table></figure>

<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">                                  CMS</span><br><span class="line">                                   |<span class="string"></span></span><br><span class="line"><span class="string">                                   </span>|</span><br><span class="line">                       +-----------|<span class="string">-----------+</span></span><br><span class="line"><span class="string">                       </span>|<span class="string">           </span>|<span class="string">           </span>|</span><br><span class="line">                       |<span class="string">     OVN/CMS Plugin    </span>|</span><br><span class="line">                       |<span class="string">           </span>|<span class="string">           </span>|</span><br><span class="line">                       |<span class="string">           </span>|<span class="string">           </span>|</span><br><span class="line">                       |<span class="string">   OVN Northbound DB   </span>|</span><br><span class="line">                       |<span class="string">           </span>|<span class="string">           </span>|</span><br><span class="line">                       |<span class="string">           </span>|<span class="string">           </span>|</span><br><span class="line">                       |<span class="string">       ovn-northd      </span>|</span><br><span class="line">                       |<span class="string">           </span>|<span class="string">           </span>|</span><br><span class="line">                       +-----------|<span class="string">-----------+</span></span><br><span class="line"><span class="string">                                   </span>|</span><br><span class="line">                                   |<span class="string"></span></span><br><span class="line"><span class="string">                         +-------------------+</span></span><br><span class="line"><span class="string">                         </span>|<span class="string"> OVN Southbound DB </span>|</span><br><span class="line">                         +-------------------+</span><br><span class="line">                                   |<span class="string"></span></span><br><span class="line"><span class="string">                                   </span>|</span><br><span class="line">                +------------------+------------------+</span><br><span class="line">                |<span class="string">                  </span>|<span class="string">                  </span>|</span><br><span class="line">  HV 1          |<span class="string">                  </span>|<span class="string">    HV n          </span>|</span><br><span class="line">+---------------|<span class="string">---------------+  .  +---------------</span>|<span class="string">---------------+</span></span><br><span class="line"><span class="string"></span>|<span class="string">               </span>|<span class="string">               </span>|<span class="string">  .  </span>|<span class="string">               </span>|<span class="string">               </span>|</span><br><span class="line">|<span class="string">        ovn-controller         </span>|<span class="string">  .  </span>|<span class="string">        ovn-controller         </span>|</span><br><span class="line">|<span class="string">         </span>|<span class="string">          </span>|<span class="string">          </span>|<span class="string">  .  </span>|<span class="string">         </span>|<span class="string">          </span>|<span class="string">          </span>|</span><br><span class="line">|<span class="string">         </span>|<span class="string">          </span>|<span class="string">          </span>|<span class="string">     </span>|<span class="string">         </span>|<span class="string">          </span>|<span class="string">          </span>|</span><br><span class="line">|<span class="string">  ovs-vswitchd   ovsdb-server  </span>|<span class="string">     </span>|<span class="string">  ovs-vswitchd   ovsdb-server  </span>|</span><br><span class="line">|<span class="string">                               </span>|<span class="string">     </span>|<span class="string">                               </span>|</span><br><span class="line">+-------------------------------+     +-------------------------------+</span><br></pre></td></tr></table></figure>

<h2 id="information-flow-in-ovn"><a href="#information-flow-in-ovn" class="headerlink" title="information flow in ovn"></a>information flow in ovn</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Configuration data <span class="keyword">in</span> OVN flows <span class="built_in">from</span> north <span class="built_in">to</span> south. The CMS, through its OVN/CMS plugin, passes <span class="keyword">the</span> logical network configuration <span class="built_in">to</span> ovn-northd via <span class="keyword">the</span> northbound </span><br><span class="line">database.In turn,ovn-northd compiles <span class="keyword">the</span> configuration <span class="keyword">into</span> <span class="keyword">a</span> <span class="built_in">lower</span>-level form <span class="keyword">and</span> passes <span class="keyword">it</span> <span class="built_in">to</span> all <span class="keyword">of</span> <span class="keyword">the</span> chassis via <span class="keyword">the</span> southbound database.</span><br><span class="line">through :prep. 穿过，从一端到另一端；断开，洞穿；穿行；越过；透过……看到；隔着……听到；一直到底； 自始至终；从头到尾检查；通过（障碍、阶段或测试）；直至；经由；凭借</span><br><span class="line">adv. 从一端到另一端；通过；从头至尾；通过； 直达；径直；（电话）接通着；彻底;adj. 直达的；联运的，全程的；直通的；贯穿的，过境的；对穿的，双向的；与楼两对面通透的；进入下一轮的；完结的；（使用）完成，结束；（关系）了结，断绝</span><br><span class="line">compile :vt. 编译；编制；编辑；[图情] 汇编</span><br><span class="line"><span class="built_in">lower</span>-level：低级别的</span><br><span class="line">form ：n. 形式，形状；形态，外形；方式；表格 vt. 构成，组成；排列，组织；产生，塑造vi. 形成，构成；排列</span><br><span class="line"><span class="keyword">in</span> turn:反过来；转而；轮流，依次</span><br><span class="line"></span><br><span class="line">OVN中的信息流：</span><br><span class="line">OVN中的配置数据从北向南流动,CMS通过它的OVN/CMS插件,将逻辑网络配置通过北向数据库传递给ovn-northd,转而,ovn-northd将配置编译成低级别的形态，通过南向数据库传递给所有chassis。</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Status  information  <span class="keyword">in</span>  OVN  flows  <span class="built_in">from</span>  south <span class="built_in">to</span> north. OVN currently provides only <span class="keyword">a</span> few forms <span class="keyword">of</span> status information. First, ovn-northd populates <span class="keyword">the</span> up column </span><br><span class="line"><span class="keyword">in</span> <span class="keyword">the</span> northbound Logical_Switch_Port table: <span class="keyword">if</span> <span class="keyword">a</span> logical port’s chassis column <span class="keyword">in</span> <span class="keyword">the</span> southbound Port_Binding table is nonempty, <span class="keyword">it</span> sets up <span class="built_in">to</span> <span class="literal">true</span>, otherwise <span class="built_in">to</span> </span><br><span class="line"><span class="literal">false</span>. This allows <span class="keyword">the</span> CMS <span class="built_in">to</span>  detect  when  <span class="keyword">a</span> VM’s networking has come up.</span><br><span class="line">currently:adv. 当前；一般地</span><br><span class="line">provide :vt. 提供；规定；准备；装备 vi. 规定；抚养；作准备</span><br><span class="line">nonempty：adj. [计] 非空的</span><br><span class="line">detect  ：vt. 察觉；发现；探测</span><br><span class="line"></span><br><span class="line">OVN中的状态信息从南向北流动,OVN目前仅为状态信息提供很少形式,首先，ovn-northd填充北向Logical_Switch_Port表中的up列：如果南向Port_Binding表中的一个逻辑端口的chassis列不为空，则设置up为<span class="literal">true</span>，否则设置为<span class="literal">false</span>.这将允许CMS检测虚拟机的网络何时启动。</span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Second, OVN provides feedback <span class="keyword">to</span> <span class="keyword">the</span> CMS <span class="keyword">on</span> <span class="keyword">the</span> realization <span class="keyword">of</span> <span class="keyword">its</span> configuration, <span class="keyword">that</span> <span class="keyword">is</span>, whether <span class="keyword">the</span> configuration provided <span class="keyword">by</span> <span class="keyword">the</span> CMS has taken effect. This </span><br><span class="line">feature requires <span class="keyword">the</span> CMS <span class="keyword">to</span> participate <span class="keyword">in</span> a sequence <span class="built_in">number</span> protocol, which works <span class="keyword">the</span> following way:</span><br><span class="line">feedback :n. 反馈；成果，资料；回复</span><br><span class="line">realization :n. 实现；领悟</span><br><span class="line">whether :conj. 是否；不论 pron. 两个中的哪一个</span><br><span class="line">effect:n. 影响；效果；作用 vt. 产生；达到目的</span><br><span class="line">taken effect:生效</span><br><span class="line">sequence <span class="built_in">number</span>:[计] 序号；顺序数</span><br><span class="line"></span><br><span class="line">其次,OVN为CMS反馈其配置的实现情况,即CMS提供的配置是否生效.此功能需要CMS以一种序列号协议参与,其工作方式如下：</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  When <span class="keyword">the</span> CMS updates <span class="keyword">the</span> configuration <span class="keyword">in</span> <span class="keyword">the</span> northbound database, <span class="keyword">as</span> part <span class="keyword">of</span> <span class="keyword">the</span> same transaction, <span class="keyword">it</span> increments <span class="keyword">the</span> <span class="built_in">value</span> <span class="keyword">of</span> <span class="keyword">the</span> nb_cfg column <span class="keyword">in</span> <span class="keyword">the</span> NB_Global  table.  (This is only necessary <span class="keyword">if</span> <span class="keyword">the</span> CMS wants <span class="built_in">to</span> know when <span class="keyword">the</span> configuration has been realized.)</span><br><span class="line">same ：adj. 相同的；同一的；上述的（通常与<span class="keyword">the</span>连用）；无变化的 adv. 同样地（通常与<span class="keyword">the</span>连用）pron. 同样的事物或人（通常与<span class="keyword">the</span>连用）</span><br><span class="line">transaction：交易；事务；办理；会报，学报</span><br><span class="line">increments ：n. [数] 增量；增加；增额；盈余</span><br><span class="line">necessary ：adj. 必要的；必需的；必然的 n. 必需品</span><br><span class="line">realized：adj. 实现的；已实现 vt. 实现（realize的过去式及过去分词）</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 当CMS更新北向数据库中的配置时,作为同一事务的一部分,它会增加NB_Global表中nb_cfg列的值.（仅当CMS想知道配置何时实现时才需要这样做.）</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>  <span class="keyword">When</span>  ovn-northd  updates  the southbound <span class="keyword">database</span> based <span class="keyword">on</span> a given <span class="keyword">snapshot</span> <span class="keyword">of</span> the northbound <span class="keyword">database</span>, it copies nb_cfg <span class="keyword">from</span> northbound NB_Global <span class="keyword">into</span> the </span><br><span class="line">southbound <span class="keyword">database</span> SB_Global <span class="keyword">table</span>, <span class="keyword">as</span> part <span class="keyword">of</span> the same <span class="keyword">transaction</span>. (Thus, an observer monitoring <span class="keyword">both</span> databases can determine <span class="keyword">when</span> the southbound <span class="keyword">database</span> <span class="keyword">is</span> </span><br><span class="line">caught up <span class="keyword">with</span> the northbound.)</span><br><span class="line"><span class="keyword">snapshot</span> ：n. 快照，快相；急射，速射；简单印象 vt. 给…拍快照 vi. 拍快照</span><br><span class="line">Thus ：adv. 因此；从而；这样；如此</span><br><span class="line">observer ：n. 观察者；[天] 观测者；遵守者</span><br><span class="line">determine：v. （使）下决心，（使）做出决定 vt. 决定，确定；判定，判决；限定 vi. 确定；决定；判决，终止；[主用于法律]了结，终止，结束</span><br><span class="line">catch up:v. 赶上；把…缠住</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>  当ovn-northd根据给定的北向数据库快照更新南向数据库时,作为同一事务的一部分,它会将nb_cfg从北向NB_Global表复制到南向数据库SB_Global表中.（因此,监视这两个数据库的观察者可以确定南向数据库何时同步到北向数据库。）</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>  <span class="keyword">After</span> ovn-northd receives confirmation <span class="keyword">from</span> the southbound <span class="keyword">database</span> <span class="keyword">server</span> that its changes have <span class="keyword">committed</span>, it updates sb_cfg <span class="keyword">in</span> the northbound NB_Global <span class="keyword">table</span>  <span class="keyword">to</span>  the  nb_cfg <span class="keyword">version</span> that was pushed down. (Thus, the CMS <span class="keyword">or</span> another observer can determine <span class="keyword">when</span> the southbound <span class="keyword">database</span> <span class="keyword">is</span> caught up <span class="keyword">without</span> a <span class="keyword">connection</span> <span class="keyword">to</span> the southbound <span class="keyword">database</span>.)</span><br><span class="line">confirmation：n. 确认；证实；证明；批准</span><br><span class="line">push down：下推；叠加</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>  在ovn-northd从南向数据库服务器收到其更改已提交的确认后，它将北向NB_Global表中的sb_cfg更新为向下推送的nb_cfg版本。（因此，CMS或其他观察者可以确定南行数据库在没有连接的情况下何时被追赶上。）</span><br></pre></td></tr></table></figure>

<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span>.  The  ovn-controller  <span class="keyword">process</span> <span class="keyword">on</span> each chassis receives the updated southbound database, <span class="keyword">with</span> the updated nb_cfg. This <span class="keyword">process</span> <span class="keyword">in</span> turn updates the physical flows </span><br><span class="line">installed <span class="keyword">in</span> the chassis’s <span class="keyword">Open</span> vSwitch instances. <span class="keyword">When</span> it receives confirmation from <span class="keyword">Open</span> vSwitch that the physical flows have been updated, it updates nb_cfg <span class="keyword">in</span> </span><br><span class="line">its own Chassis <span class="keyword">record</span> <span class="keyword">in</span>  the southbound database.</span><br><span class="line"><span class="keyword">process</span> :n. （为达到某一目标的）过程；（自然变化的）过程；工艺流程；诉讼程序；传票；突起；进展；（发型）直发式 v. 加工；审核；处理（数据）；列队行进；冲印（照片）；把（头发）弄成直发 adj. 经过特殊加工的；照相板的；染印法的</span><br><span class="line"><span class="keyword">in</span> turn:反过来；转而；轮流，依次</span><br><span class="line">instance：n. 实例；情况；建议 vt. 举...为例</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.  每个chassis的ovn-controller进程通过被更新的nb_cfg来接收被更新的南行数据库。此过程依次更新安装在chassis上的<span class="keyword">Open</span> vSwitch实例中的物理流表。当它从<span class="keyword">Open</span> vSwitch收到物理流表已更新的确认时，它会更新南向数据库中自己的chassis记录中的nb_cfg。</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5.</span>  ovn-northd monitors <span class="keyword">the</span> nb_cfg column <span class="keyword">in</span> all <span class="keyword">of</span> <span class="keyword">the</span> Chassis records <span class="keyword">in</span> <span class="keyword">the</span> southbound database. It keeps track <span class="keyword">of</span> <span class="keyword">the</span> minimum <span class="built_in">value</span> <span class="keyword">among</span> all <span class="keyword">the</span> records <span class="keyword">and</span> </span><br><span class="line">copies <span class="keyword">it</span> <span class="keyword">into</span> <span class="keyword">the</span> hv_cfg column <span class="keyword">in</span> <span class="keyword">the</span> northbound NB_Global table. (Thus, <span class="keyword">the</span> CMS <span class="keyword">or</span> another observer can determine when all <span class="keyword">of</span> <span class="keyword">the</span> hypervisors have caught up <span class="built_in">to</span> </span><br><span class="line"><span class="keyword">the</span> northbound configuration.)</span><br><span class="line">track ：n. 轨道；足迹，踪迹；小道 vt. 追踪；通过；循路而行；用纤拉 vi. 追踪；走；留下足迹</span><br><span class="line">keep track <span class="keyword">of</span>：记录，保持联系，明了，跟踪</span><br><span class="line"><span class="keyword">among</span>：prep. 在……中间，周围是；在……之中，……之一；与……在一起；在三者或以上（中选择）；以及；为……所特有；（群体内部）相互间</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>  ovn-northd监视南向数据库中所有chassis记录中的nb_cfg列。它跟踪所有记录中的最小值并将其复制到北向NB_Global表中的hv_cfg列中。（因此，CMS或其他观察者可以确定所有hypervisor何时赶上北行配置。）</span><br></pre></td></tr></table></figure>

<h2 id="chassis-setup"><a href="#chassis-setup" class="headerlink" title="chassis setup"></a>chassis setup</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Each chassis <span class="keyword">in</span> <span class="keyword">an</span> OVN deployment must be configured <span class="keyword">with</span> <span class="keyword">an</span> Open vSwitch bridge dedicated <span class="keyword">for</span> OVN’s use, called <span class="keyword">the</span> integration bridge. System startup  scripts  may  <span class="built_in">create</span>  this  bridge prior <span class="built_in">to</span> starting ovn-controller <span class="keyword">if</span> desired. If this bridge does <span class="keyword">not</span> exist when ovn-controller starts, <span class="keyword">it</span> will be created automatically <span class="keyword">with</span> <span class="keyword">the</span> default configuration suggested below. The ports <span class="keyword">on</span> <span class="title">the</span> <span class="title">integration</span> <span class="title">bridge</span> <span class="title">include</span>:</span><br><span class="line">dedicated：adj. 专用的；专注的；献身的 v. 以…奉献；把…用于（dedicate的过去式和过去分词）</span><br><span class="line">startup  ：n. 启动；开办 n. 初创企业</span><br><span class="line">script  ：n. 脚本；手迹；书写用的字母 vt. 把…改编为剧本 vi. 写电影脚本</span><br><span class="line">prior ：adj. （时间、顺序等）先前的；优先的 n. 男修道院副院长；托钵会会长；（非正式）犯罪前科；先验；（一些宗教教派中的社区）长老</span><br><span class="line">desired：adj. 渴望的；想要的；预期的 v. 渴望，期望；被（某人）吸引，对……产生性欲；要求，恳求（desire 的过去式和过去分词）</span><br><span class="line">suggested ：v. 建议；推荐；（使）联想到；暗示；唤起（suggest 的过去式及过去分词）</span><br><span class="line"></span><br><span class="line">一个OVN部署方案中的每个chassis都必须配置一个专供OVN使用的Open vSwitch网桥，称为集成网桥。如果需要，系统启动脚本可以在启动ovn-controller之前创建此桥。如果ovn-controller启动时此桥不存在，它将使用下面建议的默认配置自动创建。集成网桥上的端口包括：</span><br></pre></td></tr></table></figure>

<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">·      <span class="keyword">On</span> any chassis, tunnel ports that OVN <span class="keyword">uses</span> <span class="keyword">to</span> maintain logical network connectivity. ovn-controller adds, updates, <span class="keyword">and</span> removes these tunnel ports.</span><br><span class="line">maintain :vt. 维持；继续；维修；主张；供养</span><br><span class="line">connectivity:n. 连通（性），联结（度）</span><br><span class="line"></span><br><span class="line">·      在任何chassis上，OVN使用隧道端口维护逻辑网络连接。ovn-controller添加、更新和删除这些隧道端口。</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">·      <span class="keyword">On</span> a hypervisor, <span class="keyword">any</span> VIFs that are <span class="keyword">to</span> be attached <span class="keyword">to</span> logical networks. The hypervisor itself, <span class="keyword">or</span> the integration <span class="keyword">between</span> <span class="keyword">Open</span> vSwitch <span class="keyword">and</span> the hypervisor </span><br><span class="line">(described <span class="keyword">in</span> IntegrationGuide.rst)  takes care <span class="keyword">of</span> this. (This <span class="keyword">is</span> <span class="keyword">not</span> part <span class="keyword">of</span> OVN <span class="keyword">or</span> <span class="built_in">new</span> <span class="keyword">to</span> OVN; this <span class="keyword">is</span> pre-existing integration <span class="keyword">work</span> that has already been </span><br><span class="line">done <span class="keyword">on</span> hypervisors that support OVS.)</span><br><span class="line"><span class="keyword">any</span> :det. 任何的；任一；一点，些许；尽可能多的 pron. 任何数量；任一，任何一些；任何人 adj. 任何的；所有的；丝毫的 adv. 一点也（不），丝毫；（用于否定句末）根本（不）；（非正式）多少，压根儿</span><br><span class="line">attached :adj. 附加的；依恋的，充满爱心的 v. 附上（attach的过去分词）</span><br><span class="line">itself:pron. 它自己；它本身</span><br><span class="line">takes care <span class="keyword">of</span>：照顾；注意；抚养；处理；负责；保管；&lt;非正式&gt;为某物付款（尤在请客时）</span><br><span class="line">pre-existing:v. 早先存在，在先出现（pre-exist 的现在分词） adj. 现存的；已存的，先于……存在（或生存）的</span><br><span class="line"></span><br><span class="line">·      在hypervisor上，任何VIF均要附加到逻辑网络的。hypervisor本身，或<span class="keyword">Open</span> vSwitch与hypervisor之间的集成（在IntegrationGuide.rst中描述）负责这一点。（这不是OVN 的一部分，也不是OVN的新内容；这是在支持OVS的hypervisor上已经完成的预先存在的集成工作。）</span><br></pre></td></tr></table></figure>

<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">·      On a gateway, the physical<span class="built_in"> port </span>used <span class="keyword">for</span> logical<span class="built_in"> network </span>connectivity.<span class="built_in"> System </span>startup scripts <span class="builtin-name">add</span> this<span class="built_in"> port </span><span class="keyword">to</span> the<span class="built_in"> bridge </span>prior <span class="keyword">to</span> starting ovn-controller.  </span><br><span class="line">This can be a patch<span class="built_in"> port </span><span class="keyword">to</span> another bridge, instead of a physical port, <span class="keyword">in</span> more sophisticated setups.</span><br><span class="line">patch：n. 眼罩；斑点；碎片；小块土地 vt. 修补；解决；掩饰  vi. 打补丁</span><br><span class="line">sophisticated ：adj. 复杂的；精致的；久经世故的；富有经验的 v. 使变得世故；使迷惑；篡改（sophisticate的过去分词形式）</span><br><span class="line">setup：n. 设置；机构；组织；调整；计划；装备</span><br><span class="line"></span><br><span class="line">·      在网关上，物理端口用来为逻辑网络提供连接。系统启动脚本在启动ovn-controller之前将此端口添加到网桥。在更复杂的设置中，这可以是另一个网桥的跳线端口，而不是物理端口。</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Other  ports  should  <span class="keyword">not</span>  be  attached  <span class="built_in">to</span>  <span class="keyword">the</span>  integration bridge. In particular, physical ports attached <span class="built_in">to</span> <span class="keyword">the</span> underlay network (<span class="keyword">as</span> opposed <span class="built_in">to</span> gateway ports, </span><br><span class="line">which are physical ports attached <span class="built_in">to</span> logical networks) must <span class="keyword">not</span> be attached <span class="built_in">to</span> <span class="keyword">the</span> integration bridge. Underlay physical ports should instead be attached <span class="built_in">to</span> <span class="keyword">a</span> </span><br><span class="line">separate  Open  vSwitch  bridge  (they  need  <span class="keyword">not</span>  be attached <span class="built_in">to</span> <span class="keyword">any</span> bridge <span class="keyword">at</span> all, <span class="keyword">in</span> fact).</span><br><span class="line">particular:adj. 特别的；详细的；独有的；挑剔的 n. 详细说明；个别项目</span><br><span class="line"><span class="keyword">in</span> particular:尤其，特别</span><br><span class="line">opposed :adj. 相反的；敌对的 v. 反对（oppose的过去分词）；使对立</span><br><span class="line"><span class="keyword">as</span> opposed <span class="built_in">to</span>:与…截然相反；对照</span><br><span class="line">separate  :adj. 分开的；单独的；不同的；各自的；不受影响的 v. （使）分离，分开；隔开；分手；（使）分居；（使）区别（于） n. 可搭配穿着的单件衣服；抽印本；独立音响设备；土壤划分</span><br><span class="line"></span><br><span class="line">其他端口不应连接到集成网桥。特别是，连接到底层网络的物理端口（与网关端口相反，网关端口是连接到逻辑网络的物理端口）不得连接到集成网桥。底层物理端口应该连接到单独的 Open vSwitch 网桥（事实上，它们根本不需要连接到任何网桥）。</span><br></pre></td></tr></table></figure>

<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The integration bridge should be configured <span class="keyword">as</span> described below. The effect of each of these settings is documented <span class="keyword">in</span> ovs-vswitchd.<span class="keyword">conf</span>.<span class="keyword">db</span>(5):</span><br><span class="line"></span><br><span class="line">集成网桥应按如下所述进行配置。这些设置中的每一个的作用都记录在ovs-vswitchd.<span class="keyword">conf</span>.<span class="keyword">db</span>(5) 中：</span><br></pre></td></tr></table></figure>

<figure class="highlight mercury"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fail</span>-<span class="keyword">mode</span><span class="built_in">=</span>secure</span><br><span class="line">       Avoids switching packets between isolated logical networks before ovn-controller starts up. See Controller Failure Settings in ovs-vsctl(<span class="number">8</span>) for more </span><br><span class="line">       information.</span><br><span class="line">Avoids ：v. 避免（avoid的三单形式）；避开</span><br><span class="line">switching：n. [电] 开关；转换；整流；配电  v. 转换（switch的ing形式）</span><br><span class="line">isolated ：adj. 偏远的；孤立的；孤独的；单独的； 绝缘的 v. 使……孤立；使……分离；将……剔出（isolate 的过去式和过去分词）</span><br><span class="line">Failure：n. 失败；故障；失败者；破产</span><br><span class="line"></span><br><span class="line"><span class="built_in">fail</span>-<span class="keyword">mode</span><span class="built_in">=</span>secure</span><br><span class="line">       避免在ovn-controller启动之前在隔离的逻辑网络之间切换数据包。有关更多信息，请参阅ovs-vsctl(<span class="number">8</span>)中的控制器故障设置。</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">other-config:disable-<span class="keyword">in</span>-band=<span class="literal">true</span></span><br><span class="line">       Suppresses  <span class="keyword">in</span>-band  control  flows <span class="keyword">for</span> <span class="keyword">the</span> integration bridge. It would be unusual <span class="keyword">for</span> such flows <span class="built_in">to</span> show up anyway, because OVN uses <span class="keyword">a</span> <span class="built_in">local</span> controller </span><br><span class="line">       (over <span class="keyword">a</span> Unix domain <span class="built_in">socket</span>) instead <span class="keyword">of</span> <span class="keyword">a</span> remote controller. It’s possible, however, <span class="keyword">for</span> some other bridge <span class="keyword">in</span> <span class="keyword">the</span> same <span class="keyword">system</span> <span class="built_in">to</span> have <span class="keyword">an</span> <span class="keyword">in</span>-band remote </span><br><span class="line">       controller, <span class="keyword">and</span> <span class="keyword">in</span>  that  <span class="keyword">case</span>  this  suppresses <span class="keyword">the</span> flows that <span class="keyword">in</span>-band control would ordinarily <span class="built_in">set</span> up. Refer <span class="built_in">to</span> <span class="keyword">the</span> documentation <span class="keyword">for</span> more information.</span><br><span class="line">Suppress:vt. 抑制；镇压；废止 第三人称单数 suppresses</span><br><span class="line"><span class="keyword">in</span>-band:n. 带内；同频带信号传输；合规频率</span><br><span class="line">unusual:adj. 不寻常的；与众不同的；不平常的</span><br><span class="line">show up：露面；露出；揭露</span><br><span class="line">domain ：n. 领域；域名；产业；地产</span><br><span class="line">remote ：adj. 遥远的；偏僻的；疏远的 n. 远程</span><br><span class="line">possible：adj. 可能的；合理的；合适的 n. 可能性；合适的人；可能的事物</span><br><span class="line">ordinarily ：adv. 通常地；一般地</span><br><span class="line">Refer <span class="built_in">to</span>：参考；涉及；指的是；适用于</span><br><span class="line"></span><br><span class="line">other-config:disable-<span class="keyword">in</span>-band=<span class="literal">true</span></span><br><span class="line">       抑制集成桥的带内控制流。无论如何出现这样的流是不寻常的，因为OVN使用本地控制器（通过Unix域套接字）而不是远程控制器。然而，对于同一系统中的某些其他网桥来说，有</span><br><span class="line">       可能具有带内远程控制器，在这种情况下，这会抑制带内控制通常会设置的流量。有关更多信息，请参阅文档。</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">The customary name <span class="keyword">for</span> the integration bridge <span class="keyword">is</span> <span class="keyword">br</span>-<span class="keyword">int</span>, but another name may <span class="keyword">be</span> used.</span><br><span class="line">customary :adj. 习惯的；通常的 n. 习惯法汇编</span><br><span class="line"></span><br><span class="line">集成桥的惯用名称是<span class="keyword">br</span>-<span class="keyword">int</span>，但也可以使用其他名称。</span><br></pre></td></tr></table></figure>

<h2 id="logical-networks"><a href="#logical-networks" class="headerlink" title="logical networks"></a>logical networks</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">A logical network implements the same concepts <span class="keyword">as</span> physical networks, but they are insulated <span class="keyword">from</span> the physical network <span class="keyword">with</span> tunnels <span class="keyword">or</span> other encapsulations. This </span><br><span class="line">allows logical networks <span class="keyword">to</span> have separate IP <span class="keyword">and</span> other address spaces that overlap, <span class="keyword">without</span> conflicting, <span class="keyword">with</span> those used <span class="keyword">for</span> physical networks. Logical network </span><br><span class="line">topologies can be arranged <span class="keyword">without</span> regard <span class="keyword">for</span> the topologies <span class="keyword">of</span> the physical networks <span class="keyword">on</span> which they run.</span><br><span class="line">insulate ：vt. 隔离，使孤立；使绝缘，使隔热 过去式 insulated</span><br><span class="line">encapsulation：n. 封装；包装</span><br><span class="line">overlap：v. 与……重叠，与……互搭；（职责等）部分地重叠，部分地相同；在时间上部分地重叠，同时发生 n. 重叠的部分，互搭量；共同的兴趣（或责任等）；（两事发生的）重叠时间，交接时期</span><br><span class="line">conflicting：adj. 冲突的；相矛盾的；不一致的 v. 冲突；争执（<span class="keyword">conflict</span>的ing形式）</span><br><span class="line">topologies ：n. 拓扑结构，拓扑</span><br><span class="line">arranged ：adj. 安排的 v. 安排；计划；准备（arrange的过去式和过去分词）</span><br><span class="line">regard ：n. 注意；尊重；问候；凝视 vt. 注重，考虑；看待；尊敬；把…看作；与…有关 vi. 注意，注重；注视</span><br><span class="line"></span><br><span class="line">逻辑网络与物理网络基于相同的理念实施，但它们通过隧道或其他封装与物理网络隔离。这将允许逻辑网络具有单独的IP和其他地址空间，这些地址空间与用于物理网络的地址空间重叠而不冲突。可以在不考虑它们运行的物理网络拓扑的情况下安排逻辑网络拓扑。</span><br></pre></td></tr></table></figure>

<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Logical</span> network concepts <span class="keyword">in</span> OVN <span class="keyword">include</span>:</span><br><span class="line"></span><br><span class="line">OVN 中的逻辑网络概念包括：</span><br></pre></td></tr></table></figure>

<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">·      <span class="keyword">Logical</span> switches, the <span class="keyword">logical</span> version of Ethernet switches.</span><br><span class="line"></span><br><span class="line">·      逻辑交换机，以太网交换机的逻辑版本。</span><br></pre></td></tr></table></figure>

<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">·      Logical routers, the logical version of <span class="built_in">IP</span> routers. Logical switches <span class="keyword">and</span> routers can be connected into sophisticated topologies.</span><br><span class="line"></span><br><span class="line">·      逻辑路由器，<span class="built_in">IP</span>路由器的逻辑版本。逻辑交换机和路由器可以连接到复杂的拓扑结构中。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">·      Logical datapaths are <span class="keyword">the</span> logical <span class="built_in">version</span> <span class="keyword">of</span> <span class="keyword">an</span> OpenFlow <span class="keyword">switch</span>. Logical switches <span class="keyword">and</span> routers are both implemented <span class="keyword">as</span> logical datapaths.</span><br><span class="line"></span><br><span class="line">·      逻辑数据路径是OpenFlow交换机的逻辑版本。逻辑交换机和逻辑路由器都作为逻辑数据路径实现。</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">·      Logical ports represent <span class="keyword">the</span> points <span class="keyword">of</span> connectivity <span class="keyword">in</span> <span class="keyword">and</span> out <span class="keyword">of</span> logical switches <span class="keyword">and</span> logical routers. Some common types <span class="keyword">of</span> logical ports are:</span><br><span class="line">                     ·      Logical ports representing VIFs.</span><br><span class="line">                     ·      Localnet ports represent <span class="keyword">the</span> points <span class="keyword">of</span> connectivity between logical switches <span class="keyword">and</span> <span class="keyword">the</span> physical network. They are implemented <span class="keyword">as</span> OVS </span><br><span class="line">                            patch ports between <span class="keyword">the</span> integration bridge <span class="keyword">and</span> <span class="keyword">the</span> separate Open vSwitch bridge that underlay physical ports attach <span class="built_in">to</span>.</span><br><span class="line">                     ·      Logical patch ports represent <span class="keyword">the</span> points <span class="keyword">of</span> connectivity between logical switches <span class="keyword">and</span> logical routers, <span class="keyword">and</span> <span class="keyword">in</span> some cases between peer </span><br><span class="line">                            logical routers. There is <span class="keyword">a</span> pair <span class="keyword">of</span> logical patch ports <span class="keyword">at</span> <span class="keyword">each</span> such point <span class="keyword">of</span> connectivity, <span class="literal">one</span> <span class="keyword">on</span> <span class="title">each</span> <span class="title">side</span>.</span><br><span class="line">                     ·      Localport  ports  represent  <span class="keyword">the</span> points <span class="keyword">of</span> <span class="built_in">local</span> connectivity between logical switches <span class="keyword">and</span> VIFs. These ports are present <span class="keyword">in</span> every </span><br><span class="line">                            chassis (<span class="keyword">not</span> bound <span class="built_in">to</span> <span class="keyword">any</span> particular <span class="literal">one</span>) <span class="keyword">and</span> traffic <span class="built_in">from</span> them will never go through <span class="keyword">a</span> tunnel. A localport is expected <span class="built_in">to</span> only </span><br><span class="line">                            generate traffic destined <span class="keyword">for</span> <span class="keyword">a</span> <span class="built_in">local</span> destination, typically <span class="keyword">in</span> response <span class="built_in">to</span> <span class="keyword">a</span> request <span class="keyword">it</span> received. One use <span class="keyword">case</span> is how OpenStack </span><br><span class="line">                            Neutron uses <span class="keyword">a</span> localport port <span class="keyword">for</span> serving metadata <span class="built_in">to</span> VM’s residing <span class="keyword">on</span> <span class="title">every</span> <span class="title">hypervisor</span>. <span class="title">A</span> <span class="title">metadata</span> <span class="title">proxy</span> <span class="title">process</span> <span class="title">is</span> <span class="title">attached</span> <span class="title">to</span> <span class="title">this</span> </span><br><span class="line">                            port <span class="keyword">on</span> <span class="title">every</span> <span class="title">host</span> <span class="title">and</span> <span class="title">all</span> <span class="title">VM</span>’<span class="title">s</span> <span class="title">within</span> <span class="title">the</span> <span class="title">same</span> <span class="title">network</span> <span class="title">will</span> <span class="title">reach</span> <span class="title">it</span> <span class="title">at</span> <span class="title">the</span> <span class="title">same</span> <span class="title">IP</span>/<span class="title">MAC</span> <span class="title">address</span> <span class="title">without</span> <span class="title">any</span> <span class="title">traffic</span> <span class="title">being</span>  <span class="title">sent</span>  <span class="title">over</span>  </span><br><span class="line">                            <span class="keyword">a</span>  tunnel.Further details can be seen <span class="keyword">at</span> <span class="keyword">https</span>://docs.openstack.org/developer/networking-ovn/design/metadata_api.html.</span><br><span class="line">represent :vt. 代表；表现；描绘；回忆；再赠送 vi. 代表；提出异议</span><br><span class="line">common:adj. 共同的；普通的；一般的；通常的 n. 普通；平民；公有地</span><br><span class="line">cases:n. 情况（<span class="keyword">case</span>的复数形式）；[法] 案例；箱 v. 把…装于容器中（<span class="keyword">case</span>的第三人称单数形式）</span><br><span class="line">peer :n. 同等地位的人，同龄人；贵族 v. 凝视，盯着看；隐现；看见；匹配</span><br><span class="line">present :adj. 现在的；出席的；（事物）存在的；正在考虑的；现在时（态）的 n. 礼物；现在，目前；（动词）现在式；（举枪的）瞄准</span><br><span class="line">expected :adj. 预期的；预料的 v. 预期；盼望（expect的过去分词）</span><br><span class="line">generate :vt. 使形成；发生；生殖；产生物理反应</span><br><span class="line">destined:adj. 注定的；命定的；去往…的 v. 注定（destine的过去式和过去分词）</span><br><span class="line">typically :adv. 代表性地；作为特色地</span><br><span class="line">serving :n. （供一个人吃的）一份食物 adj. 上菜用的 v. 为……服务；为……提供产品服务；服兵役；任职；做学徒（serve 的现在分词）</span><br><span class="line">residing :属于</span><br><span class="line">reside:vi. 住，居住；属于</span><br><span class="line">metadata :n. 元数据，诠释数据</span><br><span class="line">proxy :n. 代理人；委托书；代用品</span><br><span class="line"><span class="keyword">within</span> :prep. 在……之内；在……里面 adv. 在内部；在里面 n. 里面；内部</span><br><span class="line">Further :adv. 更远地；远非（如此）；进一步地；而且；处于更高阶段 adj. 更多的，附加的；更远的；进一步的，深一层的  v. 促进，增进，助长</span><br><span class="line">details:n. 细节（detail的复数）；详细资料 v. 详细说明（detail的三单形式）</span><br><span class="line"></span><br><span class="line">·      逻辑端口代表进出逻辑交换机和逻辑路由器的连接点。一些常见的逻辑端口类型是：</span><br><span class="line">                     ·      代表VIF的逻辑端口。</span><br><span class="line">                     ·      Localnet端口代表逻辑交换机和物理网络之间的连接点。它们作为集成网桥及和底层物理端口连接的独立Open vSwitch网桥之间的OVS补丁端口实现。</span><br><span class="line">                     ·      Logical patch 端口代表逻辑交换机和逻辑路由器之间的连接点，在某些情况下也代表对等逻辑路由器之间的连接点。每个这样的连接点都有一对逻辑接</span><br><span class="line">                            线端口，每侧一个。</span><br><span class="line">                     ·      Localport端口代表逻辑交换机和VIF之间的本地连接点。这些端口存在于每个chassis中（不绑定到任何特定chassis）并且来自它们的流量永远不会通过</span><br><span class="line">                            隧道。本地端口预计只生成发往本地目的地的流量，通常是响应它收到的请求。一个用例是OpenStack Neutron如何使用本地端口端口为驻留在每个</span><br><span class="line">                            hypervisor上的VM提供元数据。元数据代理进程附加到每个主机上的这个端口，同一网络中的所有VM都将通过相同的IP/MAC地址到达它，而不会通过隧道</span><br><span class="line">                            发送任何流量。更多详细信息可以在<span class="keyword">https</span>://docs.openstack.org/developer/networking-ovn/design/metadata_api.html中看到。</span><br></pre></td></tr></table></figure>

<h2 id="life-cycle-of-a-vif"><a href="#life-cycle-of-a-vif" class="headerlink" title="life cycle of a vif"></a>life cycle of a vif</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Tables</span> <span class="keyword">and</span> their <span class="keyword">schemas</span> presented <span class="keyword">in</span> <span class="keyword">isolation</span> are difficult <span class="keyword">to</span> understand. Here’s an example.</span><br><span class="line">presented :v. 提出（present的过去分词）；呈递，提供</span><br><span class="line"><span class="keyword">isolation</span> :n. 隔离；孤立；[电] 绝缘；[化学] 离析</span><br><span class="line"></span><br><span class="line">单独呈现的表及其模式难以理解。这是一个例子。</span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A  VIF  <span class="keyword">on</span> a hypervisor <span class="keyword">is</span> a virtual network interface attached either <span class="keyword">to</span> a VM <span class="keyword">or</span> a container <span class="built_in">running</span> directly <span class="keyword">on</span> <span class="keyword">that</span> hypervisor (This <span class="keyword">is</span> different <span class="keyword">from</span> <span class="keyword">the</span> </span><br><span class="line">interface <span class="keyword">of</span> a container <span class="built_in">running</span> inside a VM).</span><br><span class="line">container :n. 集装箱；容器</span><br><span class="line"></span><br><span class="line">hypervisor上的VIF是连接到VM或直接在该hypervisor上运行的容器的虚拟网络接口（这与在VM内运行的容器的接口不同）。</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The steps in this example refer often <span class="keyword">to</span> details of the OVN <span class="built_in">and</span> OVN Northbound database schemas. Please see ovn-<span class="keyword">sb</span>(<span class="number">5</span>) <span class="built_in">and</span> ovn-<span class="keyword">nb</span>(<span class="number">5</span>), respectively, <span class="keyword">for</span> the full story <span class="keyword">on</span> these databases.</span><br><span class="line">respectively:adv. 分别地；各自地，独自地</span><br><span class="line">story:n. 故事；小说；描述；新闻报道；来历；假话；层；一种测量单位（<span class="number">1</span> story 等于 <span class="number">3.3</span> 米）vt. 用历史故事画装饰</span><br><span class="line"></span><br><span class="line">此示例中的步骤通常涉及OVN和OVN Northbound数据库架构的详细信息。请分别参阅ovn-<span class="keyword">sb</span>(<span class="number">5</span>)和ovn-<span class="keyword">nb</span>(<span class="number">5</span>)以了解有关这些数据库的完整描述。</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  A VIF’s life cycle <span class="keyword">begins</span> when <span class="keyword">a</span> CMS administrator creates <span class="keyword">a</span> <span class="built_in">new</span> VIF <span class="keyword">using</span> <span class="keyword">the</span> CMS user interface <span class="keyword">or</span> API <span class="keyword">and</span> adds <span class="keyword">it</span> <span class="built_in">to</span> <span class="keyword">a</span> <span class="keyword">switch</span> (<span class="literal">one</span> implemented <span class="keyword">by</span> OVN <span class="keyword">as</span> <span class="keyword">a</span>  </span><br><span class="line">logical  <span class="keyword">switch</span>).The CMS updates its own configuration. This includes associating unique, persistent identifier vif-id <span class="keyword">and</span> Ethernet address mac <span class="keyword">with</span> <span class="keyword">the</span> VIF.</span><br><span class="line">implemented :v. 实施（implement的过去分词形式）；执行 adj. 应用的</span><br><span class="line">associating :n. 姘居 v. 结合；使联合；把……联系在一起；联想；参与；交往，混在一起；表示支持（或同意）（associate 的现在分词）</span><br><span class="line">unique:adj. 独特的，稀罕的；[数] 唯一的，独一无二的 n. 独一无二的人或物</span><br><span class="line">persistent :adj. 执着的，坚持不懈的；持续的，反复出现的；（动植物某部位，如角、叶等）存留的，不落的</span><br><span class="line">identifier :n. 标识符，认同者；检验人，鉴定人</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>  当CMS管理员使用CMS用户界面或API创建新的VIF并将其添加到交换机（由OVN实现的逻辑交换机）时，VIF的生命周期就开始了。CMS更新自己的配置，包括将唯一的、持久的标识符vif-id和以太网地址mac与VIF相关联。</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>  The  CMS plugin updates the OVN Northbound <span class="keyword">database</span> <span class="keyword">to</span> <span class="keyword">include</span> the <span class="built_in">new</span> VIF, <span class="keyword">by</span> adding a <span class="keyword">row</span> <span class="keyword">to</span> the Logical_Switch_Port <span class="keyword">table</span>. <span class="keyword">In</span> the <span class="built_in">new</span> <span class="keyword">row</span>, <span class="type">name</span> <span class="keyword">is</span> vif-id, </span><br><span class="line">mac <span class="keyword">is</span> mac, switch points <span class="keyword">to</span> the OVN logical switch’s Logical_Switch <span class="type">record</span>, <span class="keyword">and</span> other <span class="keyword">columns</span> are initialized appropriately.</span><br><span class="line">initialized:v. （使）初始化；预置传授；（常通过特殊仪式）（使）加入（initialize 的过去式和过去分词）</span><br><span class="line">appropriately:adv. 适当地；合适地；相称地</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>  CMS插件通过向Logical_Switch_Port表添加一行来更新OVN Northbound数据库以包含新的VIF。在新行中，<span class="type">name</span>为vif-id，mac为mac，switch指向OVN逻辑交换机的Logical_Switch记录，其他列也进行了相应的初始化。</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>  ovn-northd receives <span class="keyword">the</span> OVN Northbound database update. In turn, <span class="keyword">it</span> makes <span class="keyword">the</span> corresponding updates <span class="built_in">to</span> <span class="keyword">the</span> OVN Southbound database, <span class="keyword">by</span> adding rows <span class="built_in">to</span> <span class="keyword">the</span> OVN  </span><br><span class="line">Southbound  database Logical_Flow table <span class="built_in">to</span> reflect <span class="keyword">the</span> <span class="built_in">new</span> port, e.g. <span class="built_in">add</span> <span class="keyword">a</span> flow <span class="built_in">to</span> recognize that packets destined <span class="built_in">to</span> <span class="keyword">the</span> <span class="built_in">new</span> port’s MAC address should be delivered <span class="built_in">to</span> <span class="keyword">it</span>, <span class="keyword">and</span> update <span class="keyword">the</span> flow that delivers broadcast <span class="keyword">and</span> multicast packets <span class="built_in">to</span> <span class="built_in">include</span> <span class="keyword">the</span> <span class="built_in">new</span> port. It also creates <span class="keyword">a</span> record <span class="keyword">in</span> <span class="keyword">the</span> Binding table <span class="keyword">and</span> populates all its columns except <span class="keyword">the</span> column that  identifies <span class="keyword">the</span> chassis.</span><br><span class="line">In turn:反过来；转而；轮流，依次</span><br><span class="line">corresponding :adj. 相当的，相应的；一致的；通信的 v. 类似（correspond的ing形式）；相配</span><br><span class="line">reflect :vt. 反映；反射，照出；表达；显示；反省 vi. 反射，映现；深思</span><br><span class="line">recognize :vt. 认出，识别；承认；接受，认可；赞赏 vi. 确认，承认；具结</span><br><span class="line">destined :adj. 注定的；命定的；去往…的 v. 注定（destine的过去式和过去分词）</span><br><span class="line">delivered :v. 递送；发表；履行诺言；移交；助产；分娩；投掷；拉（选票）；宣布（判决）；给予（打击、震惊等）；解救（deliver 的过去式及过去分词）</span><br><span class="line">deliver :vt. 交付；发表；递送；释放；给予（打击）；给…接生 vi. 实现；传送；履行；投递</span><br><span class="line">populate :vt. 居住于；构成人口；移民于；殖民于,填充</span><br><span class="line">except :prep. 除……之外 conj. 只是；除非；除……之外；要不是由于 v. 不计，把……除外；反对</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>  ovn-northd接收OVN Northbound数据库更新。反过来，它通过向OVN南向数据库Logical_Flow表添加行以反映新端口，从而对OVN南向数据库进行相应的更新，例如添加一个流以识别应发往新端口MAC地址的数据包并传送给它，并更新广播和组播数据包的流以包含新端口。它还在Binding表中创建一个记录并填充除标识chassis的列之外的所有列。</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4.</span>  On  every  hypervisor,  ovn-controller  receives  <span class="keyword">the</span>  Logical_Flow table updates that ovn-northd made <span class="keyword">in</span> <span class="keyword">the</span> previous step. As <span class="keyword">long</span> <span class="keyword">as</span> <span class="keyword">the</span> VM that owns <span class="keyword">the</span> VIF is powered off,ovn-controller cannot <span class="built_in">do</span> much; <span class="keyword">it</span> cannot, <span class="keyword">for</span> example, arrange <span class="built_in">to</span> <span class="built_in">send</span> packets <span class="built_in">to</span> <span class="keyword">or</span> receive packets <span class="built_in">from</span> <span class="keyword">the</span> VIF, because <span class="keyword">the</span> VIF does <span class="keyword">not</span> actually exist anywhere.</span><br><span class="line">previous ：adj. 以前的；早先的；过早的 adv. 在先；在…以前</span><br><span class="line">As <span class="keyword">long</span> <span class="keyword">as</span>:只要；和…一样长</span><br><span class="line">arrange :vt. 安排；排列；整理 vi. 安排；排列；协商</span><br><span class="line">actually :adv. 实际上；事实上</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>  在每个hypervisor上，ovn-controller接收ovn-northd在上一步中进行的Logical_Flow表更新。但是只要拥有VIF的VM断电，ovn-controller就无能为力了；例如，它不能安排向VIF发送数据包或从VIF接收数据包，因为VIF实际上并不存在于任何地方。</span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5.</span>  Eventually, a user powers <span class="keyword">on</span> <span class="keyword">the</span> VM <span class="keyword">that</span> owns <span class="keyword">the</span> VIF. On <span class="keyword">the</span> hypervisor <span class="keyword">where</span> <span class="keyword">the</span> VM <span class="keyword">is</span> powered <span class="keyword">on</span>, <span class="keyword">the</span> integration <span class="keyword">between</span> <span class="keyword">the</span> hypervisor <span class="keyword">and</span> Open vSwitch (</span><br><span class="line">described <span class="keyword">in</span> IntegrationGuide.rst) adds <span class="keyword">the</span> VIF <span class="keyword">to</span> <span class="keyword">the</span> OVN integration bridge <span class="keyword">and</span> stores vif-<span class="built_in">id</span> <span class="keyword">in</span> external_ids:iface-<span class="built_in">id</span> <span class="keyword">to</span> indicate <span class="keyword">that</span> <span class="keyword">the</span> interface <span class="keyword">is</span> an </span><br><span class="line">instantiation <span class="keyword">of</span> <span class="keyword">the</span> new VIF. (None <span class="keyword">of</span> this code <span class="keyword">is</span> new <span class="keyword">in</span> OVN; this <span class="keyword">is</span> pre-existing integration work <span class="keyword">that</span> has already been done <span class="keyword">on</span> hypervisors <span class="keyword">that</span> support OVS.)</span><br><span class="line">Eventually:adv. 最后，终于</span><br><span class="line">integration :n. 集成；综合</span><br><span class="line">store :n. 商店；储备，贮藏；仓库 vt. 贮藏，储存</span><br><span class="line">indicate :vt. 表明；指出；预示；象征</span><br><span class="line">instantiation :n. 实例化；[计] 例示</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>  最终，用户启动了拥有VIF的VM。在上电VM的hypervisor上，hypervisor和Open vSwitch之间的集成（在IntegrationGuide.rst中描述）将VIF添加到OVN集成桥，并将vif-<span class="built_in">id</span>存储在external_ids:iface-<span class="built_in">id</span>中以指示接口是新VIF的实例化。（这些代码在OVN中都不是新的；这是在支持OVS的hypervisor上已经完成的预先存在的集成工作。）</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6.</span>  <span class="keyword">On</span> the hypervisor <span class="keyword">where</span> the VM <span class="keyword">is</span> powered <span class="keyword">on</span>, ovn-controller notices external_ids:iface-id <span class="keyword">in</span> the <span class="built_in">new</span> Interface. <span class="keyword">In</span> response, <span class="keyword">in</span> the OVN Southbound DB, it </span><br><span class="line">updates  the  Binding <span class="keyword">table</span>’s  chassis <span class="keyword">column</span> <span class="keyword">for</span> the <span class="keyword">row</span> that links the logical port <span class="keyword">from</span> external_ids: iface-id <span class="keyword">to</span> the hypervisor. Afterward, ovn-controller </span><br><span class="line">updates the <span class="keyword">local</span> hypervisor’s OpenFlow <span class="keyword">tables</span> so that packets <span class="keyword">to</span> <span class="keyword">and</span> <span class="keyword">from</span> the VIF are properly handled.</span><br><span class="line">notices :n. 条款；启事；通知函（<span class="keyword">notice</span>的复数）v. 注意；通知（<span class="keyword">notice</span>的三单形式）</span><br><span class="line">response:n. 响应；反应；回答</span><br><span class="line">Afterward:adv. 以后，后来</span><br><span class="line">properly :adv. 适当地；正确地；恰当地</span><br><span class="line">handled：adv. adj. 有把手的，有把柄的 v. 使用；负责；触摸；指挥；买；卖（handle 的过去式和过去分词）</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>  在VM启动的hypervisor上，ovn-controller注意到在新接口中的external_ids:iface-id。作为响应，在OVN Southbound DB中，它更新Binding表的chassis列，用于将逻辑端口从external_ids:iface-id链接到hypervisor的行。之后，ovn-controller更新本地hypervisor的OpenFlow表，以便正确处理进出VIF的数据包。</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">7.</span>  <span class="keyword">Some</span> CMS systems, including OpenStack, fully <span class="keyword">start</span> a VM <span class="keyword">only</span> <span class="keyword">when</span> its networking <span class="keyword">is</span> ready. <span class="keyword">To</span> support this, ovn-northd notices the chassis <span class="keyword">column</span> updated <span class="keyword">for</span> the <span class="keyword">row</span> <span class="keyword">in</span> Binding <span class="keyword">table</span>  <span class="keyword">and</span>  pushes this upward <span class="keyword">by</span> updating the up <span class="keyword">column</span> <span class="keyword">in</span> the OVN Northbound <span class="keyword">database</span>’s Logical_Switch_Port <span class="keyword">table</span> <span class="keyword">to</span> indicate that the VIF <span class="keyword">is</span> now </span><br><span class="line">up. The CMS, <span class="keyword">if</span> it uses this feature, can <span class="keyword">then</span> react <span class="keyword">by</span> allowing the VM’s execution <span class="keyword">to</span> proceed.</span><br><span class="line">upward :adj. 向上的；上升的 adv. 向上地；增涨地</span><br><span class="line">indicate :vt. 表明；指出；预示；象征</span><br><span class="line">feature:n. 特色，特征；容貌；特写或专题节目 vi. 起重要作用 vt. 特写；以…为特色；由…主演</span><br><span class="line">react :vi. 反应，作出反应；产生（化学）反应；</span><br><span class="line">execution :n. 执行，实行；完成；死刑</span><br><span class="line">proceed:vi. 开始；继续进行；发生；行进 n. 收入，获利</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span>  一些CMS系统，包括OpenStack，仅在虚拟机网络就绪时才完全启动虚拟机。为了支持这一点，ovn-northd为Binding表中的行留心chassis列的更新，并通过更新OVN Northbound数据库的Logical_Switch_Port表中的up列将其上推，以指示VIF现在已启动。</span><br></pre></td></tr></table></figure>

<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">8.  On every hypervisor but the one where the VIF resides, ovn-controller notices the completely populated row in the Binding table. This provides ovn-controller the physical location  of  the logical port, so each<span class="built_in"> instance </span>updates the OpenFlow tables of its switch (based on logical datapath flows in the OVN DB Logical_Flow </span><br><span class="line">table) so that packets to<span class="built_in"> and </span>from the VIF can be properly handled via tunnels.</span><br><span class="line">resides:vi. 住，居住；属于</span><br><span class="line">completely<span class="keyword"> :adv</span>. 完全地，彻底地；完整地</span><br><span class="line">populated<span class="keyword"> :adj</span>. 有人口居住的；（印刷集成电路板）安装有元件的；粒子数增加的 v. 居住于……中；构成……的人口（populate 的过去式和过去分词）</span><br><span class="line">provide<span class="keyword"> :vt</span>. 提供；规定；准备；装备 vi. 规定；抚养；作准备<span class="built_in"></span></span><br><span class="line"><span class="built_in">instance </span>:n. 实例；情况；建议 vt. 举...为例</span><br><span class="line"></span><br><span class="line">8.  在除VIF所在的hypervisor之外的每个hypervisor上，ovn-controller都会注意到Binding表中完全填充的行。这为ovn-controller提供了逻辑端口的物理位置，因此每个实例都会更新其交换机的OpenFlow表（基于OVN DB Logical_Flow表中的逻辑数据路径流），以便可以通过隧道正确处理进出VIF的数据包。</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">9.</span>  Eventually, <span class="keyword">a</span> user powers off <span class="keyword">the</span> VM that owns <span class="keyword">the</span> VIF. On <span class="keyword">the</span> hypervisor where <span class="keyword">the</span> VM was powered off, <span class="keyword">the</span> VIF is deleted <span class="built_in">from</span> <span class="keyword">the</span> OVN integration bridge.</span><br><span class="line"></span><br><span class="line"><span class="number">9.</span>  最终，用户关闭拥有VIF的VM。在关闭的VM的hypervisor上，VIF从OVN集成桥中删除。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10.</span> On <span class="keyword">the</span> hypervisor where <span class="keyword">the</span> VM was powered off, ovn-controller notices that <span class="keyword">the</span> VIF was deleted. In response, <span class="keyword">it</span> removes <span class="keyword">the</span> Chassis column content <span class="keyword">in</span> <span class="keyword">the</span> </span><br><span class="line">Binding table <span class="keyword">for</span> <span class="keyword">the</span> logical port.</span><br><span class="line">content :n. 内容，目录；满足；容量 adj. 满意的 vt. 使满意</span><br><span class="line"></span><br><span class="line"><span class="number">10.</span> 在关闭VM的虚拟机管理程序上，ovn-controller注意到VIF已被删除。作为响应，它删除逻辑端口绑定表中的chassis列内容。</span><br></pre></td></tr></table></figure>

<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">11. On  every hypervisor, ovn-controller notices the empty Chassis column in the Binding table’s row for the logical port. This means that ovn-controller no longer </span><br><span class="line">knows the physical location of the logical port, so each<span class="built_in"> instance </span>updates its OpenFlow table to reflect that.</span><br><span class="line">reflect<span class="keyword"> :vt</span>. 反映；反射，照出；表达；显示；反省 vi. 反射，映现；深思</span><br><span class="line"></span><br><span class="line">11. 在每个hypervisor上，ovn-controller会注意到Binding表行中逻辑端口的空chassis列。这意味着ovn-controller不再知道逻辑端口的物理位置，因此每个实例都会更新其OpenFlow表以反映这一点。</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">12.</span> Eventually, <span class="keyword">when</span> the VIF (<span class="keyword">or</span> its entire VM) <span class="keyword">is</span> <span class="keyword">no</span> longer needed <span class="keyword">by</span> anyone, an administrator deletes the VIF <span class="keyword">using</span> the CMS <span class="keyword">user</span> interface <span class="keyword">or</span> API. The CMS updates its own <span class="keyword">configuration</span>.</span><br><span class="line">entire :adj. 全部的，整个的；全体的</span><br><span class="line"></span><br><span class="line"><span class="number">12.</span> 最终，当任何人不再需要VIF（或其整个VM）时，管理员会使用CMS用户界面或API删除VIF。CMS 更新自己的配置。</span><br></pre></td></tr></table></figure>

<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">13</span>. The CMS plugin <span class="comment">removes the VIF from the OVN Northbound database, by deleting its row in the Logical_Switch_Port table.</span></span><br><span class="line"></span><br><span class="line"><span class="number">13</span>. CMS插件通过删除Logical_Switch_Port表中的行从OVN Northbound数据库中删除VIF。</span><br></pre></td></tr></table></figure>

<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">14</span>. ovn-<span class="keyword">northd </span> receives  the  OVN  <span class="keyword">Northbound </span>update <span class="keyword">and </span>in turn updates the OVN Southbound database accordingly, <span class="keyword">by </span>removing <span class="keyword">or </span>updating the rows from the OVN </span><br><span class="line">Southbound database Logical_Flow table <span class="keyword">and </span><span class="keyword">Binding </span>table that were related to the now-destroyed VIF.</span><br><span class="line"><span class="symbol">accordingly:</span>adv. 因此，于是；相应地；照着</span><br><span class="line">related :adj. 有关系的，有关联的；讲述的，叙述的 v. 叙述（relate过去式）</span><br><span class="line">now-destroyed:现已毁坏</span><br><span class="line"></span><br><span class="line"><span class="number">14</span>. ovn-<span class="keyword">northd接收OVN </span><span class="keyword">Northbound更新，然后相应地更新OVN </span>Southbound数据库，方法是从OVN Southbound数据库Logical_Flow表和<span class="keyword">Binding表中删除或更新与现已销毁的VIF相关的行。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">15.</span> On every hypervisor, ovn-controller receives <span class="keyword">the</span> Logical_Flow table updates that ovn-northd made <span class="keyword">in</span> <span class="keyword">the</span> previous step. ovn-controller updates OpenFlow  tables  </span><br><span class="line"><span class="built_in">to</span>  reflect  <span class="keyword">the</span> update, although there may <span class="keyword">not</span> be much <span class="built_in">to</span> <span class="built_in">do</span>, since <span class="keyword">the</span> VIF had already become unreachable when <span class="keyword">it</span> was removed <span class="built_in">from</span> <span class="keyword">the</span> Binding table <span class="keyword">in</span> <span class="keyword">a</span> </span><br><span class="line">previous step.</span><br><span class="line">although ：conj. 尽管，虽然；但是，然而</span><br><span class="line">unreachable ：adj. 不能得到的；不能达到的</span><br><span class="line"></span><br><span class="line"><span class="number">15.</span> 在每个hypervisor上，ovn-controller接收ovn-northd在上一步中进行的Logical_Flow表更新。ovn-controller更新OpenFlow表以反映更新，尽管可能没有太多事情要做，因为VIF在上一步中从绑定表中删除时已经变得无法访问。</span><br></pre></td></tr></table></figure>

<h2 id="life-cycle-of-a-container-interface-inside-a-vm"><a href="#life-cycle-of-a-container-interface-inside-a-vm" class="headerlink" title="life cycle of a container interface inside a vm"></a>life cycle of a container interface inside a vm</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">OVN provides virtual network abstractions <span class="keyword">by</span> converting information written <span class="keyword">in</span> OVN_NB <span class="keyword">database</span> <span class="keyword">to</span> OpenFlow flows <span class="keyword">in</span> <span class="keyword">each</span> hypervisor. Secure virtual networking <span class="keyword">for</span> </span><br><span class="line">multi-tenants can <span class="keyword">only</span> be  provided  <span class="keyword">if</span>  OVN controller <span class="keyword">is</span> the <span class="keyword">only</span> entity that can modify flows <span class="keyword">in</span> <span class="keyword">Open</span> vSwitch. <span class="keyword">When</span> the <span class="keyword">Open</span> vSwitch integration bridge resides </span><br><span class="line"><span class="keyword">in</span> the hypervisor, it <span class="keyword">is</span> a fair assumption <span class="keyword">to</span> make that tenant workloads running inside VMs cannot make <span class="keyword">any</span> changes <span class="keyword">to</span> <span class="keyword">Open</span> vSwitch flows.</span><br><span class="line">converting:n. 转化，改变；皈依 v. 使改变；皈依（convert的现在分词）；兑换</span><br><span class="line">Secure:adj. (secure) 安全的；安心的；可靠的；稳固的，牢固的 v. (secure) 获得；栓牢，扣紧；保护；抵押</span><br><span class="line">multi-tenants:多租户</span><br><span class="line">provided:conj. 假如，倘若 v. 提供，给予（provide 的过去式和过去分词）</span><br><span class="line">entity :n. 实体；存在</span><br><span class="line">reside :vi. 住，居住；属于</span><br><span class="line">fair :adj. 公平的；美丽的，白皙的；[气象] 晴朗的 adv. 公平地；直接地；清楚地  vi. 转晴 n. 展览会；市集；美人</span><br><span class="line">assumption :n. 假定；设想；担任；采取</span><br><span class="line">workload :n. 工作量</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">If <span class="keyword">the</span> infrastructure provider trusts <span class="keyword">the</span> applications inside <span class="keyword">the</span> containers <span class="keyword">not</span> <span class="built_in">to</span> break out <span class="keyword">and</span> modify <span class="keyword">the</span> Open vSwitch flows, <span class="keyword">then</span> containers can be run <span class="keyword">in</span> </span><br><span class="line">hypervisors. This is also <span class="keyword">the</span> <span class="keyword">case</span> when containers are run inside <span class="keyword">the</span> VMs <span class="keyword">and</span> Open vSwitch integration bridge <span class="keyword">with</span> flows added <span class="keyword">by</span> OVN controller resides <span class="keyword">in</span> <span class="keyword">the</span> </span><br><span class="line">same VM. For both <span class="keyword">the</span> above cases, <span class="keyword">the</span> workflow is <span class="keyword">the</span> same <span class="keyword">as</span> explained <span class="keyword">with</span> <span class="keyword">an</span> example <span class="keyword">in</span> <span class="keyword">the</span> previous section (<span class="string">&quot;Life Cycle of a VIF&quot;</span>).</span><br><span class="line">infrastructure:n. 基础设施；公共建设；下部构造</span><br><span class="line">provider：n. 供应者；养家者</span><br><span class="line">trusts ：n. [贸易] 信托；信任（trust的复数形式）v. 相信（trust的三单形式）；委托</span><br><span class="line"><span class="keyword">case</span> :n. 情况；实例；箱 vt. 包围；把…装于容器中 n. (Case)人名；(英)凯斯；(西)卡塞；(法)卡斯</span><br><span class="line">reside:vi. 住，居住；属于</span><br><span class="line">explained :v. 解释（explain的过去式及过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">This section talks about <span class="keyword">the</span> life cycle <span class="keyword">of</span> <span class="keyword">a</span> container interface (CIF) when containers are created <span class="keyword">in</span> <span class="keyword">the</span> VMs <span class="keyword">and</span> <span class="keyword">the</span> Open vSwitch integration bridge resides inside <span class="keyword">the</span>  hypervisor.  In this  <span class="keyword">case</span>, even <span class="keyword">if</span> <span class="keyword">a</span> container application breaks out, other tenants are <span class="keyword">not</span> affected because <span class="keyword">the</span> containers running inside <span class="keyword">the</span> VMs cannot </span><br><span class="line">modify <span class="keyword">the</span> flows <span class="keyword">in</span> <span class="keyword">the</span> Open vSwitch integration bridge.</span><br><span class="line">tenants :n. 房客；居住者（tenant的复数形式） v. 租借（tenant的第三人称单数）</span><br><span class="line">affected :adj. 受到影响的；做作的；假装的 vt. 影响；假装；使…感动（affect的过去式和过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">When multiple containers are created inside <span class="keyword">a</span> VM, there are multiple CIFs associated <span class="keyword">with</span> them. The network traffic associated <span class="keyword">with</span> these CIFs need <span class="built_in">to</span> reach <span class="keyword">the</span> Open vSwitch integration bridge running <span class="keyword">in</span> <span class="keyword">the</span> hypervisor <span class="keyword">for</span> OVN <span class="built_in">to</span> support virtual network abstractions. OVN should also be able <span class="built_in">to</span> distinguish network traffic coming </span><br><span class="line"><span class="built_in">from</span> different CIFs. There are <span class="literal">two</span> ways <span class="built_in">to</span> distinguish network traffic <span class="keyword">of</span> CIFs.</span><br><span class="line">associated :adj. 关联的；联合的 v. 联系（associate的过去式和过去分词）</span><br><span class="line">distinguish :vt. 区分；辨别；使杰出，使表现突出 vi. 区别，区分；辨别</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">One way is <span class="built_in">to</span> provide <span class="literal">one</span> VIF <span class="keyword">for</span> every CIF (<span class="number">1</span>:<span class="number">1</span> model). This means that there could be <span class="keyword">a</span> lot <span class="keyword">of</span> network devices <span class="keyword">in</span> <span class="keyword">the</span> hypervisor. This would slow down OVS because  <span class="keyword">of</span> all <span class="keyword">the</span> additional CPU cycles needed <span class="keyword">for</span> <span class="keyword">the</span> management <span class="keyword">of</span> all <span class="keyword">the</span> VIFs. It would also mean that <span class="keyword">the</span> entity creating <span class="keyword">the</span> containers <span class="keyword">in</span> <span class="keyword">a</span> VM should also be able <span class="built_in">to</span> <span class="built_in">create</span> <span class="keyword">the</span> corresponding VIFs <span class="keyword">in</span> <span class="keyword">the</span> hypervisor.</span><br><span class="line">additional :adj. 附加的，额外的</span><br><span class="line">cycles :n. 周期（cycle的复数）；循环动作；圈数 v. 循环；骑自行车（cycle的三单形式）</span><br><span class="line">entity :n. 实体；存在</span><br><span class="line">corresponding :adj. 相当的，相应的；一致的；通信的 v. 类似（correspond的ing形式）；相配</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The <span class="keyword">second</span> way is <span class="built_in">to</span> provide <span class="keyword">a</span> single VIF <span class="keyword">for</span> all <span class="keyword">the</span> CIFs (<span class="number">1</span>:many model). OVN could <span class="keyword">then</span> distinguish network traffic coming <span class="built_in">from</span> different CIFs via <span class="keyword">a</span> tag written <span class="keyword">in</span> every  packet.  OVN uses this mechanism <span class="keyword">and</span> uses VLAN <span class="keyword">as</span> <span class="keyword">the</span> tagging mechanism.</span><br><span class="line">mechanism : n. 机制；原理，途径；进程；机械装置；技巧</span><br><span class="line">tagging :n. 标记；锻尖 v. 加标签于；附加；把…称为（tag的现在分词形式）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  A  CIF’s life cycle <span class="keyword">begins</span> when <span class="keyword">a</span> container is spawned inside <span class="keyword">a</span> VM <span class="keyword">by</span> <span class="keyword">the</span> either <span class="keyword">the</span> same CMS that created <span class="keyword">the</span> VM <span class="keyword">or</span> <span class="keyword">a</span> tenant that owns that VM <span class="keyword">or</span> even <span class="keyword">a</span> </span><br><span class="line">container Orchestration System that is different than <span class="keyword">the</span> CMS that initially created <span class="keyword">the</span> VM. Whoever <span class="keyword">the</span> entity is, <span class="keyword">it</span> will need <span class="built_in">to</span> know <span class="keyword">the</span> vif-id that is </span><br><span class="line">associated <span class="keyword">with</span> <span class="keyword">the</span> network interface <span class="keyword">of</span>  <span class="keyword">the</span>  VM  through  which  <span class="keyword">the</span>  container interface’s network traffic is expected <span class="built_in">to</span> go through. The entity that creates <span class="keyword">the</span> container interface will also need <span class="built_in">to</span> choose <span class="keyword">an</span> unused VLAN inside that VM.</span><br><span class="line">spawned :v. 引起（spawn的过去分词）；孵出</span><br><span class="line">either :pron. （两者中的）任何一个；（两者中的）每个；（用于否定句表示两者）都不 det. （两者之中的）任何一个；（两者之中的）各方；（用于否定句表示两者）都不 conj. 或者，要么 adv. 也；而且 adj. （两者中） 任一的；两者择一的</span><br><span class="line">Orchestration :n. 管弦乐编曲；和谐的结合</span><br><span class="line">Whoever :pron. 无论谁；任何人 n. 《爱谁谁》（电影名）</span><br><span class="line">expected :adj. 预期的；预料的</span><br><span class="line">unused :v. 预期；盼望（expect的过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>  The container spawning entity (either directly <span class="keyword">or</span> through <span class="keyword">the</span> CMS that manages <span class="keyword">the</span> underlying infrastructure) updates <span class="keyword">the</span> OVN Northbound database <span class="built_in">to</span> <span class="built_in">include</span> <span class="keyword">the</span> <span class="built_in">new</span>  CIF,  <span class="keyword">by</span> adding  <span class="keyword">a</span>  row <span class="built_in">to</span> <span class="keyword">the</span> Logical_Switch_Port table. In <span class="keyword">the</span> <span class="built_in">new</span> row, name is <span class="keyword">any</span> unique identifier, parent_name is <span class="keyword">the</span> vif-id <span class="keyword">of</span> <span class="keyword">the</span> VM through which <span class="keyword">the</span> CIF’s network traffic is expected <span class="built_in">to</span> go through <span class="keyword">and</span> <span class="keyword">the</span> tag is <span class="keyword">the</span> VLAN tag that identifies <span class="keyword">the</span> network traffic <span class="keyword">of</span> that CIF.</span><br><span class="line">underlying :adj. 潜在的；根本的；在下面的；优先的 v. 放在…的下面；为…的基础；优先于（underlie的ing形式）</span><br><span class="line">infrastructure:n. 基础设施；公共建设；下部构造</span><br><span class="line">unique :adj. 独特的，稀罕的；[数] 唯一的，独一无二的 n. 独一无二的人或物</span><br><span class="line">identifier:n. 标识符，认同者；检验人，鉴定人</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>  ovn-northd receives the OVN Northbound <span class="keyword">database</span> <span class="keyword">update</span>. <span class="keyword">In</span> turn, it makes the corresponding updates <span class="keyword">to</span> the OVN Southbound <span class="keyword">database</span>, <span class="keyword">by</span> adding <span class="keyword">rows</span> <span class="keyword">to</span> the OVN </span><br><span class="line">Southbound <span class="keyword">database</span>’s  Logical_Flow  <span class="keyword">table</span>  <span class="keyword">to</span>  reflect the <span class="built_in">new</span> port <span class="keyword">and</span> <span class="keyword">also</span> <span class="keyword">by</span> creating a <span class="built_in">new</span> <span class="keyword">row</span> <span class="keyword">in</span> the Binding <span class="keyword">table</span> <span class="keyword">and</span> populating <span class="keyword">all</span> its <span class="keyword">columns</span> <span class="keyword">except</span> the </span><br><span class="line"><span class="keyword">column</span> that identifies the chassis.</span><br><span class="line">corresponding :adj. 相当的，相应的；一致的；通信的 v. 类似（correspond的ing形式）；相配</span><br><span class="line">reflect : vt. 反映；反射，照出；表达；显示；反省 vi. 反射，映现；深思</span><br><span class="line">populating :v. 居住于…中；构成…的人口；占据（populate的ing形式）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4.</span>  On every hypervisor, ovn-controller subscribes <span class="built_in">to</span> <span class="keyword">the</span> changes <span class="keyword">in</span> <span class="keyword">the</span> Binding table. When <span class="keyword">a</span> <span class="built_in">new</span> row is created <span class="keyword">by</span> ovn-northd that includes <span class="keyword">a</span> <span class="built_in">value</span>  <span class="keyword">in</span>  </span><br><span class="line">parent_port  column  <span class="keyword">of</span>  Binding  table,  <span class="keyword">the</span> ovn-controller <span class="keyword">in</span> <span class="keyword">the</span> hypervisor whose OVN integration bridge has that same <span class="built_in">value</span> <span class="keyword">in</span> vif-id <span class="keyword">in</span> external_ids:iface-id </span><br><span class="line">updates <span class="keyword">the</span> <span class="built_in">local</span> hypervisor’s OpenFlow tables so that packets <span class="built_in">to</span> <span class="keyword">and</span> <span class="built_in">from</span> <span class="keyword">the</span> VIF <span class="keyword">with</span> <span class="keyword">the</span> particular VLAN tag are properly handled. Afterward <span class="keyword">it</span> updates <span class="keyword">the</span> </span><br><span class="line">chassis column <span class="keyword">of</span> <span class="keyword">the</span> Binding <span class="built_in">to</span> reflect <span class="keyword">the</span> physical location.</span><br><span class="line">subscribes :订阅</span><br><span class="line">particular :adj. 特别的；详细的；独有的；挑剔的 n. 详细说明；个别项目</span><br><span class="line">properly :adv. 适当地；正确地；恰当地</span><br><span class="line">handled:adj. 有把手的，有把柄的 v. 使用；负责；触摸；指挥；买；卖（handle 的过去式和过去分词）</span><br><span class="line">Afterward :adv. 以后，后来</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5.</span>  One can <span class="keyword">only</span> <span class="keyword">start</span> the application inside the container <span class="keyword">after</span> the underlying network <span class="keyword">is</span> ready. <span class="keyword">To</span> support this, ovn-northd notices the updated chassis <span class="keyword">column</span> <span class="keyword">in</span> Binding <span class="keyword">table</span> <span class="keyword">and</span> updates the up <span class="keyword">column</span> <span class="keyword">in</span> the OVN Northbound <span class="keyword">database</span>’s Logical_Switch_Port <span class="keyword">table</span> <span class="keyword">to</span> indicate that the CIF <span class="keyword">is</span> now up. The entity responsible <span class="keyword">to</span> </span><br><span class="line"><span class="keyword">start</span> the container  application queries this <span class="keyword">value</span> <span class="keyword">and</span> starts the application.</span><br><span class="line">notices :n. 条款；启事；通知函（<span class="keyword">notice</span>的复数） v. 注意；通知（<span class="keyword">notice</span>的三单形式）</span><br><span class="line">indicate :vt. 表明；指出；预示；象征</span><br><span class="line">responsible :adj. 负责的，可靠的；有责任的</span><br><span class="line">queries :n. 问题；怀疑；问号（query的复数形式）v. [计] 查询（query的第三人称单数形式）；询问；质询</span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6.</span>  Eventually <span class="keyword">the</span> entity <span class="keyword">that</span> created <span class="keyword">and</span> started <span class="keyword">the</span> container, stops <span class="keyword">it</span>. The entity, <span class="keyword">through</span> <span class="keyword">the</span> CMS (<span class="keyword">or</span> directly) deletes <span class="keyword">its</span> row <span class="keyword">in</span> <span class="keyword">the</span> Logical_Switch_Port </span><br><span class="line">table.</span><br><span class="line">Eventually :adv. 最后，终于</span><br><span class="line"><span class="keyword">through</span> :prep. 穿过，从一端到另一端；断开，洞穿；穿行；越过；透过……看到；隔着……听到；一直到底； 自始至终；从头到尾检查；通过（障碍、阶段或测试）；直至；经由；凭借 adv. 从一端到另一端；通过；从头至尾；通过； 直达；径直；（电话）接通着；彻底 adj. 直达的；联运的，全程的；直通的；贯穿的，过境的；对穿的，双向的；与楼两对面通透的；进入下一轮的；完结的；（使用）完成，结束；（关系）了结，断绝</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">7.</span>  ovn-northd  receives  the OVN Northbound <span class="keyword">update</span> <span class="keyword">and</span> <span class="keyword">in</span> turn updates the OVN Southbound <span class="keyword">database</span> accordingly, <span class="keyword">by</span> removing <span class="keyword">or</span> updating the <span class="keyword">rows</span> <span class="keyword">from</span> the OVN </span><br><span class="line">Southbound <span class="keyword">database</span> Logical_Flow <span class="keyword">table</span> that were related <span class="keyword">to</span> the now-destroyed CIF. It <span class="keyword">also</span> deletes the <span class="keyword">row</span> <span class="keyword">in</span> the Binding <span class="keyword">table</span> <span class="keyword">for</span> that CIF.</span><br><span class="line">accordingly:adv. 因此，于是；相应地；照着</span><br><span class="line">related :adj. 有关系的，有关联的；讲述的，叙述的 v. 叙述（relate过去式）</span><br><span class="line">now-destroyed:即时摧毁</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8.</span>  <span class="keyword">On</span> every hypervisor, ovn-controller receives the Logical_Flow <span class="keyword">table</span> updates that ovn-northd made <span class="keyword">in</span> the previous step. ovn-controller updates OpenFlow <span class="keyword">tables</span> </span><br><span class="line"><span class="keyword">to</span>  reflect  the <span class="keyword">update</span>.</span><br><span class="line">previous :adj. 以前的；早先的；过早的 adv. 在先；在…以前</span><br><span class="line">reflect  :vt. 反映；反射，照出；表达；显示；反省 vi. 反射，映现；深思</span><br></pre></td></tr></table></figure>

<h2 id="architectural-physical-life-cycle-of-a-packet"><a href="#architectural-physical-life-cycle-of-a-packet" class="headerlink" title="architectural physical life cycle of a packet"></a>architectural physical life cycle of a packet</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">This  <span class="selector-tag">section</span> describes how <span class="selector-tag">a</span> packet travels <span class="selector-tag">from</span> one virtual machine or container <span class="selector-tag">to</span> another through OVN. This description focuses on the physical treatment of <span class="selector-tag">a</span> </span><br><span class="line">packet; for <span class="selector-tag">a</span> description of the logical life cycle of <span class="selector-tag">a</span> packet, please refer <span class="selector-tag">to</span> the Logical_Flow <span class="selector-tag">table</span> in ovn-sb(<span class="number">5</span>).</span><br><span class="line">architectural ：adj. 建筑学的；建筑上的；符合建筑法的</span><br><span class="line"><span class="selector-tag">section</span>：n. 截面；部分；部门；地区；章节 vi. 被切割成片；被分成部分 vt. 把…分段；将…切片；对…进行划分</span><br><span class="line">travels ：n. 旅途；旅行笔记 v. 旅行（travel的第三人称单数形式）</span><br><span class="line">focuses ：n. 重点（focus的复数）；焦点  v. 集中（focus的三单形式）；使聚焦；调节焦距</span><br><span class="line">treatment ：n. 治疗，疗法；处理；对待</span><br><span class="line">refer ：vi. 参考；涉及；提到；查阅 vt. 涉及；委托；归诸于；使…求助于</span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">This</span> <span class="string">section mentions several data and metadata fields, for clarity summarized here:</span></span><br><span class="line"><span class="attr">mention</span> :<span class="string">vt. 提到，谈到；提及，论及；说起 n. 提及，说起 n. (Mention)人名；(法)芒雄</span></span><br><span class="line"><span class="attr">metadata</span> :<span class="string">n. 元数据，诠释数据</span></span><br><span class="line"><span class="attr">fields</span>:<span class="string">n. 域，字段；场设置（field复数形式） v. 使上场（field的单三形式）</span></span><br><span class="line"><span class="attr">clarity</span> :<span class="string">n. 清楚，明晰；透明</span></span><br><span class="line"><span class="attr">summarized</span> :<span class="string">v. 总结，概括；概述（summarize的过去式及过去分词形式）</span></span><br></pre></td></tr></table></figure>

<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">tunnel <span class="keyword">key</span></span><br><span class="line">       <span class="keyword">When</span> OVN encapsulates a packet <span class="keyword">in</span> Geneve <span class="built_in">or</span> another tunnel, it attaches extra data <span class="keyword">to</span> it <span class="keyword">to</span> allow the receiving OVN instance <span class="keyword">to</span> process it correctly. This </span><br><span class="line">takes  different forms depending <span class="keyword">on</span> the particular encapsulation, but <span class="keyword">in</span> <span class="keyword">each</span> <span class="keyword">case</span> we refer <span class="keyword">to</span> it here <span class="keyword">as</span> the ``tunnel <span class="keyword">key</span>.’’ See Tunnel Encapsulations, below, <span class="keyword">for</span> </span><br><span class="line">details.</span><br><span class="line">tunnel :n. 隧道；坑道；洞穴通道 vt. 挖；在…打开通道；在…挖掘隧道 vi. 挖掘隧道；打开通道</span><br><span class="line">encapsulates :</span><br><span class="line">attaches :n. 连接物；附属品；附件（attach的复数）  v. 附加；系上；使归属（attach的单三形式）</span><br><span class="line">extra :adj. 额外的；另外收费的；特大的 n. 额外的事物；另外收费的事物；临时演员；（报纸的）号外；上等产品；（非击球所得的）附加分 adv. 额外；特别地，格外地</span><br><span class="line">forms :n. 表格（form的复数形式）；表单；窗体  v. 形成（form的第三人称单数）；培养；制作</span><br><span class="line">particular :adj. 特别的；详细的；独有的；挑剔的 n. 详细说明；个别项目</span><br><span class="line"><span class="symbol">encapsulation:</span>n. 封装；包装</span><br><span class="line">refer :vi. 参考；涉及；提到；查阅 vt. 涉及；委托；归诸于；使…求助于</span><br><span class="line"><span class="symbol">details:</span>n. 细节（detail 的复数）；详细资料 v. 详细说明（detail 的第三人称单数）</span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">logical datapath field</span><br><span class="line">       A  field  <span class="keyword">that</span> denotes <span class="keyword">the</span> logical datapath <span class="keyword">through</span> which a packet <span class="keyword">is</span> being processed. OVN uses <span class="keyword">the</span> field <span class="keyword">that</span> OpenFlow <span class="number">1.1</span>+ simply (<span class="keyword">and</span> confusingly) calls ``metadata’’ <span class="keyword">to</span> store <span class="keyword">the</span> logical datapath. (This field <span class="keyword">is</span> passed across tunnels <span class="keyword">as</span> part <span class="keyword">of</span> <span class="keyword">the</span> tunnel key.)</span><br><span class="line">denotes :为...的符号，表示，指示（denote的第三人称单数）</span><br><span class="line">confusingly:难懂地 令人迷惑不解地</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">logical input port field</span><br><span class="line">       A field that denotes <span class="keyword">the</span> logical port <span class="built_in">from</span> which <span class="keyword">the</span> packet entered <span class="keyword">the</span> logical datapath. OVN stores this <span class="keyword">in</span> Open vSwitch <span class="built_in">extension</span> register <span class="built_in">number</span> <span class="number">14.</span></span><br><span class="line">       Geneve <span class="keyword">and</span> STT tunnels pass this field <span class="keyword">as</span> part <span class="keyword">of</span> <span class="keyword">the</span> tunnel key. Although VXLAN tunnels <span class="built_in">do</span> <span class="keyword">not</span> explicitly carry <span class="keyword">a</span> logical input port, OVN only uses VXLAN  <span class="built_in">to</span>  communicate <span class="keyword">with</span> gateways that <span class="built_in">from</span> OVN’s perspective consist <span class="keyword">of</span> only <span class="keyword">a</span> single logical port, so that OVN can <span class="built_in">set</span> <span class="keyword">the</span> logical input port field <span class="built_in">to</span> this <span class="literal">one</span> <span class="keyword">on</span> <span class="title">ingress</span> <span class="title">to</span> <span class="title">the</span> <span class="title">OVN</span> <span class="title">logical</span> <span class="title">pipeline</span>.</span><br><span class="line"><span class="built_in">extension</span> :n. 拓展；延伸；接发；（医学）牵引；（计算机）拓展名；（逻辑）外延</span><br><span class="line">register :n. 登记表；声区；语体风格；调风口；现金收入记录机；学校点名册；（老师对学生的）点名登记；登记员；登记注册；套准 v. 登记；（旅馆）登记住宿；挂号邮寄；表达（意见或情感）；显示（读数）</span><br><span class="line">Although :conj. 尽管，虽然；但是，然而</span><br><span class="line">explicitly :adv. 明确地；明白地</span><br><span class="line">carry :vt. 拿，扛；携带；支持；搬运 vi. 能达到；被携带；被搬运 n. 运载；[计] 进位；射程</span><br><span class="line">communicate :vi. 通讯，传达；相通；交流；感染 vt. 传达；感染；显露</span><br><span class="line">perspective :n. 观点；远景；透视图 adj. 透视的</span><br><span class="line">consist :vi. 由…组成；在于；符合</span><br><span class="line">ingress :n. 进入；入口；准许进入；入境</span><br><span class="line">pipeline:n. 管道；输油管；传递途径</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">logical output port field</span><br><span class="line">       A field that denotes <span class="keyword">the</span> logical port <span class="built_in">from</span> which <span class="keyword">the</span> packet will leave <span class="keyword">the</span> logical datapath. This is initialized <span class="built_in">to</span> <span class="number">0</span> <span class="keyword">at</span> <span class="keyword">the</span> beginning <span class="keyword">of</span> <span class="keyword">the</span> logical ingress pipeline. OVN stores this <span class="keyword">in</span> Open vSwitch <span class="built_in">extension</span> register <span class="built_in">number</span> <span class="number">15.</span></span><br><span class="line">       Geneve  <span class="keyword">and</span>  STT tunnels pass this field <span class="keyword">as</span> part <span class="keyword">of</span> <span class="keyword">the</span> tunnel key. VXLAN tunnels <span class="built_in">do</span> <span class="keyword">not</span> transmit <span class="keyword">the</span> logical output port field. Since VXLAN tunnels <span class="built_in">do</span> <span class="keyword">not</span> </span><br><span class="line">carry <span class="keyword">a</span> logical output port field <span class="keyword">in</span> <span class="keyword">the</span> tunnel key, when <span class="keyword">a</span> packet is received <span class="built_in">from</span> VXLAN tunnel <span class="keyword">by</span> <span class="keyword">an</span> OVN hypervisor, <span class="keyword">the</span> packet is  resubmitted  <span class="built_in">to</span>  table  <span class="number">8</span>  <span class="built_in">to</span>  determine  <span class="keyword">the</span>  output port(s); when <span class="keyword">the</span> packet reaches table <span class="number">32</span>, these packets are resubmitted <span class="built_in">to</span> table <span class="number">33</span> <span class="keyword">for</span> <span class="built_in">local</span> delivery <span class="keyword">by</span> checking <span class="keyword">a</span> MLF_RCV_FROM_VXLAN flag, which is <span class="built_in">set</span> when <span class="keyword">the</span> packet arrives <span class="built_in">from</span> <span class="keyword">a</span> VXLAN tunnel.</span><br><span class="line">initialized :v. （使）初始化；预置传授；（常通过特殊仪式）（使）加入（initialize 的过去式和过去分词）</span><br><span class="line">transmit :vt. 传输；传播；发射；传达；遗传 vi. 传输；发射信号</span><br><span class="line">Since :prep. 自……以后；（表示气愤）何曾 conj. 自……以来；因为  adv. 自……以后；此后；之前</span><br><span class="line">resubmitted  :v. 再次提交，重新递交（resubmit 的过去式和过去分词）</span><br><span class="line">determine  :v. （使）下决心，（使）做出决定 vt. 决定，确定；判定，判决；限定 vi. 确定；决定；判决，终止；[主用于法律]了结，终止，结束</span><br><span class="line">reaches :n. 河段；流域；边远地区；层  v. 伸出；到达（reach第三人称单数）</span><br><span class="line">delivery :n. [贸易] 交付；分娩；递送</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">conntrack <span class="type">zone</span> field <span class="keyword">for</span> logical ports</span><br><span class="line">       A field that denotes the <span class="keyword">connection</span> tracking <span class="type">zone</span> <span class="keyword">for</span> logical ports. The <span class="keyword">value</span> <span class="keyword">only</span> has <span class="keyword">local</span> significance <span class="keyword">and</span> <span class="keyword">is</span> <span class="keyword">not</span> meaningful <span class="keyword">between</span> chassis. This <span class="keyword">is</span> </span><br><span class="line">initialized <span class="keyword">to</span>  <span class="number">0</span> at the beginning <span class="keyword">of</span> the logical ingress pipeline. OVN stores this <span class="keyword">in</span> <span class="keyword">Open</span> vSwitch <span class="keyword">extension</span> register number <span class="number">13.</span></span><br><span class="line">conntrack :连接跟踪模块</span><br><span class="line">significance :n. 意义；重要性；意思</span><br><span class="line">meaningful :adj. 有意义的；意味深长的</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conntrack <span class="type">zone</span> fields <span class="keyword">for</span> routers</span><br><span class="line">       Fields  that denote the <span class="keyword">connection</span> tracking zones <span class="keyword">for</span> routers. These <span class="keyword">values</span> <span class="keyword">only</span> have <span class="keyword">local</span> significance <span class="keyword">and</span> are <span class="keyword">not</span> meaningful <span class="keyword">between</span> chassis. OVN stores the <span class="type">zone</span> information <span class="keyword">for</span> DNATting <span class="keyword">in</span> <span class="keyword">Open</span> vSwitch <span class="keyword">extension</span> register number <span class="number">11</span> <span class="keyword">and</span> <span class="type">zone</span> information <span class="keyword">for</span> SNATing <span class="keyword">in</span> <span class="keyword">Open</span> vSwitch <span class="keyword">extension</span> register number <span class="number">12.</span></span><br><span class="line">DNATting :dnat转换</span><br><span class="line">SNATing ：snat转换</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">logical flow flags</span><br><span class="line">       The logical flags are intended <span class="keyword">to</span> handle keeping context <span class="keyword">between</span> <span class="keyword">tables</span> <span class="keyword">in</span> <span class="keyword">order</span> <span class="keyword">to</span> decide which rules <span class="keyword">in</span> subsequent <span class="keyword">tables</span> are matched. These <span class="keyword">values</span> <span class="keyword">only</span> </span><br><span class="line">have <span class="keyword">local</span>  significance <span class="keyword">and</span> are <span class="keyword">not</span> meaningful <span class="keyword">between</span> chassis. OVN stores the logical flags <span class="keyword">in</span> <span class="keyword">Open</span> vSwitch <span class="keyword">extension</span> register number <span class="number">10.</span></span><br><span class="line">intend ：vt. 打算；想要；意指 vi. 有打算</span><br><span class="line">context ：n. 环境；上下文；来龙去脉</span><br><span class="line">subsequent：adj. 随后的</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">VLAN ID</span><br><span class="line">       The VLAN ID <span class="keyword">is</span> used <span class="keyword">as</span> an <span class="class"><span class="keyword">interface</span> <span class="title">between</span> <span class="title">OVN</span> <span class="title">and</span> <span class="title">containers</span> <span class="title">nested</span> <span class="title">inside</span> <span class="title">a</span> <span class="title">VM</span> </span>(see Life Cycle of a container <span class="class"><span class="keyword">interface</span> <span class="title">inside</span> <span class="title">a</span> <span class="title">VM</span>, <span class="type">above</span>, <span class="type">for more information).</span></span></span><br><span class="line">nested ：adj. 嵌套的，内装的 v. 筑巢；嵌入（nest的过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Initially, <span class="selector-tag">a</span> VM or container on the ingress hypervisor sends <span class="selector-tag">a</span> packet on <span class="selector-tag">a</span> port attached <span class="selector-tag">to</span> the OVN integration bridge. Then:</span><br><span class="line">Initially:adv. 最初，首先；开头</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  OpenFlow <span class="keyword">table</span> <span class="number">0</span> performs physical-<span class="keyword">to</span>-logical translation. It matches the packet’s ingress port. Its actions annotate the packet <span class="keyword">with</span> logical metadata,</span><br><span class="line">    <span class="keyword">by</span>  setting  the logical datapath field <span class="keyword">to</span> identify the logical datapath that the packet <span class="keyword">is</span> traversing <span class="keyword">and</span> the logical <span class="keyword">input</span> port field <span class="keyword">to</span> identify the</span><br><span class="line">    ingress port. <span class="keyword">Then</span> it resubmits <span class="keyword">to</span> <span class="keyword">table</span> <span class="number">8</span> <span class="keyword">to</span> enter the logical ingress pipeline.</span><br><span class="line">performs :v. 执行；表演（<span class="keyword">perform</span>的第三人称单数形式）</span><br><span class="line">matches :n. 比赛（match的复数）；火柴 v. 匹配（match的第三人称单数形式）；匹敌</span><br><span class="line">annotate :vi. 注释；给…作注释或评注 vt. 注释；作注解</span><br><span class="line">identify :vt. 确定；鉴定；识别，辨认出；使参与；把……看成一样 vi. 确定；认同；一致</span><br><span class="line">traversing :n. 穿越，通过  v. 穿过（traverse的ing形式）；横越</span><br><span class="line"></span><br><span class="line">    Packets that originate <span class="keyword">from</span> a container nested <span class="keyword">within</span> a VM are treated <span class="keyword">in</span> a slightly different way. The  originating  container  can  be  distinguished</span><br><span class="line">    based  <span class="keyword">on</span>  the  VIF-specific VLAN ID, so the physical-<span class="keyword">to</span>-logical translation flows additionally match <span class="keyword">on</span> VLAN ID <span class="keyword">and</span> the actions strip the VLAN <span class="keyword">header</span>.</span><br><span class="line">    <span class="keyword">Following</span> this step, OVN treats packets <span class="keyword">from</span> containers just <span class="keyword">like</span> <span class="keyword">any</span> other packets.</span><br><span class="line">originate :vt. 引起；创作 vi. 发源；发生；起航</span><br><span class="line">treated :v. 治疗；对待；招待；处理（treat 的过去式和过去分词） adj. 治疗的；已处理过的</span><br><span class="line">slightly :adv. 些微地，轻微地；纤细地</span><br><span class="line">originating  :v. 起源；创立（originate 的现在分词）</span><br><span class="line">distinguished:adj. 卓越的，著名的；高贵的，受尊重的 v. 辨别；使有区别；看清，认出（distinguish 的过去式和过去分词）</span><br><span class="line">additionally :adv. 此外；又，加之</span><br><span class="line">strip :v. 脱去衣服；进行脱衣表演；剥去（外皮）；从（某处）拿走所有东西；拆卸；剥夺；修剪（树枝）；（用溶剂）去除（漆）；去掉（烟叶的）梗茎；（为奶牛）收奶；除去（机器、汽车等的）附属装置；拆卸（以进行检修或校正）；剥夺（地位、权力或财产）；（为利润）出售（公司资产）；分离（债券的）息票使二者分开出售；磨掉（螺丝的）螺纹；折断（齿轮的）齿；（螺丝）螺纹损坏；（齿轮）齿折断；（子弹出膛时因膛面磨损而）不旋转 n. （纸、金属、织物等）带，条状物；脱衣舞；（陆地、海域等）狭长地带；队服；商业街；连环画；飞机跑道</span><br><span class="line">treats :n. 宴飨，款待（treat的复数形式） v. 对待，处理；治疗（treat的三单形式）</span><br><span class="line"></span><br><span class="line">    <span class="keyword">Table</span> <span class="number">0</span> <span class="keyword">also</span> processes packets that arrive <span class="keyword">from</span> other chassis. It distinguishes them <span class="keyword">from</span> other packets <span class="keyword">by</span> ingress port, which <span class="keyword">is</span>  a  tunnel.  <span class="keyword">As</span>  <span class="keyword">with</span></span><br><span class="line">    packets  just  entering  the OVN pipeline, the actions annotate these packets <span class="keyword">with</span> logical datapath <span class="keyword">and</span> logical ingress port metadata. <span class="keyword">In</span> addition, the</span><br><span class="line">    actions <span class="keyword">set</span> the logical output port field, which <span class="keyword">is</span> available because <span class="keyword">in</span> OVN tunneling occurs <span class="keyword">after</span> the logical  output  port  <span class="keyword">is</span>  known.  These  three</span><br><span class="line">    pieces  <span class="keyword">of</span>  information are obtained <span class="keyword">from</span> the tunnel encapsulation metadata (see Tunnel Encapsulations <span class="keyword">for</span> <span class="keyword">encoding</span> details). <span class="keyword">Then</span> the actions resubmit</span><br><span class="line">    <span class="keyword">to</span> <span class="keyword">table</span> <span class="number">33</span> <span class="keyword">to</span> enter the logical egress pipeline.</span><br><span class="line">distinguishes :vt. 区分；辨别；使杰出，使表现突出 vi. 区别，区分；辨别</span><br><span class="line">addition:n. 添加；[数] 加法；增加物</span><br><span class="line">pieces:n. （从某物上拆下、撕下或切下的）块，片，段；部件；表示某种事物的个体（与不可数名词搭配）；文章；作品 （piece 的复数形式）</span><br><span class="line">obtained :v. 获得（obtain的过去分词）</span><br><span class="line">encapsulation :n. 封装；包装</span><br><span class="line"><span class="keyword">encoding</span> :n. [计] 编码 v. [计] 编码（encode的ing形式）</span><br><span class="line">details:n. 细节（detail 的复数）；详细资料 v. 详细说明（detail 的第三人称单数）</span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>  OpenFlow tables <span class="number">8</span> <span class="keyword">through</span> <span class="number">31</span> execute <span class="keyword">the</span> logical ingress pipeline <span class="keyword">from</span> <span class="keyword">the</span> Logical_Flow  table  <span class="keyword">in</span>  <span class="keyword">the</span>  OVN  Southbound  database.  These  tables  are</span><br><span class="line">    expressed  entirely <span class="keyword">in</span> terms <span class="keyword">of</span> logical concepts like logical ports <span class="keyword">and</span> logical datapaths. A big part <span class="keyword">of</span> ovn-controller’s job <span class="keyword">is</span> <span class="keyword">to</span> translate them <span class="keyword">into</span></span><br><span class="line">    equivalent OpenFlow (<span class="keyword">in</span> particular <span class="keyword">it</span> translates <span class="keyword">the</span> table numbers: Logical_Flow tables <span class="number">0</span> <span class="keyword">through</span> <span class="number">23</span> become OpenFlow tables <span class="number">8</span> <span class="keyword">through</span> <span class="number">31</span>).</span><br><span class="line">execute :vt. 实行；执行；处死</span><br><span class="line">expressed  :v. 表达( express的过去式和过去分词 )；（用符号等）表示；榨；（如在说话、写作或绘画中）表达（自己）的意见</span><br><span class="line">entirely :adv. 完全地，彻底地</span><br><span class="line"><span class="keyword">in</span> terms <span class="keyword">of</span>:依据；按照；在…方面；以…措词</span><br><span class="line">concepts :n. 概念，观念；思想（concept复数形式）</span><br><span class="line">equivalent :adj. （在价值、数量等方面）相等的；等价的；等效的；等量的；同意义的 n. 对等的人（或事物）；当量</span><br><span class="line">particular :adj. 特别的；详细的；独有的；挑剔的 n. 详细说明；个别项目</span><br><span class="line">become :vi. 成为；变得；变成 vt. 适合；相称</span><br><span class="line"></span><br><span class="line">    Each logical flow maps <span class="keyword">to</span> one <span class="keyword">or</span> more OpenFlow flows. An actual packet ordinarily matches only one <span class="keyword">of</span> these, although <span class="keyword">in</span> <span class="keyword">some</span> cases <span class="keyword">it</span> can  match  more</span><br><span class="line">    than one <span class="keyword">of</span> these flows (which <span class="keyword">is</span> <span class="keyword">not</span> a problem because all <span class="keyword">of</span> them have <span class="keyword">the</span> same actions). ovn-controller uses <span class="keyword">the</span> <span class="keyword">first</span> <span class="number">32</span> bits <span class="keyword">of</span> <span class="keyword">the</span> logical flow’s</span><br><span class="line">    UUID <span class="keyword">as</span> <span class="keyword">the</span> cookie <span class="keyword">for</span> <span class="keyword">its</span> OpenFlow flow <span class="keyword">or</span> flows. (This <span class="keyword">is</span> <span class="keyword">not</span> necessarily unique, <span class="keyword">since</span> <span class="keyword">the</span> <span class="keyword">first</span> <span class="number">32</span> bits <span class="keyword">of</span> a logical flow’s UUID <span class="keyword">is</span> <span class="keyword">not</span> necessarily</span><br><span class="line">    unique.)</span><br><span class="line">actual :adj. 真实的，实际的；现行的，目前的</span><br><span class="line">ordinarily:adv. 通常地；一般地</span><br><span class="line">although :conj. 尽管，虽然；但是，然而</span><br><span class="line">necessarily :adv. 必要地；必定地，必然地</span><br><span class="line">unique:adj. 独特的，稀罕的；[数] 唯一的，独一无二的 n. 独一无二的人或物</span><br><span class="line"></span><br><span class="line">    Some  logical  flows  can  map <span class="keyword">to</span> <span class="keyword">the</span> Open vSwitch ``conjunctive match’’ extension (see ovs-fields(<span class="number">7</span>)). Flows <span class="keyword">with</span> a conjunction action use an OpenFlow</span><br><span class="line">    cookie <span class="keyword">of</span> <span class="number">0</span>, because they can correspond <span class="keyword">to</span> multiple logical flows. The OpenFlow flow <span class="keyword">for</span> a conjunctive match includes a match <span class="keyword">on</span> conj_id.</span><br><span class="line">conjunctive:adj. 连接的；结合的 n. 连接词</span><br><span class="line">extension :n. 拓展；延伸；接发；（医学）牵引；（计算机）拓展名；（逻辑）外延</span><br><span class="line">correspond :vi. 符合，一致；相应；通信</span><br><span class="line"></span><br><span class="line">    Some logical flows may <span class="keyword">not</span> be represented <span class="keyword">in</span> <span class="keyword">the</span> OpenFlow tables <span class="keyword">on</span> a <span class="keyword">given</span> hypervisor, <span class="keyword">if</span> they could <span class="keyword">not</span> be used <span class="keyword">on</span> <span class="keyword">that</span> hypervisor. For  example,  <span class="keyword">if</span></span><br><span class="line">    no  VIF  <span class="keyword">in</span> a logical switch resides <span class="keyword">on</span> a <span class="keyword">given</span> hypervisor, <span class="keyword">and</span> <span class="keyword">the</span> logical switch <span class="keyword">is</span> <span class="keyword">not</span> otherwise reachable <span class="keyword">on</span> <span class="keyword">that</span> hypervisor (e.g. <span class="keyword">over</span> a series <span class="keyword">of</span></span><br><span class="line">    hops <span class="keyword">through</span> logical switches <span class="keyword">and</span> routers starting <span class="keyword">from</span> a VIF <span class="keyword">on</span> <span class="keyword">the</span> hypervisor), <span class="keyword">then</span> <span class="keyword">the</span> logical flow may <span class="keyword">not</span> be represented there.</span><br><span class="line">represented :v. 代表；表现；描写（represent 的过去式和过去分词）</span><br><span class="line">reside :vi. 住，居住；属于</span><br><span class="line">otherwise :adv. 否则；另外；在其他方面  adj. 另外的；其他方面的；原本，本来  conj. 其他；如果不；然后</span><br><span class="line">reachable :adj. 可获得的；可达成的</span><br><span class="line">e.g.:abbr. 例如 (<span class="keyword">for</span> example)</span><br><span class="line">series :n. 系列，连续；[电] 串联；级数；丛书 </span><br><span class="line">hop:v. 单足跳行；双足或齐足跳行；突然快速去某处；（非正式）作快速旅行；（非正式）快速离开；（快速改变方位等）跳到……；跳过；登上……；换来换去；（非正式）跳上（开动的车辆）；速递；用啤酒花调味 n. 单足短距离跳跃；双足短距离跳跃；短途旅行；啤酒花；（非正式）舞会；霍普舞；（非正式）啤酒；毒品（尤指鸦片）</span><br><span class="line"></span><br><span class="line">    Most OVN actions have fairly obvious implementations <span class="keyword">in</span> OpenFlow (<span class="keyword">with</span> OVS extensions), e.g. next; <span class="keyword">is</span> implemented <span class="keyword">as</span> resubmit,  field  =  <span class="built_in">constant</span>;  <span class="keyword">as</span></span><br><span class="line">    set_field. A few are worth describing <span class="keyword">in</span> more detail:</span><br><span class="line">fairly :adv. 相当地；公平地；简直  n. (Fairly)人名；(英)费尔利</span><br><span class="line">obvious :adj. 明显的；显著的；平淡无奇的</span><br><span class="line">implementation :n. [计] 实现；履行；安装启用</span><br><span class="line">implemented :v. 实施（implement的过去分词形式）；执行 adj. 应用的</span><br><span class="line"><span class="built_in">constant</span>:adj. 不变的；恒定的；经常的 n. [数] 常数；恒量</span><br><span class="line">worth :adj. 值…的 n. 价值；财产</span><br><span class="line">describing :v. 描述；表示（describe的ing形式） adj. 描述的</span><br><span class="line">detail:n. 细节，琐事；具体信息；次要部分；分队，支队 vt. 详述；选派 vi. 画详图</span><br><span class="line"></span><br><span class="line">    output:</span><br><span class="line">           Implemented  <span class="keyword">by</span> resubmitting <span class="keyword">the</span> packet <span class="keyword">to</span> table <span class="number">32.</span> If <span class="keyword">the</span> pipeline executes more than one output action, <span class="keyword">then</span> each one <span class="keyword">is</span> separately </span><br><span class="line">           resubmitted <span class="keyword">to</span> table <span class="number">32.</span> This can be used <span class="keyword">to</span> send multiple copies <span class="keyword">of</span> <span class="keyword">the</span> packet <span class="keyword">to</span> multiple ports. (If <span class="keyword">the</span> packet was <span class="keyword">not</span> modified  <span class="keyword">between</span>  <span class="keyword">the</span>  output</span><br><span class="line">           actions,  <span class="keyword">and</span>  <span class="keyword">some</span>  <span class="keyword">of</span>  <span class="keyword">the</span> copies are destined <span class="keyword">to</span> <span class="keyword">the</span> same hypervisor, <span class="keyword">then</span> using a logical multicast output port would save bandwidth <span class="keyword">between</span></span><br><span class="line">           hypervisors.)</span><br><span class="line">Implemented  :v. 实施（implement的过去分词形式）；执行 adj. 应用的</span><br><span class="line">separately :adv. 分别地；分离地；个别地</span><br><span class="line">multiple:adj. 多重的；多样的；许多的 n. 倍数；[电] 并联</span><br><span class="line">destined:adj. 注定的；命定的；去往…的 v. 注定（destine的过去式和过去分词）</span><br><span class="line">multicast :v. （在网络上）多播（数据） n. 多路广播；多路传送</span><br><span class="line">bandwidth :n. [电子][物] 带宽；[通信] 频带宽度</span><br><span class="line"></span><br><span class="line">    get_arp(P, A);</span><br><span class="line">    get_nd(P, A);</span><br><span class="line">          Implemented <span class="keyword">by</span> storing arguments <span class="keyword">into</span> OpenFlow fields, <span class="keyword">then</span> resubmitting <span class="keyword">to</span> table <span class="number">66</span>, which ovn-controller populates <span class="keyword">with</span> flows generated <span class="keyword">from</span> <span class="keyword">the</span></span><br><span class="line">          MAC_Binding  table  <span class="keyword">in</span> <span class="keyword">the</span> OVN Southbound database. If there <span class="keyword">is</span> a match <span class="keyword">in</span> table <span class="number">66</span>, <span class="keyword">then</span> <span class="keyword">its</span> actions store <span class="keyword">the</span> bound MAC <span class="keyword">in</span> <span class="keyword">the</span> Ethernet </span><br><span class="line">          destination address field.</span><br><span class="line">storing :n. 储存；保管 v. 储存；供应（store的ing形式）adj. 存储的</span><br><span class="line">arguments :n. 参数</span><br><span class="line">populates :居住于</span><br><span class="line">generated :v. 产生；引发；生成（generate 的过去式及过去分词）</span><br><span class="line">bound :adj. 一定会；很可能会；必定的；受约束的，有义务的；因……受阻；被……所限制的；限制在某个场所的；正旅行去，准备去；准备就绪的；装有封面的，装订好的；黏附的；依附性的 v. 跳跃着跑；弹回，弹开；形成……的边界；关，围入；限制，束缚 n. 跳跃；界限，边界；限制，限制范围；界；极限</span><br><span class="line">Ethernet :n. [计] 以太网</span><br><span class="line">          (The OpenFlow actions save <span class="keyword">and</span> restore <span class="keyword">the</span> OpenFlow fields used <span class="keyword">for</span> <span class="keyword">the</span> arguments, so <span class="keyword">that</span> <span class="keyword">the</span> OVN actions do <span class="keyword">not</span> have <span class="keyword">to</span> be aware <span class="keyword">of</span> this  </span><br><span class="line">          temporary use.)</span><br><span class="line">restore :vt. 恢复；修复；归还 vi. 恢复；还原</span><br><span class="line">aware :adj. 意识到的；知道的；有…方面知识的；懂世故的 n. (Aware)人名；(阿拉伯、索)阿瓦雷</span><br><span class="line">temporary :adj. 暂时的，临时的 n. 临时工，临时雇员</span><br><span class="line"></span><br><span class="line">    put_arp(P, A, E);</span><br><span class="line">    put_nd(P, A, E);</span><br><span class="line">          Implemented <span class="keyword">by</span> storing <span class="keyword">the</span> arguments <span class="keyword">into</span> OpenFlow fields, <span class="keyword">then</span> outputting a packet <span class="keyword">to</span> ovn-controller, which updates <span class="keyword">the</span> MAC_Binding table.</span><br><span class="line"></span><br><span class="line">          (The  OpenFlow actions save <span class="keyword">and</span> restore <span class="keyword">the</span> OpenFlow fields used <span class="keyword">for</span> <span class="keyword">the</span> arguments, so <span class="keyword">that</span> <span class="keyword">the</span> OVN actions do <span class="keyword">not</span> have <span class="keyword">to</span> be aware <span class="keyword">of</span> this </span><br><span class="line">          temporary use.)</span><br><span class="line"></span><br><span class="line">    R = lookup_arp(P, A, M);</span><br><span class="line">    R = lookup_nd(P, A, M);</span><br><span class="line">           Implemented <span class="keyword">by</span> storing arguments <span class="keyword">into</span> OpenFlow fields, <span class="keyword">then</span> resubmitting <span class="keyword">to</span> table <span class="number">67</span>, which ovn-controller populates <span class="keyword">with</span> flows generated <span class="keyword">from</span> <span class="keyword">the</span></span><br><span class="line">           MAC_Binding table <span class="keyword">in</span> <span class="keyword">the</span> OVN Southbound database. If there <span class="keyword">is</span> a match <span class="keyword">in</span> table <span class="number">67</span>, <span class="keyword">then</span> <span class="keyword">its</span> actions <span class="keyword">set</span> <span class="keyword">the</span> logical flow flag MLF_LOOKUP_MAC.</span><br><span class="line">actions :n. 行动（action的复数）；动作</span><br><span class="line">           (The  OpenFlow actions save <span class="keyword">and</span> restore <span class="keyword">the</span> OpenFlow fields used <span class="keyword">for</span> <span class="keyword">the</span> arguments, so <span class="keyword">that</span> <span class="keyword">the</span> OVN actions do <span class="keyword">not</span> have <span class="keyword">to</span> be aware <span class="keyword">of</span> this </span><br><span class="line">           temporary use.)</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>  OpenFlow tables <span class="number">32</span> through <span class="number">47</span> implement <span class="keyword">the</span> output action <span class="keyword">in</span> <span class="keyword">the</span> logical ingress pipeline. Specifically, table <span class="number">32</span> handles packets  <span class="built_in">to</span>  remote  </span><br><span class="line">    hypervisors,  table  <span class="number">33</span> handles packets <span class="built_in">to</span> <span class="keyword">the</span> <span class="built_in">local</span> hypervisor, <span class="keyword">and</span> table <span class="number">34</span> checks whether packets whose logical ingress <span class="keyword">and</span> egress port are <span class="keyword">the</span> same should</span><br><span class="line">    be discarded.</span><br><span class="line">implement :vt. 实施，执行；实现，使生效 n. 工具，器具；手段</span><br><span class="line">Specifically:adv. 特别地；明确地</span><br><span class="line">discarded:adj. 丢弃的；废弃的 v. 丢弃（discard的过去分词）</span><br><span class="line"></span><br><span class="line">    Logical patch ports are <span class="keyword">a</span> special <span class="keyword">case</span>. Logical patch ports <span class="built_in">do</span> <span class="keyword">not</span> have <span class="keyword">a</span> physical location <span class="keyword">and</span> effectively reside <span class="keyword">on</span> <span class="title">every</span> <span class="title">hypervisor</span>. <span class="title">Thus</span>, <span class="title">flow</span>  </span><br><span class="line">    table  <span class="number">33</span>,  <span class="keyword">for</span> output <span class="built_in">to</span> ports <span class="keyword">on</span> <span class="title">the</span> <span class="title">local</span> <span class="title">hypervisor</span>, <span class="title">naturally</span> <span class="title">implements</span> <span class="title">output</span> <span class="title">to</span> <span class="title">unicast</span> <span class="title">logical</span> <span class="title">patch</span> <span class="title">ports</span> <span class="title">too</span>. <span class="title">However</span>, <span class="title">applying</span> <span class="title">the</span> <span class="title">same</span> <span class="title">logic</span></span><br><span class="line">    <span class="built_in">to</span> <span class="keyword">a</span> logical patch port that is part <span class="keyword">of</span> <span class="keyword">a</span> logical multicast group yields packet duplication, because <span class="keyword">each</span> hypervisor that <span class="keyword">contains</span> <span class="keyword">a</span>  logical  port  <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">the</span> multicast group will also output <span class="keyword">the</span> packet <span class="built_in">to</span> <span class="keyword">the</span> logical patch port. Thus, multicast groups implement output <span class="built_in">to</span> logical patch ports <span class="keyword">in</span> table <span class="number">32.</span></span><br><span class="line">special :adj. 特别的；重要的；特设的；专用的，特有的；特派的；格外的；（主题）研究深入的；特殊（教育）的；特殊（矩阵）的 n. 特别的东西（活动、节目等）；特价（品）；特供菜；特派员；特产；专车</span><br><span class="line">effectively :adv. 有效地，生效地；有力地；实际上</span><br><span class="line">reside :vi. 住，居住；属于</span><br><span class="line">naturally :adv. 自然地 自然而然地  轻而易举</span><br><span class="line">unicast :n. 单一传播</span><br><span class="line">applying :vt. apply的变形,应用 ,阶段 ,申请, 刷</span><br><span class="line">yields :n. 生产量，投资效益（yield的复数形式） v. [经] 生产；投降，[力] 屈服（yield的三单形式）</span><br><span class="line">duplication:n. 复制；副本；成倍</span><br><span class="line"></span><br><span class="line">    Each  flow <span class="keyword">in</span> table <span class="number">32</span> matches <span class="keyword">on</span> <span class="title">a</span> <span class="title">logical</span> <span class="title">output</span> <span class="title">port</span> <span class="title">for</span> <span class="title">unicast</span> <span class="title">or</span> <span class="title">multicast</span> <span class="title">logical</span> <span class="title">ports</span> <span class="title">that</span> <span class="title">include</span> <span class="title">a</span> <span class="title">logical</span> <span class="title">port</span> <span class="title">on</span> <span class="title">a</span> <span class="title">remote</span> <span class="title">hypervisor</span>. <span class="title">Each</span></span><br><span class="line">    flow’s actions implement sending <span class="keyword">a</span> packet <span class="built_in">to</span> <span class="keyword">the</span> port <span class="keyword">it</span> matches. For unicast logical output ports <span class="keyword">on</span> <span class="title">remote</span> <span class="title">hypervisors</span>, <span class="title">the</span> <span class="title">actions</span>  <span class="title">set</span>  <span class="title">the</span>  <span class="title">tunnel</span></span><br><span class="line">    key  <span class="built_in">to</span>  <span class="keyword">the</span> correct <span class="built_in">value</span>, <span class="keyword">then</span> <span class="built_in">send</span> <span class="keyword">the</span> packet <span class="keyword">on</span> <span class="title">the</span> <span class="title">tunnel</span> <span class="title">port</span> <span class="title">to</span> <span class="title">the</span> <span class="title">correct</span> <span class="title">hypervisor</span>. (<span class="title">When</span> <span class="title">the</span> <span class="title">remote</span> <span class="title">hypervisor</span> <span class="title">receives</span> <span class="title">the</span> <span class="title">packet</span>, <span class="title">table</span> <span class="title">0</span></span><br><span class="line">    there will recognize <span class="keyword">it</span> <span class="keyword">as</span> <span class="keyword">a</span> tunneled packet <span class="keyword">and</span> pass <span class="keyword">it</span> along <span class="built_in">to</span> table <span class="number">33.</span>) For multicast logical output ports, <span class="keyword">the</span>  actions  <span class="built_in">send</span>  <span class="literal">one</span>  copy  <span class="keyword">of</span>  <span class="keyword">the</span></span><br><span class="line">    packet  <span class="built_in">to</span>  <span class="keyword">each</span>  remote  hypervisor,  <span class="keyword">in</span>  <span class="keyword">the</span> same way <span class="keyword">as</span> <span class="keyword">for</span> unicast destinations. If <span class="keyword">a</span> multicast group includes <span class="keyword">a</span> logical port <span class="keyword">or</span> ports <span class="keyword">on</span> <span class="title">the</span> <span class="title">local</span></span><br><span class="line">    hypervisor, <span class="keyword">then</span> its actions also resubmit <span class="built_in">to</span> table <span class="number">33.</span> Table <span class="number">32</span> also includes:</span><br><span class="line">remote :adj. 遥远的；偏僻的；疏远的 n. 远程</span><br><span class="line">correct :adj. （政治或思想）正确的；恰当的；端正的 v. 改正；批改（学生作业）；校正；指出错误；抵消；校准（仪器）；修正、调整（数据）</span><br><span class="line">recognize :vt. 认出，识别；承认；接受，认可；赞赏 vi. 确认，承认；具结</span><br><span class="line">along :prep. 沿着；顺着；（事件）进展 adv. 一起；向前；来到；越来越（好）；一直</span><br><span class="line">destinations:n. 目的地，终点；抵达站（destination的复数形式）</span><br><span class="line"></span><br><span class="line">    ·      A higher-priority rule <span class="built_in">to</span> match packets received <span class="built_in">from</span> VXLAN tunnels, based <span class="keyword">on</span> <span class="title">flag</span> <span class="title">MLF_RCV_FROM_VXLAN</span>, <span class="title">and</span> <span class="title">resubmit</span> <span class="title">these</span> <span class="title">packets</span>  <span class="title">to</span>  <span class="title">table</span>  <span class="title">33</span></span><br><span class="line">           <span class="keyword">for</span>  <span class="built_in">local</span>  delivery.  Packets  received <span class="built_in">from</span> VXLAN tunnels reach here because <span class="keyword">of</span> <span class="keyword">a</span> lack <span class="keyword">of</span> logical output port field <span class="keyword">in</span> <span class="keyword">the</span> tunnel key <span class="keyword">and</span> thus</span><br><span class="line">           these packets needed <span class="built_in">to</span> be submitted <span class="built_in">to</span> table <span class="number">8</span> <span class="built_in">to</span> determine <span class="keyword">the</span> output port.</span><br><span class="line">priority :n. 优先；优先权；[数] 优先次序；优先考虑的事</span><br><span class="line">delivery:n. [贸易] 交付；分娩；递送</span><br><span class="line">lack :n. 缺乏，不足 v. 缺乏，不足，没有；需要</span><br><span class="line">determine :v. （使）下决心，（使）做出决定 vt. 决定，确定；判定，判决；限定 vi. 确定；决定；判决，终止；[主用于法律]了结，终止，结束</span><br><span class="line"></span><br><span class="line">    ·      A higher-priority rule <span class="built_in">to</span> match packets received <span class="built_in">from</span> ports <span class="keyword">of</span> type localport, based <span class="keyword">on</span> <span class="title">the</span> <span class="title">logical</span> <span class="title">input</span> <span class="title">port</span>, <span class="title">and</span> <span class="title">resubmit</span>  <span class="title">these</span>  <span class="title">packets</span>  <span class="title">to</span></span><br><span class="line">           table  <span class="number">33</span>  <span class="keyword">for</span>  <span class="built_in">local</span>  delivery. Ports <span class="keyword">of</span> type localport exist <span class="keyword">on</span> <span class="title">every</span> <span class="title">hypervisor</span> <span class="title">and</span> <span class="title">by</span> <span class="title">definition</span> <span class="title">their</span> <span class="title">traffic</span> <span class="title">should</span> <span class="title">never</span> <span class="title">go</span> <span class="title">out</span> <span class="title">through</span> <span class="title">a</span></span><br><span class="line">           tunnel.</span><br><span class="line">definition :n. 定义；[物] 清晰度；解说</span><br><span class="line"></span><br><span class="line">    ·      A higher-priority rule <span class="built_in">to</span> match packets that have <span class="keyword">the</span> MLF_LOCAL_ONLY logical flow flag <span class="built_in">set</span>, <span class="keyword">and</span> whose destination is <span class="keyword">a</span> multicast  address.  This</span><br><span class="line">           flag  indicates that <span class="keyword">the</span> packet should <span class="keyword">not</span> be delivered <span class="built_in">to</span> remote hypervisors, even <span class="keyword">if</span> <span class="keyword">the</span> multicast destination includes ports <span class="keyword">on</span> <span class="title">remote</span> <span class="title">hyper</span>‐</span><br><span class="line">           visors. This flag is used when ovn-controller is <span class="keyword">the</span> originator <span class="keyword">of</span> <span class="keyword">the</span> multicast packet. Since <span class="keyword">each</span> ovn-controller instance is originating these</span><br><span class="line">           packets, <span class="keyword">the</span> packets only need <span class="built_in">to</span> be delivered <span class="built_in">to</span> <span class="built_in">local</span> ports.</span><br><span class="line">indicates :v. 表明（indicate的第三人称单数形式）；指示，显示</span><br><span class="line">originator :n. 创始人；发明者； 提出者</span><br><span class="line">originating :v. 起源；创立（originate 的现在分词）</span><br><span class="line"></span><br><span class="line">    ·      A fallback flow that resubmits <span class="built_in">to</span> table <span class="number">33</span> <span class="keyword">if</span> there is no other match.</span><br><span class="line">fallback n. 应急计划，应变计划；减少，削减；储备物，备用物；退路；可依靠之物 adj. 退守的；应变的</span><br><span class="line"></span><br><span class="line">    Flows  <span class="keyword">in</span>  table  <span class="number">33</span> resemble those <span class="keyword">in</span> table <span class="number">32</span> but <span class="keyword">for</span> logical ports that reside locally rather than remotely. For unicast logical output ports <span class="keyword">on</span> <span class="title">the</span></span><br><span class="line">    <span class="built_in">local</span> hypervisor, <span class="keyword">the</span> actions just resubmit <span class="built_in">to</span> table <span class="number">34.</span> For multicast output ports that <span class="built_in">include</span> <span class="literal">one</span> <span class="keyword">or</span> more logical ports <span class="keyword">on</span> <span class="title">the</span> <span class="title">local</span> <span class="title">hypervisor</span>, <span class="title">for</span></span><br><span class="line">    <span class="keyword">each</span> such logical port P, <span class="keyword">the</span> actions change <span class="keyword">the</span> logical output port <span class="built_in">to</span> P, <span class="keyword">then</span> resubmit <span class="built_in">to</span> table <span class="number">34.</span></span><br><span class="line">resemble :vt. 类似，像</span><br><span class="line">reside :vi. 住，居住；属于</span><br><span class="line">locally :adv. 局部地；在本地</span><br><span class="line"></span><br><span class="line">    A  special  <span class="keyword">case</span> is that when <span class="keyword">a</span> localnet port exists <span class="keyword">on</span> <span class="title">the</span> <span class="title">datapath</span>, <span class="title">remote</span> <span class="title">port</span> <span class="title">is</span> <span class="title">connected</span> <span class="title">by</span> <span class="title">switching</span> <span class="title">to</span> <span class="title">the</span> <span class="title">localnet</span> <span class="title">port</span>. <span class="title">In</span> <span class="title">this</span> <span class="title">case</span>, <span class="title">instead</span></span><br><span class="line">    <span class="keyword">of</span> adding <span class="keyword">a</span> flow <span class="keyword">in</span> table <span class="number">32</span> <span class="built_in">to</span> reach <span class="keyword">the</span> remote port, <span class="keyword">a</span> flow is added <span class="keyword">in</span> table <span class="number">33</span> <span class="built_in">to</span> <span class="keyword">switch</span> <span class="keyword">the</span> logical outport <span class="built_in">to</span> <span class="keyword">the</span> localnet port, <span class="keyword">and</span> resubmit  <span class="built_in">to</span></span><br><span class="line">    table <span class="number">33</span> <span class="keyword">as</span> <span class="keyword">if</span> <span class="keyword">it</span> were unicasted <span class="built_in">to</span> <span class="keyword">a</span> logical port <span class="keyword">on</span> <span class="title">the</span> <span class="title">local</span> <span class="title">hypervisor</span>.</span><br><span class="line"></span><br><span class="line">    Table  <span class="number">34</span>  matches <span class="keyword">and</span> drops packets <span class="keyword">for</span> which <span class="keyword">the</span> logical input <span class="keyword">and</span> output ports are <span class="keyword">the</span> same <span class="keyword">and</span> <span class="keyword">the</span> MLF_ALLOW_LOOPBACK flag is <span class="keyword">not</span> <span class="built_in">set</span>. It resubmits</span><br><span class="line">    other packets <span class="built_in">to</span> table <span class="number">40.</span></span><br><span class="line">MLF_ALLOW_LOOPBACK:流标记</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4.</span>  OpenFlow <span class="keyword">tables</span> <span class="number">40</span> through <span class="number">63</span> <span class="keyword">execute</span> the logical egress pipeline <span class="keyword">from</span> the Logical_Flow <span class="keyword">table</span> <span class="keyword">in</span> the OVN Southbound <span class="keyword">database</span>. The egress  pipeline  can</span><br><span class="line">    <span class="keyword">perform</span>  a  final stage <span class="keyword">of</span> validation <span class="keyword">before</span> packet delivery. Eventually, it may <span class="keyword">execute</span> an output action, which ovn-controller implements <span class="keyword">by</span> </span><br><span class="line">    resubmitting <span class="keyword">to</span> <span class="keyword">table</span> <span class="number">64.</span> A packet <span class="keyword">for</span> which the pipeline never executes output <span class="keyword">is</span> effectively dropped (although it may have been transmitted through a  tunnel</span><br><span class="line">    across a physical network).</span><br><span class="line"></span><br><span class="line">    The egress pipeline cannot change the logical output port <span class="keyword">or</span> cause further tunneling.</span><br><span class="line">egress :n. 外出；出口 vi. 外出 vt. 使外出</span><br><span class="line"><span class="keyword">perform</span>  :vt. 执行；完成；演奏  vi. 执行，机器运转；表演</span><br><span class="line">final :adj. 最终的；决定性的；不可更改的 n. 决赛；期末考试；当日报纸的末版</span><br><span class="line">stage :n. 阶段；舞台；戏剧；驿站 vt. 举行；上演；筹划  vi. 举行；适于上演；乘驿车旅行 </span><br><span class="line">validation :n. 确认；批准；生效</span><br><span class="line">delivery:n. [贸易] 交付；分娩；递送</span><br><span class="line">Eventually:adv. 最后，终于</span><br><span class="line">implements :n. 工具；器具；用具； 家具；服装；装备；手段；充当工具的人；【法律】履行(契约等) vt. 执行，履行；贯彻，落实；使生效</span><br><span class="line">effectively :adv. 有效地，生效地；有力地；实际上</span><br><span class="line">transmitted :v. 传输；传送（transmit的过去分词） adj. 透射的</span><br><span class="line">further :adv. 更远地；远非（如此）；进一步地；而且；处于更高阶段 adj. 更多的，附加的；更远的；进一步的，深一层的 v. 促进，增进，助长</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5.</span>  <span class="keyword">Table</span>  <span class="number">64</span>  bypasses  OpenFlow  loopback <span class="keyword">when</span> MLF_ALLOW_LOOPBACK <span class="keyword">is</span> <span class="keyword">set</span>. Logical loopback was handled <span class="keyword">in</span> <span class="keyword">table</span> <span class="number">34</span>, but OpenFlow <span class="keyword">by</span> <span class="keyword">default</span> <span class="keyword">also</span> prevents</span><br><span class="line">    loopback <span class="keyword">to</span> the OpenFlow ingress port. Thus, <span class="keyword">when</span> MLF_ALLOW_LOOPBACK <span class="keyword">is</span> <span class="keyword">set</span>, OpenFlow <span class="keyword">table</span> <span class="number">64</span> saves the OpenFlow ingress port, sets it <span class="keyword">to</span> zero, </span><br><span class="line">    resubmits <span class="keyword">to</span> <span class="keyword">table</span> <span class="number">65</span> <span class="keyword">for</span> logical-<span class="keyword">to</span>-physical transformation, <span class="keyword">and</span> <span class="keyword">then</span> restores the OpenFlow ingress port, effectively disabling OpenFlow loopback prevents.</span><br><span class="line">    <span class="keyword">When</span> MLF_ALLOW_LOOPBACK <span class="keyword">is</span> unset, <span class="keyword">table</span> <span class="number">64</span> flow simply resubmits <span class="keyword">to</span> <span class="keyword">table</span> <span class="number">65.</span></span><br><span class="line">bypass  :n. 旁路，支路；旁通管，分流术 v. 绕过，避开；忽视，不顾（规章制度）；设旁路，迂回</span><br><span class="line">loopback :n. [计] 回送；回路</span><br><span class="line">prevents:v. 阻止（prevent的第三人称单数）；预防</span><br><span class="line">transformation:n. [遗] 转化；转换；改革；变形</span><br><span class="line">restore :vt. 恢复；修复；归还 vi. 恢复；还原</span><br><span class="line">unset:adj. 未装配的；未坚固的  vt. 使……移动；扰乱；[计] 复原</span><br></pre></td></tr></table></figure>

<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6</span>.  OpenFlow <span class="built_in">table</span> <span class="number">65</span> performs logical-to-physical translation, the opposite of <span class="built_in">table</span> <span class="number">0</span>. It matches the packet’s logical <span class="literal">egress</span> <span class="keyword">port</span>.  Its  actions  output</span><br><span class="line">    the  packet <span class="keyword">to</span> the <span class="keyword">port</span> attached <span class="keyword">to</span> the OVN integration bridge that represents that logical <span class="keyword">port</span>. If the logical <span class="literal">egress</span> <span class="keyword">port</span> is a container nested with</span><br><span class="line">    a VM, then before sending the packet the actions push <span class="keyword">on</span> a VLAN header with an appropriate VLAN ID.</span><br><span class="line">opposite :adj. 相反的；对面的；对立的 n. 对立面；反义词  prep. 在…的对面 adv. 在对面</span><br><span class="line">represents :v. 代表（represent的三单形式）；表现，表示；描绘</span><br><span class="line">appropriate :adj. 适当的；恰当的；合适的  vt. 占用，拨出（专款等）</span><br></pre></td></tr></table></figure>

<h2 id="logical-routers-and-logical-patch-ports"><a href="#logical-routers-and-logical-patch-ports" class="headerlink" title="logical routers and logical patch ports"></a>logical routers and logical patch ports</h2><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Typically  <span class="keyword">logical</span>  routers  and  <span class="keyword">logical</span> patch ports <span class="keyword">do</span> not have a physical location and effectively reside on every hypervisor. This is the <span class="keyword">case</span> for <span class="keyword">logical</span> patch</span><br><span class="line">ports between <span class="keyword">logical</span> routers and <span class="keyword">logical</span> switches behind those <span class="keyword">logical</span> routers, to which VMs (and VIFs) attach.</span><br><span class="line">Typically  :adv. 代表性地；作为特色地</span><br><span class="line">patch :n. 眼罩；斑点；碎片；小块土地 vt. 修补；解决；掩饰  vi. 打补丁</span><br><span class="line">effectively :adv. 有效地，生效地；有力地；实际上</span><br><span class="line">reside :vi. 住，居住；属于</span><br><span class="line"><span class="keyword">case</span> :n. 情况；实例；箱 vt. 包围；把…装于容器中</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Consider a packet sent <span class="keyword">from</span> one virtual machine <span class="keyword">or</span> container <span class="keyword">to</span> another VM <span class="keyword">or</span> container that resides <span class="keyword">on</span> a different subnet. The packet will traverse <span class="keyword">tables</span> <span class="number">0</span> <span class="keyword">to</span>  <span class="number">65</span></span><br><span class="line"><span class="keyword">as</span>  described  <span class="keyword">in</span>  the previous section Architectural Physical Life <span class="keyword">Cycle</span> <span class="keyword">of</span> a Packet, <span class="keyword">using</span> the logical datapath representing the logical switch that the sender <span class="keyword">is</span></span><br><span class="line">attached <span class="keyword">to</span>. At <span class="keyword">table</span> <span class="number">32</span>, the packet will use the fallback flow that resubmits locally <span class="keyword">to</span> <span class="keyword">table</span> <span class="number">33</span> <span class="keyword">on</span> the same hypervisor. <span class="keyword">In</span> this <span class="keyword">case</span>, <span class="keyword">all</span> <span class="keyword">of</span> the processing  <span class="keyword">from</span></span><br><span class="line"><span class="keyword">table</span> <span class="number">0</span> <span class="keyword">to</span> <span class="keyword">table</span> <span class="number">65</span> occurs <span class="keyword">on</span> the hypervisor <span class="keyword">where</span> the sender resides.</span><br><span class="line">consider :vt. 考虑；认为；考虑到；细想 vi. 考虑；认为；细想</span><br><span class="line">traverse :v. 穿过；来回移动；反驳；阻挠；详细研究；旋转 n. 穿过；横挡；（大炮等的）横转装置；测量导线；（壕沟的）土护墙  adj. 横贯的</span><br><span class="line">described  :v. 描述，描写（describe 的过去式和过去分词）adj. 描述的</span><br><span class="line">previous :adj. 以前的；早先的；过早的 adv. 在先；在…以前</span><br><span class="line">representing :v. 代表；表示，表现（represent的ing形式）</span><br><span class="line">fallback :n. 应急计划，应变计划；减少，削减；储备物，备用物；退路；可依靠之物 adj. 退守的；应变的</span><br><span class="line">locally :adv. 局部地；在本地</span><br><span class="line">occurs :v. 重现（occur 的第三人称单数）</span><br></pre></td></tr></table></figure>

<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">When the packet reaches <span class="built_in">table</span> <span class="number">65</span>, the logical <span class="literal">egress</span> <span class="keyword">port</span> is a logical patch <span class="keyword">port</span>. The implementation <span class="keyword">in</span> <span class="built_in">table</span> <span class="number">65</span> differs depending <span class="keyword">on</span> the OVS version, although the</span><br><span class="line">observed behavior is meant <span class="keyword">to</span> be the same:</span><br><span class="line">implementation :n. [计] 实现；履行；安装启用</span><br><span class="line">differ :vt. 使…相异；使…不同 vi. 相异；意见分歧</span><br><span class="line">depending :v. 依赖；信任（depend的ing形式）</span><br><span class="line">although :conj. 尽管，虽然；但是，然而</span><br><span class="line">observed :adj. 观察的；观测的 v. 观察；遵守；注意到；庆祝（observe的过去分词形式）</span><br><span class="line">behavior :n. 行为，举止；态度；反应</span><br></pre></td></tr></table></figure>

<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">·      In OVS versions <span class="number">2.6</span> and earlier, <span class="built_in">table</span> <span class="number">65</span> outputs <span class="keyword">to</span> an OVS patch <span class="keyword">port</span> that represents the logical patch <span class="keyword">port</span>. The packet re-enters the OpenFlow  flow</span><br><span class="line">       <span class="built_in">table</span>  <span class="keyword">from</span>  the OVS patch <span class="keyword">port</span>’s peer <span class="keyword">in</span> <span class="built_in">table</span> <span class="number">0</span>, which identifies the logical datapath and logical input <span class="keyword">port</span> based <span class="keyword">on</span> the OVS patch <span class="keyword">port</span>’s OpenFlow</span><br><span class="line">       <span class="keyword">port</span> number.</span><br><span class="line">represents :v. 代表（represent的三单形式）；表现，表示；描绘</span><br><span class="line">peer :n. 同等地位的人，同龄人；贵族 v. 凝视，盯着看；隐现；看见；匹配 </span><br><span class="line">identifies :vt. [计] 识别，认明；视为相同，鉴定 v. [计] 识别，确定（identify的单三形式）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">·      In OVS versions <span class="number">2.7</span> <span class="keyword">and</span> later, <span class="keyword">the</span> packet is cloned <span class="keyword">and</span> resubmitted directly <span class="built_in">to</span> <span class="keyword">the</span> <span class="keyword">first</span> OpenFlow flow table <span class="keyword">in</span> <span class="keyword">the</span>  ingress  pipeline,  setting  <span class="keyword">the</span></span><br><span class="line">       logical ingress port <span class="built_in">to</span> <span class="keyword">the</span> peer logical patch port, <span class="keyword">and</span> <span class="keyword">using</span> <span class="keyword">the</span> peer logical patch port’s logical datapath (that represents <span class="keyword">the</span> logical router).</span><br><span class="line">directly :adv. 直接地；立即；马上；正好地；坦率地  conj. 一…就</span><br><span class="line">represents :v. 代表（represent的三单形式）；表现，表示；描绘</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The  packet re-enters <span class="keyword">the</span> ingress pipeline <span class="keyword">in</span> order <span class="built_in">to</span> traverse tables <span class="number">8</span> <span class="built_in">to</span> <span class="number">65</span> again, this <span class="built_in">time</span> <span class="keyword">using</span> <span class="keyword">the</span> logical datapath representing <span class="keyword">the</span> logical router. The </span><br><span class="line">processing continues <span class="keyword">as</span> described <span class="keyword">in</span> <span class="keyword">the</span> previous section Architectural Physical Life Cycle <span class="keyword">of</span> <span class="keyword">a</span> Packet. When <span class="keyword">the</span> packet reachs table <span class="number">65</span>, <span class="keyword">the</span> logical egress port  </span><br><span class="line">will once  again  be <span class="keyword">a</span> logical patch port. In <span class="keyword">the</span> same manner <span class="keyword">as</span> described above, this logical patch port will cause <span class="keyword">the</span> packet <span class="built_in">to</span> be resubmitted <span class="built_in">to</span> OpenFlow tables <span class="number">8</span> <span class="built_in">to</span> <span class="number">65</span>, this <span class="built_in">time</span> <span class="keyword">using</span> <span class="keyword">the</span> logical datapath representing <span class="keyword">the</span> logical <span class="keyword">switch</span> that <span class="keyword">the</span> destination VM <span class="keyword">or</span> container is attached <span class="built_in">to</span>.</span><br><span class="line">representing :v. 代表；表示，表现（represent的ing形式）</span><br><span class="line">processing :n. 加工；处理；运算 v. 加工；处理；审阅，审核（文件或请求等）；对……起诉；列队进行；冲印（照片）（<span class="built_in">process</span> 的现在分词）</span><br><span class="line">manner :n. 方式；习惯；种类；规矩；风俗</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">The packet traverses tables <span class="number">8</span> <span class="built_in">to</span> <span class="number">65</span> <span class="keyword">a</span> <span class="keyword">third</span> <span class="keyword">and</span> final <span class="built_in">time</span>. If <span class="keyword">the</span> destination VM <span class="keyword">or</span> container resides <span class="keyword">on</span> <span class="title">a</span> <span class="title">remote</span> <span class="title">hypervisor</span>, <span class="title">then</span> <span class="title">table</span> <span class="title">32</span> <span class="title">will</span> <span class="title">send</span> <span class="title">the</span> <span class="title">packet</span> <span class="title">on</span></span><br><span class="line"><span class="keyword">a</span> tunnel port <span class="built_in">from</span> <span class="keyword">the</span> sender’s hypervisor <span class="built_in">to</span> <span class="keyword">the</span> remote hypervisor. Finally table <span class="number">65</span> will output <span class="keyword">the</span> packet directly <span class="built_in">to</span> <span class="keyword">the</span> destination VM <span class="keyword">or</span> container.</span><br></pre></td></tr></table></figure>

<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The following sections describe two exceptions, where logical routers<span class="built_in"> and/or </span>logical patch ports are associated with a physical location.</span><br><span class="line">exception:n. 例外；异议</span><br><span class="line">associated<span class="keyword"> :adj</span>. 关联的；联合的 v. 联系（associate的过去式和过去分词）</span><br></pre></td></tr></table></figure>

<h3 id="Gateway-Routers"><a href="#Gateway-Routers" class="headerlink" title="Gateway Routers"></a>Gateway Routers</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A gateway router <span class="keyword">is</span> a logical router that <span class="keyword">is</span> bound <span class="keyword">to</span> a physical <span class="keyword">location</span>. This includes <span class="keyword">all</span> <span class="keyword">of</span> the logical patch ports <span class="keyword">of</span> the logical router, <span class="keyword">as</span> well <span class="keyword">as</span> <span class="keyword">all</span> <span class="keyword">of</span> the</span><br><span class="line">peer logical patch ports <span class="keyword">on</span> logical switches. <span class="keyword">In</span> the OVN Southbound <span class="keyword">database</span>, the Port_Binding entries <span class="keyword">for</span> these logical patch ports use the <span class="keyword">type</span>  l3gateway  rather</span><br><span class="line">than patch, <span class="keyword">in</span> <span class="keyword">order</span> <span class="keyword">to</span> distinguish that these logical patch ports are bound <span class="keyword">to</span> a chassis.</span><br><span class="line">bound :adj. 一定会；很可能会；必定的；受约束的，有义务的；因……受阻；被……所限制的；限制在某个场所的；正旅行去，准备去；准备就绪的；装有封面的，装订好的；黏附的；依附性的 v. 跳跃着跑；弹回，弹开；形成……的边界；关，围入；限制，束缚 n. 跳跃；界限，边界；限制，限制范围；界；极限</span><br><span class="line"><span class="keyword">as</span> well <span class="keyword">as</span>:也；和…一样；不但…而且</span><br><span class="line">entries :n. 进入；（词典所列的）词目（entry的复数形式）</span><br><span class="line">distinguish :vt. 区分；辨别；使杰出，使表现突出 vi. 区别，区分；辨别</span><br></pre></td></tr></table></figure>

<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">When  a hypervisor processes a packet <span class="keyword">on</span> a logical datapath representing a logical switch, and the logical <span class="literal">egress</span> <span class="keyword">port</span> is a l3gateway <span class="keyword">port</span> representing connectivity</span><br><span class="line"><span class="keyword">to</span> a gateway router, the packet will <span class="built_in">match</span> a flow <span class="keyword">in</span> <span class="built_in">table</span> <span class="number">32</span> that sends the packet <span class="keyword">on</span> a tunnel <span class="keyword">port</span> <span class="keyword">to</span> the chassis where the gateway router resides. This </span><br><span class="line">processing <span class="keyword">in</span> <span class="built_in">table</span> <span class="number">32</span> is done <span class="keyword">in</span> the same manner as <span class="keyword">for</span> VIFs.</span><br><span class="line">representing:v. 代表；表示，表现（represent的ing形式）</span><br><span class="line">connectivity:n. 连通（性），联结（度）</span><br></pre></td></tr></table></figure>

<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Gateway  routers are typically used in <span class="keyword">between </span><span class="keyword">distributed </span>logical routers <span class="keyword">and </span>physical networks. The <span class="keyword">distributed </span>logical router <span class="keyword">and </span>the logical <span class="keyword">switches </span><span class="keyword">behind </span>it,</span><br><span class="line">to which VMs <span class="keyword">and </span>containers attach, effectively reside on each hypervisor. The <span class="keyword">distributed </span>router <span class="keyword">and </span>the gateway router are connected <span class="keyword">by </span> another  logical  <span class="keyword">switch,</span></span><br><span class="line"><span class="keyword"></span>sometimes  referred to as a <span class="keyword">join </span>logical <span class="keyword">switch. </span>On the other side, the gateway router connects to another logical <span class="keyword">switch </span>that has a localnet port connecting to the</span><br><span class="line">physical network.</span><br><span class="line">typically :adv. 代表性地；作为特色地</span><br><span class="line"><span class="keyword">distributed </span>:adj. 分布式的，分散式的</span><br><span class="line"><span class="symbol">effectively:</span>adv. 有效地，生效地；有力地；实际上</span><br><span class="line">referred :v. 参考，查阅；归类，谈及，送交（refer 的过去式）adj. 援引的</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">When <span class="keyword">using</span> gateway routers, DNAT <span class="keyword">and</span> SNAT rules are associated <span class="keyword">with</span> <span class="keyword">the</span> gateway router, which provides <span class="keyword">a</span> central location that can handle <span class="literal">one</span>-<span class="built_in">to</span>-many SNAT  (aka  IP</span><br><span class="line">masquerading).</span><br><span class="line">associated :adj. 关联的；联合的 v. 联系（associate的过去式和过去分词）</span><br><span class="line">aka  :<span class="keyword">abbr</span>. 又名，亦称 (also known <span class="keyword">as</span>)</span><br><span class="line">masquerading:n. 伪装；冒充</span><br></pre></td></tr></table></figure>

<h3 id="Distributed-Gateway-Ports"><a href="#Distributed-Gateway-Ports" class="headerlink" title="Distributed Gateway Ports"></a>Distributed Gateway Ports</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Distributed </span>gateway ports are logical router patch ports that <span class="keyword">directly </span>connect <span class="keyword">distributed </span>logical routers to logical <span class="keyword">switches </span>with localnet ports.</span><br><span class="line"><span class="keyword">directly </span>:adv. 直接地；立即；马上；正好地；坦率地 conj. 一…就</span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">The  primary  design  goal  <span class="keyword">of</span>  distributed  gateway  ports  <span class="keyword">is</span> <span class="keyword">to</span> allow <span class="keyword">as</span> much traffic <span class="keyword">as</span> possible <span class="keyword">to</span> be handled locally <span class="keyword">on</span> <span class="keyword">the</span> hypervisor <span class="keyword">where</span> a VM <span class="keyword">or</span> container</span><br><span class="line">resides. Whenever possible, packets <span class="keyword">from</span> <span class="keyword">the</span> VM <span class="keyword">or</span> container <span class="keyword">to</span> <span class="keyword">the</span> outside world should be processed completely <span class="keyword">on</span> <span class="keyword">that</span> VM’s <span class="keyword">or</span> container’s hypervisor,  eventually</span><br><span class="line">traversing  a  localnet  port  instance <span class="keyword">on</span> <span class="keyword">that</span> hypervisor <span class="keyword">to</span> <span class="keyword">the</span> physical network. Whenever possible, packets <span class="keyword">from</span> <span class="keyword">the</span> outside world <span class="keyword">to</span> a VM <span class="keyword">or</span> container should be</span><br><span class="line">directed <span class="keyword">through</span> <span class="keyword">the</span> physical network directly <span class="keyword">to</span> <span class="keyword">the</span> VM’s <span class="keyword">or</span> container’s hypervisor, <span class="keyword">where</span> <span class="keyword">the</span> packet will enter <span class="keyword">the</span> integration bridge <span class="keyword">through</span> a localnet port.</span><br><span class="line">primary  :adj. 主要的；初级的；基本的 n. 原色；最主要者</span><br><span class="line">goal  :n. 目标；球门，得分数；终点  vi. 攻门，射门得分</span><br><span class="line">traffic :n. 交通；运输；贸易；[通信] 通信量 vt. 用…作交换；在…通行 vi. 交易，买卖</span><br><span class="line">locally :adv. 局部地；在本地</span><br><span class="line">Whenever :conj. 无论何时，无论什么情况；每当；别的什么时候（也可以）  adv. 不论何时，随便什么时候；究竟什么时候</span><br><span class="line">eventually:adv. 最后，终于</span><br><span class="line">traversing  :n. 穿越，通过 v. 穿过（traverse的ing形式）；横越</span><br><span class="line">directed :adj. 定向的；经指导的；被控制的 v. 指导；管理（direct的过去式和过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In order <span class="keyword">to</span> allow <span class="keyword">for</span> <span class="keyword">the</span> distributed processing <span class="keyword">of</span> packets described <span class="keyword">in</span> <span class="keyword">the</span> <span class="built_in">paragraph</span> <span class="keyword">above</span>, distributed gateway ports need <span class="keyword">to</span> be logical patch ports  <span class="keyword">that</span>  effec‐</span><br><span class="line">tively  reside <span class="keyword">on</span> <span class="keyword">every</span> hypervisor, rather than l3gateway ports <span class="keyword">that</span> are bound <span class="keyword">to</span> a particular chassis. However, <span class="keyword">the</span> flows associated <span class="keyword">with</span> distributed gateway ports</span><br><span class="line">often need <span class="keyword">to</span> be associated <span class="keyword">with</span> physical locations, <span class="keyword">for</span> <span class="keyword">the</span> following reasons:</span><br><span class="line"><span class="built_in">paragraph</span> :n. 段落；短评；段落符号 vt. 将…分段</span><br><span class="line">particular :adj. 特别的；详细的；独有的；挑剔的 n. 详细说明；个别项目</span><br><span class="line">associated:adj. 关联的；联合的 v. 联系（associate的过去式和过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">·      The physical network that <span class="keyword">the</span> localnet port is attached <span class="built_in">to</span> typically uses L2 learning. Any Ethernet address used over  <span class="keyword">the</span>  distributed  gateway  port</span><br><span class="line">       must  be  restricted <span class="built_in">to</span> <span class="keyword">a</span> single physical location so that upstream L2 learning is <span class="keyword">not</span> confused. Traffic sent out <span class="keyword">the</span> distributed gateway port towards</span><br><span class="line">       <span class="keyword">the</span> localnet port <span class="keyword">with</span> <span class="keyword">a</span> specific Ethernet address must be sent out <span class="literal">one</span> specific instance <span class="keyword">of</span> <span class="keyword">the</span> distributed gateway port  <span class="keyword">on</span>  <span class="title">one</span>  <span class="title">specific</span>  <span class="title">chassis</span>.</span><br><span class="line">       Traffic  received  <span class="built_in">from</span>  <span class="keyword">the</span>  localnet  port  (<span class="keyword">or</span> <span class="built_in">from</span> <span class="keyword">a</span> VIF <span class="keyword">on</span> <span class="title">the</span> <span class="title">same</span> <span class="title">logical</span> <span class="title">switch</span> <span class="title">as</span> <span class="title">the</span> <span class="title">localnet</span> <span class="title">port</span>) <span class="title">with</span> <span class="title">a</span> <span class="title">specific</span> <span class="title">Ethernet</span> <span class="title">address</span> <span class="title">must</span> <span class="title">be</span></span><br><span class="line">       directed <span class="built_in">to</span> <span class="keyword">the</span> logical <span class="keyword">switch</span>’s patch port instance <span class="keyword">on</span> <span class="title">that</span> <span class="title">specific</span> <span class="title">chassis</span>.</span><br><span class="line">restricted :adj. 受限制的；保密的 v. 限制（restrict的过去式和过去分词）</span><br><span class="line">upstream :adv. 向（在）上游；逆流地 adj. 向（在）上游的；逆流而上的</span><br><span class="line">confused:adj. 困惑的；混乱的；糊涂的 v. 困惑（confuse的过去式）</span><br><span class="line">towards:prep. 朝，向；趋向；接近（目的）；将近（某一时间）；对于；向……致敬；用于；有助于</span><br><span class="line">specific :adj. 特殊的，特定的；明确的；详细的；[药] 具有特效的 n. 特性；细节；特效药</span><br><span class="line"></span><br><span class="line">       Due <span class="built_in">to</span> <span class="keyword">the</span> implications <span class="keyword">of</span> L2 learning, <span class="keyword">the</span> Ethernet address <span class="keyword">and</span> IP address <span class="keyword">of</span> <span class="keyword">the</span> distributed gateway port need <span class="built_in">to</span> be restricted <span class="built_in">to</span> <span class="keyword">a</span> single physical</span><br><span class="line">       location.  For  this reason, <span class="keyword">the</span> user must specify <span class="literal">one</span> chassis associated <span class="keyword">with</span> <span class="keyword">the</span> distributed gateway port. Note that traffic traversing <span class="keyword">the</span> distrib‐</span><br><span class="line">       uted gateway port <span class="keyword">using</span> other Ethernet addresses <span class="keyword">and</span> IP addresses (e.g. <span class="literal">one</span>-<span class="built_in">to</span>-<span class="literal">one</span> NAT) is <span class="keyword">not</span> restricted <span class="built_in">to</span> this chassis.</span><br><span class="line">Due:adj. 到期的；预期的；应付的；应得的；恰当的，适当的 n. 应付款；应得之物 adv. 正（置于方位词前）</span><br><span class="line">Due <span class="built_in">to</span>:prep. 由于；应归于</span><br><span class="line">implications :n. 蕴涵式；暗指，暗示；含蓄，含意；卷入（implication的复数）</span><br><span class="line">specify:vt. 指定；详细说明；列举；把…列入说明书</span><br><span class="line">Note:n. (note) 笔记；便条；纸币；票据；期票；音符；琴键；（鸟兽的）独特叫声；注解；音调，语调；香气；气氛；曲调 v. (note) 注意，察觉；记录；注解笔记；说明，注释；着重提出；强调；用音符记（音乐、旋律）；对…进行公证（或记录）</span><br><span class="line">e.g.:<span class="keyword">abbr</span>. 例如 (<span class="keyword">for</span> example)</span><br><span class="line"></span><br><span class="line">       Replies <span class="built_in">to</span> ARP <span class="keyword">and</span> ND requests must be restricted <span class="built_in">to</span> <span class="keyword">a</span> single physical location, where <span class="keyword">the</span> Ethernet address <span class="keyword">in</span> <span class="keyword">the</span> reply resides.  This  includes  ARP</span><br><span class="line">       <span class="keyword">and</span>  ND  replies <span class="keyword">for</span> <span class="keyword">the</span> IP address <span class="keyword">of</span> <span class="keyword">the</span> distributed gateway port, which are restricted <span class="built_in">to</span> <span class="keyword">the</span> chassis that <span class="keyword">the</span> user associated <span class="keyword">with</span> <span class="keyword">the</span> distributed</span><br><span class="line">       gateway port.</span><br><span class="line">Replies:n. 回答；回复；答复（reply的复数形式） v. 回答；答复（reply的三单形式）</span><br><span class="line">reply :vi. 回答；[法] 答辩；回击 n. 回答；[法] 答辩 vt. 回答；答复</span><br><span class="line">resides:居住 存在</span><br></pre></td></tr></table></figure>

<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">·      <span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> support one-<span class="keyword">to</span>-many SNAT (aka IP masquerading), <span class="keyword">where</span> multiple logical IP addresses spread across multiple chassis are mapped <span class="keyword">to</span> a  <span class="type">single</span></span><br><span class="line">       external  IP  address,  it  will be necessary <span class="keyword">to</span> handle some <span class="keyword">of</span> the logical router processing <span class="keyword">on</span> a specific chassis <span class="keyword">in</span> a centralized manner. Since the</span><br><span class="line">       SNAT external IP address <span class="built_in">is</span> typically the distributed gateway port IP address, <span class="built_in">and</span> <span class="keyword">for</span> simplicity, the same chassis associated  <span class="keyword">with</span>  the  distributed</span><br><span class="line">       gateway port <span class="built_in">is</span> used.</span><br><span class="line">multiple :adj. 多重的；多样的；许多的 n. 倍数；[电] 并联</span><br><span class="line">spread :vi. 传播；伸展 vt. 传播，散布；展开；伸展；铺开 n. 传播；伸展 adj. 伸展的</span><br><span class="line"><span class="symbol">centralized:</span>adj. 集中的；中央集权的 v. 集中（centralize的过去分词）</span><br><span class="line"><span class="symbol">manner:</span>n. 方式；习惯；种类；规矩；风俗 </span><br><span class="line"><span class="symbol">typically:</span>adv. 代表性地；作为特色地</span><br><span class="line"><span class="symbol">simplicity:</span>n. 朴素；简易；天真；愚蠢</span><br><span class="line"><span class="symbol">associated:</span>adj. 关联的；联合的 v. 联系（associate的过去式和过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">The <span class="selector-tag">details</span> of flow restrictions <span class="selector-tag">to</span> specific chassis are described in the ovn-northd documentation.</span><br><span class="line"><span class="selector-tag">details</span> :n. 细节（detail 的复数）；详细资料 v. 详细说明（detail 的第三人称单数）</span><br><span class="line">restrictions :n. 限制；限制条件（restriction的复数形式） </span><br><span class="line">specific :adj. 特殊的，特定的；明确的；详细的；[药] 具有特效的 n. 特性；细节；特效药</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">While  most  <span class="keyword">of</span>  <span class="keyword">the</span>  physical  location dependent aspects <span class="keyword">of</span> distributed gateway ports can be handled <span class="keyword">by</span> restricting some flows <span class="built_in">to</span> specific chassis, <span class="literal">one</span> additional</span><br><span class="line">mechanism is required. When <span class="keyword">a</span> packet leaves <span class="keyword">the</span> ingress pipeline <span class="keyword">and</span> <span class="keyword">the</span> logical egress port is <span class="keyword">the</span> distributed gateway port, <span class="literal">one</span> <span class="keyword">of</span> <span class="literal">two</span> different sets  <span class="keyword">of</span>  actions</span><br><span class="line">is required <span class="keyword">at</span> table <span class="number">32</span>:</span><br><span class="line">dependent :adj. 依靠的；从属的；取决于…的 n. 依赖他人者；受赡养者</span><br><span class="line">aspects :n. 方面；方位；面貌（aspect 的复数）</span><br><span class="line">restricting :n. 整形，限制；扼流 v. 限制（restrict的ing形式）</span><br><span class="line">additional:adj. 附加的，额外的</span><br><span class="line">mechanism :n. 机制；原理，途径；进程；机械装置；技巧</span><br></pre></td></tr></table></figure>

<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">·      If  the  packet can <span class="keyword">be </span>handled locally on the sender’s hypervisor (e.g. one-to-one NAT traffic), then the packet <span class="keyword">should </span><span class="keyword">just </span><span class="keyword">be </span>resubmitted locally to</span><br><span class="line">       table <span class="number">33</span>, in the <span class="keyword">normal </span>manner for <span class="keyword">distributed </span>logical patch ports.</span><br></pre></td></tr></table></figure>

<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">·      However, <span class="keyword">if</span> the packet needs <span class="keyword">to</span> be handled <span class="keyword">on</span> the chassis associated <span class="keyword">with</span> the distributed gateway <span class="keyword">port</span> (e.g. one-<span class="keyword">to</span>-many SNAT traffic <span class="keyword">or</span> non-NAT traf‐</span><br><span class="line">       fic), <span class="keyword">then</span> table <span class="number">32</span> must send the packet <span class="keyword">on</span> a tunnel <span class="keyword">port</span> <span class="keyword">to</span> that chassis.</span><br><span class="line">associated :adj. 关联的；联合的 v. 联系（associate的过去式和过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">In order <span class="keyword">to</span> trigger the second <span class="built_in">set</span> of actions, the chassisredirect type of southbound Port_Binding has been added. Setting the logical <span class="literal">egress</span> <span class="keyword">port</span> <span class="keyword">to</span> the type chas‐</span><br><span class="line">sisredirect logical <span class="keyword">port</span> is simply a way <span class="keyword">to</span> indicate that although the packet is destined <span class="keyword">for</span> the distributed gateway <span class="keyword">port</span>, it needs <span class="keyword">to</span> be redirected <span class="keyword">to</span> a different</span><br><span class="line">chassis.  At <span class="built_in">table</span> <span class="number">32</span>, packets with this logical <span class="literal">egress</span> <span class="keyword">port</span> are sent <span class="keyword">to</span> a specific chassis, <span class="keyword">in</span> the same way that <span class="built_in">table</span> <span class="number">32</span> directs packets whose logical <span class="literal">egress</span> <span class="keyword">port</span></span><br><span class="line">is a VIF or a type l3gateway <span class="keyword">port</span> <span class="keyword">to</span> different chassis. Once the packet arrives at that chassis, <span class="built_in">table</span> <span class="number">33</span> resets the logical <span class="literal">egress</span> <span class="keyword">port</span> <span class="keyword">to</span> the  value  representing</span><br><span class="line">the  distributed  gateway  <span class="keyword">port</span>. For each distributed gateway <span class="keyword">port</span>, there is one type chassisredirect <span class="keyword">port</span>, <span class="keyword">in</span> addition <span class="keyword">to</span> the distributed logical patch <span class="keyword">port</span> repre‐</span><br><span class="line">senting the distributed gateway <span class="keyword">port</span>.</span><br><span class="line">trigger :n. 扳机；起因，引起反应的事；触发器，引爆装置 v. 触发，引起；开动（装置）</span><br><span class="line">chassisredirect:组合词，按照chassis和redirect的组合意思来理解</span><br><span class="line">indicate :vt. 表明；指出；预示；象征</span><br><span class="line">although :conj. 尽管，虽然；但是，然而</span><br><span class="line">destined :adj. 注定的；命定的；去往…的 v. 注定（destine的过去式和过去分词）</span><br><span class="line">redirected :v. 重新传入，重新寄送（redirect的过去分词形式）</span><br><span class="line">resets :v. 重新安放（reset的第三人称单数 n. 重置（reset的复数）</span><br><span class="line">representing:v. 代表；表示，表现（represent的ing形式）</span><br><span class="line">addition :n. 添加；[数] 加法；增加物</span><br><span class="line"><span class="keyword">in</span> addition:另外，此外</span><br></pre></td></tr></table></figure>

<h3 id="High-Availability-for-Distributed-Gateway-Ports"><a href="#High-Availability-for-Distributed-Gateway-Ports" class="headerlink" title="High Availability for Distributed Gateway Ports"></a>High Availability for Distributed Gateway Ports</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OVN allows you <span class="built_in">to</span> specify <span class="keyword">a</span> prioritized list <span class="keyword">of</span> chassis <span class="keyword">for</span> <span class="keyword">a</span> distributed gateway port. This is done <span class="keyword">by</span> associating  multiple  Gateway_Chassis  rows  <span class="keyword">with</span>  <span class="keyword">a</span>  </span><br><span class="line">Logical_Router_Port <span class="keyword">in</span> <span class="keyword">the</span> OVN_Northbound database.</span><br><span class="line">prioritized :v. 按重要性排列；优先处理（prioritize 的过去式和过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">When</span>  multiple  chassis  have  been  specified <span class="keyword">for</span> a gateway, <span class="keyword">all</span> chassis that may send packets <span class="keyword">to</span> that gateway will <span class="keyword">enable</span> BFD <span class="keyword">on</span> tunnels <span class="keyword">to</span> <span class="keyword">all</span> configured gateway</span><br><span class="line">chassis. The <span class="keyword">current</span> master chassis <span class="keyword">for</span> the gateway <span class="keyword">is</span> the highest priority gateway chassis that <span class="keyword">is</span> currently viewed <span class="keyword">as</span> active based <span class="keyword">on</span> BFD status.</span><br><span class="line">specified :adj. 规定的；详细说明的 v. 指定；详细说明（specify的过去分词）</span><br><span class="line">BFD :abbr. 双向转发检测机制（Bidirectional Forwarding Detection）；发现路由器转发故障的新协议；二进制文件描述符（Binary File Descriptor）</span><br><span class="line">active :adj. 积极的；活跃的；主动的；有效的；现役的 n. 主动语态；积极分子</span><br></pre></td></tr></table></figure>

<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">For more information on L3 gateway high availability, please refer to http:<span class="regexp">//</span>docs.openvswitch.org<span class="regexp">/en/</span>latest<span class="regexp">/topics/</span>high-availability.</span><br><span class="line">availability:n. 可用性；有效性；实用性</span><br><span class="line">refer :vi. 参考；涉及；提到；查阅 vt. 涉及；委托；归诸于；使…求助于</span><br></pre></td></tr></table></figure>

<h3 id="ARP-request-and-ND-NS-packet-processing"><a href="#ARP-request-and-ND-NS-packet-processing" class="headerlink" title="ARP request and ND NS packet processing"></a>ARP request and ND NS packet processing</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Due <span class="keyword">to</span> <span class="keyword">the</span> fact <span class="keyword">that</span> ARP requests <span class="keyword">and</span> ND NA packets are usually broadcast packets, <span class="keyword">for</span> performance reasons, OVN  deals  <span class="keyword">with</span>  requests  <span class="keyword">that</span>  target  OVN  owned  IP</span><br><span class="line">addresses  (i.e., IP addresses configured <span class="keyword">on</span> <span class="keyword">the</span> router ports, VIPs, NAT IPs) <span class="keyword">in</span> a specific way <span class="keyword">and</span> only forwards them <span class="keyword">to</span> <span class="keyword">the</span> logical router <span class="keyword">that</span> owns <span class="keyword">the</span> target IP</span><br><span class="line">address. This behavior <span class="keyword">is</span> different than <span class="keyword">that</span> <span class="keyword">of</span> traditional swithces <span class="keyword">and</span> implies <span class="keyword">that</span> other routers/hosts connected <span class="keyword">to</span> <span class="keyword">the</span> logical switch will <span class="keyword">not</span> learn <span class="keyword">the</span> MAC/IP</span><br><span class="line">binding <span class="keyword">from</span> <span class="keyword">the</span> request packet.</span><br><span class="line">due <span class="keyword">to</span>:prep. 由于；应归于</span><br><span class="line">fact :n. 事实；实际；真相</span><br><span class="line">broadcast :v. 播送（电视或无线电节目）；参加（无线电或电视）节目；传播；播撒（种子） n. （无线电、电视）节目；播送；撒播；广播播放时段 adj. 广播节目的；撒播的；无线电广播的 adv. 撒播地</span><br><span class="line">performance :n. 性能；绩效；表演；执行；表现</span><br><span class="line">deal:v. 发（纸牌）；发放；买卖；与……有关；（非正式）买卖毒品；应对；（以某种方式）对付；打交道；论及；给予……打击 n. 约定；一揽子交易；待遇；发牌；（某人的）发牌轮次；牌戏的一局；一手牌；松木；松木板</span><br><span class="line">deal  <span class="keyword">with</span>:处理；涉及；做生意</span><br><span class="line">target  :n. 目标，指标；（攻击的）对象；靶子 v. 把……作为目标；面向，对准（某群体） </span><br><span class="line">owned  :v. 拥有；承认；（非正式）彻底击败（own 的过去式和过去分词） adj. 自身拥有的</span><br><span class="line">i.e.:abbr. 即，也就是 (<span class="built_in">id</span> est)</span><br><span class="line">VIP:virtual load-balanced IP</span><br><span class="line">behavior :n. 行为，举止；态度；反应</span><br><span class="line">traditional :adj. 传统的；惯例的</span><br><span class="line">implies :v. 意味着；蕴含；暗指（imply 的第三人称单数）</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">All</span> other ARP <span class="keyword">and</span> ND packets are flooded <span class="keyword">in</span> the L2 broadcast <span class="keyword">domain</span> <span class="keyword">and</span> <span class="keyword">to</span> <span class="keyword">all</span> attached logical patch ports.</span><br><span class="line">flooded :v. （使）淹没在洪水中；被水淹没；（因洪水）迫使（某人）离开家园（或生意）；（江河、海洋）泛滥；（使引擎）汽化器溢油；子宫出血；（洪水般）涌现；充斥；把……装满（flood 的过去式及过去分词）adj. 被水淹没的；有大量……的</span><br><span class="line"><span class="keyword">domain</span> :n. 领域；域名；产业；地产 n. (<span class="keyword">Domain</span>)人名；(英、法)多曼</span><br><span class="line">attached :adj. 附加的；依恋的，充满爱心的 v. 附上（attach的过去分词）</span><br></pre></td></tr></table></figure>

<h2 id="Multiple-localnet-logical-switches-connected-to-a-Logical-Router"><a href="#Multiple-localnet-logical-switches-connected-to-a-Logical-Router" class="headerlink" title="Multiple localnet logical switches connected to a Logical Router"></a>Multiple localnet logical switches connected to a Logical Router</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">It  is  possible  <span class="built_in">to</span>  have multiple logical switches <span class="keyword">each</span> <span class="keyword">with</span> <span class="keyword">a</span> localnet port (representing physical networks) connected <span class="built_in">to</span> <span class="keyword">a</span> logical router, <span class="keyword">in</span> which <span class="literal">one</span> localnet</span><br><span class="line">logical <span class="keyword">switch</span> may provide <span class="keyword">the</span> external connectivity via <span class="keyword">a</span> distributed gateway port <span class="keyword">and</span> rest <span class="keyword">of</span> <span class="keyword">the</span> localnet logical switches use VLAN tagging <span class="keyword">in</span> <span class="keyword">the</span> physical  </span><br><span class="line">network. It is expected that ovn-bridge-mappings is configured appropriately <span class="keyword">on</span> <span class="title">the</span> <span class="title">chassis</span> <span class="title">for</span> <span class="title">all</span> <span class="title">these</span> <span class="title">localnet</span> <span class="title">networks</span>.</span><br><span class="line">representing :v. 代表；表示，表现（represent的ing形式）</span><br><span class="line">connectivity :n. 连通（性），联结（度）</span><br><span class="line">rest:v. （使）休息；（使）运动员暂时离队；（使）倚靠；被搁置；（遗体或尸体）安葬于；让（土地）休耕；（原告或被告）完成向法庭提出证据（或辩论）；归属于；保持不变 n. 休息；睡眠；静止；休止；休止符；（演说中的）停顿；（诗句中的）停顿；休息处；支架；剩余部分；其余的人（或物）；（器官或组织的）一小碎块；（网球）对打</span><br><span class="line">expected :adj. 预期的；预料的 v. 预期；盼望（expect的过去分词）</span><br><span class="line">appropriately :adv. 适当地；合适地；相称地</span><br></pre></td></tr></table></figure>

<h3 id="East-West-routing"><a href="#East-West-routing" class="headerlink" title="East West routing"></a>East West routing</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">East-West routing between these localnet VLAN tagged logical switches work almost <span class="keyword">the</span> same way <span class="keyword">as</span> <span class="keyword">normal</span> logical switches. When <span class="keyword">the</span> VM sends such <span class="keyword">a</span> packet, <span class="keyword">then</span>:</span><br><span class="line">almost :adv. 差不多，几乎</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  It <span class="keyword">first</span> enters <span class="keyword">the</span> ingress pipeline, <span class="keyword">and</span> <span class="keyword">then</span> egress pipeline <span class="keyword">of</span> <span class="keyword">the</span> source localnet logical <span class="keyword">switch</span> datapath. It <span class="keyword">then</span> enters <span class="keyword">the</span> ingress pipeline <span class="keyword">of</span> <span class="keyword">the</span></span><br><span class="line">    logical router datapath via <span class="keyword">the</span> logical router port <span class="keyword">in</span> <span class="keyword">the</span> source chassis.</span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">2.</span>  <span class="string">Routing decision is taken.</span></span><br><span class="line"><span class="attr">routing</span> :<span class="string">n. 路由选择；工艺路线；选择途径；（计算机网络间的）信息发送 v. 按指定路线发送；为……规定路线（route 的现在分词）</span></span><br><span class="line"><span class="attr">decision</span> :<span class="string">n. 决定，决心；决议</span></span><br><span class="line"><span class="attr">routed</span>:<span class="string">n. 已选择路径 v. 按路线发送（route的过去分词和过去式）</span></span><br></pre></td></tr></table></figure>

<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">3.  From the router datapath, packet enters the ingress pipeline and then egress pipeline of the destination localnet logical switch datapath and goes <span class="keyword">out</span> of</span><br><span class="line">    the  integration bridge to the provider bridge ( belonging to the destination logical switch) via the localnet port. <span class="keyword">While</span> sending the packet to provider</span><br><span class="line">    bridge, we also <span class="keyword">replace</span> router port <span class="keyword">MAC</span> <span class="keyword">as</span> source <span class="keyword">MAC</span> with a chassis unique <span class="keyword">MAC</span>.</span><br><span class="line">provider :<span class="keyword">n</span>. 供应者；养家者</span><br><span class="line">belonging :<span class="keyword">n</span>. 稳定关系，归属感；所有物，附属物 v. 应在（某处），被适当地置于；适应，合得来；属于，是……的财产；（有资格）成为某集体的成员；是……的合法财产，应付给；（比赛或时间）被……控制（belong 的现在分词）</span><br><span class="line">unique :adj. 独特的，稀罕的；[数] 唯一的，独一无二的 <span class="keyword">n</span>. 独一无二的人或物</span><br><span class="line">    This chassis unique <span class="keyword">MAC</span> is configured <span class="keyword">as</span> <span class="keyword">global</span>  ovs  config  <span class="keyword">on</span>  each  chassis  (eg.  via  &quot;ovs-vsctl  <span class="keyword">set</span>  <span class="keyword">open</span>  .  external-ids:  ovn-chassis-<span class="keyword">mac</span>-map‐</span><br><span class="line">    pings=<span class="string">&quot;phys:aa:bb:cc:dd:ee:$i$i&quot;</span>&quot;). <span class="keyword">For</span> <span class="keyword">more</span> details, see ovn-controller(8).</span><br><span class="line"></span><br><span class="line">    <span class="keyword">If</span>  the  above  is  not  configured,  then  source  <span class="keyword">MAC</span> would be the router port <span class="keyword">MAC</span>. This could create problem <span class="keyword">if</span> we have <span class="keyword">more</span> than <span class="keyword">one</span> chassis. This is</span><br><span class="line">    because, since the router port is distributed, the same (<span class="keyword">MAC</span>,VLAN) tuple will seen <span class="keyword">by</span> physical network from other chassis  <span class="keyword">as</span>  well,  <span class="keyword">which</span>  could  cause</span><br><span class="line">    these issues:</span><br><span class="line">    ·      Continuous <span class="keyword">MAC</span> moves <span class="keyword">in</span> top-of-rack switch (ToR).</span><br><span class="line">    ·      ToR dropping the traffic, <span class="keyword">which</span> is causing continuous <span class="keyword">MAC</span> moves.</span><br><span class="line">    ·      ToR blocking the ports from <span class="keyword">which</span> <span class="keyword">MAC</span> moves are happening.</span><br><span class="line">tuple :<span class="keyword">n</span>. [计] 元组，重数</span><br><span class="line">issues:<span class="keyword">n</span>. 议题，问题；债券；争点（issue 的复数）v. 发行；分发；流出（issue 的第三人称单数）</span><br><span class="line">Continuous :adj. 连续的，持续的；继续的；连绵不断的</span><br><span class="line">top-of-rack:机柜顶端柜顶架顶</span><br><span class="line">causing :vt. 成为…的原因（cause的现在分词形式）</span><br><span class="line">blocking :<span class="keyword">n</span>. 阻塞；封闭；大块 v. 阻塞（block的ing形式）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4.</span>  The  destination  chassis  receives  <span class="keyword">the</span>  packet via <span class="keyword">the</span> localnet port <span class="keyword">and</span> sends <span class="keyword">it</span> <span class="built_in">to</span> <span class="keyword">the</span> integration bridge. Before entering <span class="keyword">the</span> integration bridge <span class="keyword">the</span></span><br><span class="line">    source mac <span class="keyword">of</span> <span class="keyword">the</span> packet will be replaced <span class="keyword">with</span> router port mac again. The packet enters <span class="keyword">the</span> ingress pipeline <span class="keyword">and</span> <span class="keyword">then</span> egress pipeline <span class="keyword">of</span> <span class="keyword">the</span>  destination</span><br><span class="line">    localnet logical <span class="keyword">switch</span> <span class="keyword">and</span> <span class="keyword">finally</span> gets delivered <span class="built_in">to</span> <span class="keyword">the</span> destination VM port.</span><br><span class="line">delivered :v. 递送；发表；履行诺言；移交；助产；分娩；投掷；拉（选票）；宣布（判决）；给予（打击、震惊等）；解救（deliver 的过去式及过去分词）</span><br></pre></td></tr></table></figure>

<h3 id="External-traffic"><a href="#External-traffic" class="headerlink" title="External traffic"></a>External traffic</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The following happens when <span class="keyword">a</span> VM sends <span class="keyword">an</span> external traffic (which requires NATting) <span class="keyword">and</span> <span class="keyword">the</span> chassis hosting <span class="keyword">the</span> VM doesn’t have <span class="keyword">a</span> distributed gateway port.</span><br><span class="line">external:adj. 外部的；表面的；[药] 外用的；外国的；外面的 n. 外部；外观；外面</span><br><span class="line">hosting :v. 主办；主持（节目）；做东，款待；存储网站（host 的现在分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  The  packet  <span class="keyword">first</span> enters <span class="keyword">the</span> ingress pipeline, <span class="keyword">and</span> <span class="keyword">then</span> egress pipeline <span class="keyword">of</span> <span class="keyword">the</span> source localnet logical <span class="keyword">switch</span> datapath. It <span class="keyword">then</span> enters <span class="keyword">the</span> ingress pipe‐</span><br><span class="line">    <span class="built_in">line</span> <span class="keyword">of</span> <span class="keyword">the</span> logical router datapath via <span class="keyword">the</span> logical router port <span class="keyword">in</span> <span class="keyword">the</span> source chassis.</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>  Routing decision is taken. Since <span class="keyword">the</span> gateway router <span class="keyword">or</span> <span class="keyword">the</span> distributed gateway port doesn’t reside <span class="keyword">in</span> <span class="keyword">the</span> source chassis, <span class="keyword">the</span> traffic  is  redirected  <span class="built_in">to</span></span><br><span class="line">    <span class="keyword">the</span> gateway chassis via <span class="keyword">the</span> tunnel port.</span><br><span class="line">decision :n. 决定，决心；决议</span><br><span class="line">reside :vi. 住，居住；属于</span><br><span class="line">redirected  :v. 重新传入，重新寄送（redirect的过去分词形式）</span><br></pre></td></tr></table></figure>

<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>.  The  gateway  chassis  receives  the  packet  via the tunnel <span class="keyword">port</span> and the packet enters the <span class="literal">egress</span> pipeline of the logical router datapath. NAT rules are</span><br><span class="line">    applied here. The packet then enters the ingress pipeline and then <span class="literal">egress</span> pipeline of the localnet logical switch datapath which provides  external  </span><br><span class="line">    connectivity and finally goes <span class="keyword">out</span> via the localnet <span class="keyword">port</span> of the logical switch which provides external connectivity.</span><br><span class="line">connectivity :n. 连通（性），联结（度）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Although  this works, <span class="keyword">the</span> VM traffic is tunnelled when sent <span class="built_in">from</span> <span class="keyword">the</span> compute chassis <span class="built_in">to</span> <span class="keyword">the</span> gateway chassis. In order <span class="keyword">for</span> <span class="keyword">it</span> <span class="built_in">to</span> work properly, <span class="keyword">the</span> MTU <span class="keyword">of</span> <span class="keyword">the</span> </span><br><span class="line">localnet logical switches must be lowered <span class="built_in">to</span> account <span class="keyword">for</span> <span class="keyword">the</span> tunnel encapsulation.</span><br><span class="line">properly:adv. 适当地；正确地；恰当地</span><br><span class="line">lowered:v. （天空）变昏暗，变恶劣；减少，降低；把（某物）移低；向下看，垂下；露色，皱眉；削弱（<span class="built_in">lower</span> 的过去式和过去分词）</span><br><span class="line">account :n. 账户；解释；账目，账单；理由；描述 vi. 解释；导致；报账vt. 认为；把…视为</span><br><span class="line">encapsulation:n. 封装；包装</span><br></pre></td></tr></table></figure>

<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Centralized<span class="built_in"> routing </span><span class="keyword">for</span> localnet<span class="built_in"> VLAN </span>tagged logical switches connected <span class="keyword">to</span> a Logical Router <span class="string">&quot;</span></span><br><span class="line"><span class="string">Centralized :adj. 集中的；中央集权的 v. 集中（centralize的过去分词）</span></span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">To overcome <span class="keyword">the</span> tunnel encapsulation problem described <span class="keyword">in</span> <span class="keyword">the</span> previous section, OVN supports <span class="keyword">the</span> option <span class="keyword">of</span> enabling centralized routing  <span class="keyword">for</span>  localnet  VLAN  tagged</span><br><span class="line">logical  switches.  CMS  can configure <span class="keyword">the</span> option options:reside-<span class="keyword">on</span><span class="title">-redirect-chassis</span> <span class="title">to</span> <span class="title">true</span> <span class="title">for</span> <span class="title">each</span> <span class="title">Logical_Router_Port</span> <span class="title">which</span> <span class="title">connects</span> <span class="title">to</span> <span class="title">the</span> <span class="title">localnet</span> <span class="title">VLAN</span> <span class="title">tagged</span></span><br><span class="line">logical switches. This causes <span class="keyword">the</span> gateway chassis (hosting <span class="keyword">the</span> distributed gateway port) <span class="built_in">to</span> handle all <span class="keyword">the</span> routing <span class="keyword">for</span> these networks,  making  <span class="keyword">it</span>  centralized.  It</span><br><span class="line">will reply <span class="built_in">to</span> <span class="keyword">the</span> ARP requests <span class="keyword">for</span> <span class="keyword">the</span> logical router port IPs.</span><br><span class="line">overcome :vt. 克服；胜过 vi. 克服；得胜</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">If  <span class="keyword">the</span>  logical  router doesn’t have <span class="keyword">a</span> distributed gateway port connecting <span class="built_in">to</span> <span class="keyword">the</span> localnet logical <span class="keyword">switch</span> which provides external connectivity, <span class="keyword">then</span> this option is</span><br><span class="line">ignored <span class="keyword">by</span> OVN.</span><br><span class="line">ignored :v. 忽略；不顾；不理会（ignore 的过去式和过去分词） adj. 被忽视的；被忽略的</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The following happens when <span class="keyword">a</span> VM sends <span class="keyword">an</span> east-west traffic which needs <span class="built_in">to</span> be routed:</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  The  packet  <span class="keyword">first</span>  enters <span class="keyword">the</span> ingress pipeline, <span class="keyword">and</span> <span class="keyword">then</span> egress pipeline <span class="keyword">of</span> <span class="keyword">the</span> source localnet logical <span class="keyword">switch</span> datapath <span class="keyword">and</span> is sent out via <span class="keyword">the</span> localnet</span><br><span class="line">    port <span class="keyword">of</span> <span class="keyword">the</span> source localnet logical <span class="keyword">switch</span> (instead <span class="keyword">of</span> sending <span class="keyword">it</span> <span class="built_in">to</span> router pipeline).</span><br><span class="line">sent:v. 送，寄出（<span class="built_in">send</span> 的过去式和过去分词）</span><br><span class="line">sent out:发送；派遣；放出</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>  The gateway chassis receives <span class="keyword">the</span> packet via <span class="keyword">the</span> localnet port <span class="keyword">of</span> <span class="keyword">the</span> source localnet logical <span class="keyword">switch</span> <span class="keyword">and</span> sends <span class="keyword">it</span> <span class="built_in">to</span> <span class="keyword">the</span> integration  bridge.  The  packet</span><br><span class="line">    <span class="keyword">then</span>  enters <span class="keyword">the</span> ingress pipeline, <span class="keyword">and</span> <span class="keyword">then</span> egress pipeline <span class="keyword">of</span> <span class="keyword">the</span> source localnet logical <span class="keyword">switch</span> datapath <span class="keyword">and</span> enters <span class="keyword">the</span> ingress pipeline <span class="keyword">of</span> <span class="keyword">the</span> logical</span><br><span class="line">    router datapath.</span><br></pre></td></tr></table></figure>

<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.  Routing decision <span class="keyword">is</span> taken and NAT rules <span class="keyword">are</span> applied.</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4.</span>  From <span class="keyword">the</span> router datapath, packet enters <span class="keyword">the</span> ingress pipeline <span class="keyword">and</span> <span class="keyword">then</span> egress pipeline <span class="keyword">of</span> <span class="keyword">the</span> localnet logical <span class="keyword">switch</span>  datapath  which  provides  external</span><br><span class="line">    connectivity.  It  <span class="keyword">then</span>  goes out <span class="keyword">of</span> <span class="keyword">the</span> integration bridge <span class="built_in">to</span> <span class="keyword">the</span> provider bridge (belonging <span class="built_in">to</span> <span class="keyword">the</span> logical <span class="keyword">switch</span> which provides external connectivity)</span><br><span class="line">    via <span class="keyword">the</span> localnet port.</span><br><span class="line">belonging :n. 稳定关系，归属感；所有物，附属物 v. 应在（某处），被适当地置于；适应，合得来；属于，是……的财产；（有资格）成为某集体的成员；是……的合法财产，应付给；（比赛或时间）被……控制（belong 的现在分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">The <span class="keyword">following</span> happens <span class="keyword">for</span> the <span class="keyword">reverse</span> <span class="keyword">external</span> traffic.</span><br><span class="line"><span class="keyword">reverse</span> :v. 颠倒；撤销；反转；交换；放弃立场；倒车；打对方付费的电话；（使铅字、图案）印成白或浅色  n. 逆向；相反；背面；倒档；失败；（美橄）横式传球；（翻开书的）左手页 adj. 相反的；背面的；颠倒的；反身的；（地层）逆断的</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  The gateway chassis receives <span class="keyword">the</span> packet <span class="built_in">from</span> <span class="keyword">the</span> localnet port <span class="keyword">of</span> <span class="keyword">the</span> logical <span class="keyword">switch</span> which provides external connectivity. The  packet  <span class="keyword">then</span>  enters  <span class="keyword">the</span></span><br><span class="line">    ingress pipeline <span class="keyword">and</span> <span class="keyword">then</span> egress pipeline <span class="keyword">of</span> <span class="keyword">the</span> localnet logical <span class="keyword">switch</span> (which provides external connectivity). The packet <span class="keyword">then</span> enters <span class="keyword">the</span> ingress pipe‐</span><br><span class="line">    <span class="built_in">line</span> <span class="keyword">of</span> <span class="keyword">the</span> logical router datapath.</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>  The ingress pipeline <span class="keyword">of</span> <span class="keyword">the</span> logical router datapath applies <span class="keyword">the</span> unNATting rules. The packet <span class="keyword">then</span> enters <span class="keyword">the</span> ingress pipeline <span class="keyword">and</span> <span class="keyword">then</span> egress pipeline  <span class="keyword">of</span></span><br><span class="line">    <span class="keyword">the</span> source localnet logical <span class="keyword">switch</span>. Since <span class="keyword">the</span> source VM doesn’t reside <span class="keyword">in</span> <span class="keyword">the</span> gateway chassis, <span class="keyword">the</span> packet is sent out via <span class="keyword">the</span> localnet port <span class="keyword">of</span> <span class="keyword">the</span> source</span><br><span class="line">    logical <span class="keyword">switch</span>.</span><br><span class="line">applies :v. 申请；涂，敷；应用（apply 的第三人称单数）</span><br><span class="line">reside :vi. 住，居住；属于</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>  The source chassis receives <span class="keyword">the</span> packet via <span class="keyword">the</span> localnet port <span class="keyword">and</span> sends <span class="keyword">it</span> <span class="built_in">to</span> <span class="keyword">the</span> integration bridge. The packet enters  <span class="keyword">the</span>  ingress  pipeline  <span class="keyword">and</span>  <span class="keyword">then</span></span><br><span class="line">    egress pipeline <span class="keyword">of</span> <span class="keyword">the</span> source localnet logical <span class="keyword">switch</span> <span class="keyword">and</span> <span class="keyword">finally</span> gets delivered <span class="built_in">to</span> <span class="keyword">the</span> source VM port.</span><br><span class="line">delivered :v. 递送；发表；履行诺言；移交；助产；分娩；投掷；拉（选票）；宣布（判决）；给予（打击、震惊等）；解救（deliver 的过去式及过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">VLAN  based  redirection  <span class="keyword">As</span>  an  enhancement <span class="keyword">to</span> reside-<span class="keyword">on</span>-redirect-chassis we support VLAN based redirection <span class="keyword">as</span> well. <span class="keyword">By</span> setting <span class="keyword">options</span>:redirect-<span class="keyword">type</span> <span class="keyword">to</span> vlan <span class="keyword">to</span> a</span><br><span class="line">gateway chassis attached router port, <span class="keyword">user</span> can enforce that redirected packet should <span class="keyword">not</span> use tunnel port but rather use localnet port <span class="keyword">of</span> peer logical switch  <span class="keyword">to</span>  go</span><br><span class="line"><span class="keyword">out</span> <span class="keyword">as</span> vlan packet.</span><br><span class="line">enhancement :n. 增加；放大</span><br><span class="line">enforce :vt. 实施，执行；强迫，强制</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Following happens for <span class="selector-tag">a</span> VLAN based redirection:</span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  On compute chassis, packet passes though logical router’s ingress pipeline.</span><br><span class="line">though :conj. 虽然，尽管 adv. 虽然；不过；然而</span><br><span class="line">这个地方是不是写错了，应该是<span class="keyword">through</span>吧</span><br></pre></td></tr></table></figure>

<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>.  <span class="keyword">If</span> logical outport <span class="keyword">is</span> gateway chassis attached router <span class="keyword">port</span> <span class="keyword">then</span> packet <span class="keyword">is</span> <span class="string">&quot;redirected&quot;</span> <span class="keyword">to</span> gateway chassis using peer logical switch’s localnet <span class="keyword">port</span>.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>  This  VLAN backed redirected packet has destination mac <span class="keyword">as</span> router port mac (<span class="keyword">the</span> one <span class="keyword">to</span> which gateway chassis <span class="keyword">is</span> attached) <span class="keyword">and</span> vlan <span class="built_in">id</span> <span class="keyword">is</span> <span class="keyword">that</span> <span class="keyword">of</span> localnet</span><br><span class="line">    port (peer logical switch <span class="keyword">of</span> <span class="keyword">the</span> logical router port).</span><br><span class="line">backed :adj. 有背的；有财力支持的 v. 支持；使后退（<span class="keyword">back</span>的过去分词）</span><br><span class="line">peer :n. 同等地位的人，同龄人；贵族 v. 凝视，盯着看；隐现；看见；匹配</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4.</span>  On <span class="keyword">the</span> gateway chassis packet will enter <span class="keyword">the</span> logical router pipeline again <span class="keyword">and</span> this <span class="built_in">time</span> <span class="keyword">it</span> will passthrough egress pipeline <span class="keyword">as</span> well.</span><br></pre></td></tr></table></figure>

<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span>.  <span class="keyword">Reverse</span> traffic packet flows stays the same.</span><br><span class="line"><span class="keyword">Reverse</span> ：v. 颠倒；撤销；反转；交换；放弃立场；倒车；打对方付费的电话；（使铅字、图案）印成白或浅色 n. 逆向；相反；背面；倒档；失败；（美橄）横式传球；（翻开书的）左手页 adj. 相反的；背面的；颠倒的；反身的；（地层）逆断的</span><br></pre></td></tr></table></figure>

<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Some</span> guidelines <span class="keyword">and</span> expections <span class="keyword">with</span> VLAN based redirection:</span><br><span class="line">guidelines ：n. 指导方针</span><br><span class="line">expections ：预期</span><br></pre></td></tr></table></figure>

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  Since router port mac <span class="keyword">is</span> destination mac, hence <span class="keyword">it</span> has <span class="keyword">to</span> be ensured <span class="keyword">that</span> physical network learns <span class="keyword">it</span> <span class="keyword">on</span> ONLY <span class="keyword">from</span> <span class="keyword">the</span> gateway chassis. Which  means  <span class="keyword">that</span></span><br><span class="line">    ovn-chassis-mac-mappings should be configure <span class="keyword">on</span> all <span class="keyword">the</span> compute nodes, so <span class="keyword">that</span> physical network never learn router port mac <span class="keyword">from</span> compute nodes.</span><br><span class="line">hence ：adv. 因此；今后</span><br><span class="line">ensured ：确保 使安全</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>  Since packet enters logical router ingress pipeline twice (once <span class="keyword">on</span> compute chassis <span class="keyword">and</span> again <span class="keyword">on</span> gateway chassis), hence ttl will be decremented twice.</span><br><span class="line">ttl ：生存时间(<span class="type">Time</span> <span class="keyword">To</span> Live)</span><br><span class="line">decremented ：n. 渐减；减缩；衰减率</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>  <span class="keyword">Default</span>  redirection  <span class="keyword">type</span>  continues  <span class="keyword">to</span>  be  overlay. <span class="keyword">User</span> can switch the redirect-<span class="keyword">type</span> <span class="keyword">between</span> vlan <span class="keyword">and</span> overlay <span class="keyword">by</span> changing the <span class="keyword">value</span> <span class="keyword">of</span> </span><br><span class="line">    <span class="keyword">options</span>:redirect-<span class="keyword">type</span></span><br><span class="line">overlay：v. 覆在……上面（overlie 的过去式）；覆盖，铺；（尤指以感情或品质）撒满；（声音）盖过 n. 套图透明膜；覆盖图；覆盖物，涂层；覆盖；附加的特性</span><br></pre></td></tr></table></figure>

<h2 id="Life-Cycle-of-a-VTEP-gateway"><a href="#Life-Cycle-of-a-VTEP-gateway" class="headerlink" title="Life Cycle of a VTEP gateway"></a>Life Cycle of a VTEP gateway</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A gateway is <span class="keyword">a</span> chassis that forwards traffic between <span class="keyword">the</span> OVN-managed part <span class="keyword">of</span> <span class="keyword">a</span> logical network <span class="keyword">and</span> <span class="keyword">a</span> physical VLAN, extending <span class="keyword">a</span> tunnel-based logical network <span class="keyword">into</span>  <span class="keyword">a</span></span><br><span class="line">physical network.</span><br><span class="line">managed :v. 管理；掌管；主管；当……的经理人；调教；经营管理（土地）；设法继续生存；对付过去；设法做到；处理；承受；腾出时间参加；明智地使用；（在某一时间）能办到；控制住；把……保持得井井有条；能吃（喝）；竟做出（manage 的过去式及过去分词）adj. 妥善照看的，受监督的</span><br><span class="line">extending :v. 延伸；扩展；（向某人）伸出；提供；给予；允许使用（资源）（extend 的现在分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">The</span>  <span class="selector-tag">steps</span> <span class="selector-tag">below</span> <span class="selector-tag">refer</span> <span class="selector-tag">often</span> <span class="selector-tag">to</span> <span class="selector-tag">details</span> <span class="selector-tag">of</span> <span class="selector-tag">the</span> <span class="selector-tag">OVN</span> <span class="selector-tag">and</span> <span class="selector-tag">VTEP</span> <span class="selector-tag">database</span> <span class="selector-tag">schemas</span>. <span class="selector-tag">Please</span> <span class="selector-tag">see</span> <span class="selector-tag">ovn-sb</span>(<span class="number">5</span>), <span class="selector-tag">ovn-nb</span>(<span class="number">5</span>) <span class="selector-tag">and</span> <span class="selector-tag">vtep</span>(<span class="number">5</span>), <span class="selector-tag">respectively</span>, <span class="selector-tag">for</span> <span class="selector-tag">the</span> <span class="selector-tag">full</span> <span class="selector-tag">story</span> <span class="selector-tag">on</span> <span class="selector-tag">these</span></span><br><span class="line"><span class="selector-tag">databases</span>.</span><br><span class="line"><span class="selector-tag">refer</span> :<span class="selector-tag">vi</span>. 参考；涉及；提到；查阅 <span class="selector-tag">vt</span>. 涉及；委托；归诸于；使…求助于</span><br><span class="line"><span class="selector-tag">details</span> :<span class="selector-tag">n</span>. 细节（<span class="selector-tag">detail</span> 的复数）；详细资料 <span class="selector-tag">v</span>. 详细说明（<span class="selector-tag">detail</span> 的第三人称单数）</span><br><span class="line"><span class="selector-tag">respectively</span>:<span class="selector-tag">adv</span>. 分别地；各自地，独自地</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  A VTEP gateway’s life cycle <span class="keyword">begins</span> <span class="keyword">with</span> <span class="keyword">the</span> administrator registering <span class="keyword">the</span> VTEP gateway <span class="keyword">as</span> <span class="keyword">a</span>  Physical_Switch  table  entry  <span class="keyword">in</span>  <span class="keyword">the</span>  VTEP  database.  The</span><br><span class="line">    ovn-controller-vtep  connected  <span class="built_in">to</span>  this VTEP database, will recognize <span class="keyword">the</span> <span class="built_in">new</span> VTEP gateway <span class="keyword">and</span> <span class="built_in">create</span> <span class="keyword">a</span> <span class="built_in">new</span> Chassis table entry <span class="keyword">for</span> <span class="keyword">it</span> <span class="keyword">in</span> <span class="keyword">the</span> OVN_South‐</span><br><span class="line">    bound database.</span><br><span class="line">administrator :n. 管理人；行政官</span><br><span class="line">registering :adj. 登记的；套版 vt. 登记，注册；记录（register的现在分词）；寄存</span><br><span class="line">entry  :n. 进入；入口；条目；登记；报关手续；对土地的侵占</span><br><span class="line">recognize :vt. 认出，识别；承认；接受，认可；赞赏 vi. 确认，承认；具结</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>  The administrator can <span class="keyword">then</span> <span class="built_in">create</span> <span class="keyword">a</span> <span class="built_in">new</span> Logical_Switch table entry, <span class="keyword">and</span> bind <span class="keyword">a</span> particular vlan <span class="keyword">on</span> <span class="title">a</span> <span class="title">VTEP</span> <span class="title">gateway</span>’<span class="title">s</span> <span class="title">port</span> <span class="title">to</span> <span class="title">any</span> <span class="title">VTEP</span> <span class="title">logical</span> <span class="title">switch</span>.  <span class="title">Once</span></span><br><span class="line">    <span class="keyword">a</span>  VTEP  logical  <span class="keyword">switch</span>  is  bound <span class="built_in">to</span> <span class="keyword">a</span> VTEP gateway, <span class="keyword">the</span> ovn-controller-vtep will detect <span class="keyword">it</span> <span class="keyword">and</span> <span class="built_in">add</span> its name <span class="built_in">to</span> <span class="keyword">the</span> vtep_logical_switches column <span class="keyword">of</span> <span class="keyword">the</span></span><br><span class="line">    Chassis table <span class="keyword">in</span> <span class="keyword">the</span> OVN_Southbound database. Note, <span class="keyword">the</span> tunnel_key column <span class="keyword">of</span> VTEP logical <span class="keyword">switch</span> is <span class="keyword">not</span> filled <span class="keyword">at</span> creation. The ovn-controller-vtep  will</span><br><span class="line">    <span class="built_in">set</span> <span class="keyword">the</span> column when <span class="keyword">the</span> correponding vtep logical <span class="keyword">switch</span> is bound <span class="built_in">to</span> <span class="keyword">an</span> OVN logical network.</span><br><span class="line">particular :adj. 特别的；详细的；独有的；挑剔的 n. 详细说明；个别项目</span><br><span class="line">bound :adj. 一定会；很可能会；必定的；受约束的，有义务的；因……受阻；被……所限制的；限制在某个场所的；正旅行去，准备去；准备就绪的；装有封面的，装订好的；黏附的；依附性的 v. 跳跃着跑；弹回，弹开；形成……的边界；关，围入；限制，束缚 n. 跳跃；界限，边界；限制，限制范围；界；极限</span><br><span class="line">detect :vt. 察觉；发现；探测</span><br><span class="line">creation:n. 创造，创作；创作物，产物</span><br><span class="line">correponding :adj. 相当的，相应的；一致的；通信的 v. 类似（correspond的ing形式）；相配 (应该是写错了，应该是corresponding)</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>  Now,  <span class="keyword">the</span>  administrator  can  use  <span class="keyword">the</span>  CMS  <span class="built_in">to</span>  <span class="built_in">add</span> <span class="keyword">a</span> VTEP logical <span class="keyword">switch</span> <span class="built_in">to</span> <span class="keyword">the</span> OVN logical network. To <span class="built_in">do</span> that, <span class="keyword">the</span> CMS must <span class="keyword">first</span> <span class="built_in">create</span> <span class="keyword">a</span> <span class="built_in">new</span> Logi‐</span><br><span class="line">    cal_Switch_Port table entry <span class="keyword">in</span> <span class="keyword">the</span> OVN_Northbound database. Then, <span class="keyword">the</span> type column <span class="keyword">of</span> this entry must be <span class="built_in">set</span> <span class="built_in">to</span> <span class="string">&quot;vtep&quot;</span>. Next, <span class="keyword">the</span> vtep-logical-<span class="keyword">switch</span>  <span class="keyword">and</span></span><br><span class="line">    vtep-physical-<span class="keyword">switch</span> <span class="built_in">keys</span> <span class="keyword">in</span> <span class="keyword">the</span> options column must also be specified, since multiple VTEP gateways can attach <span class="built_in">to</span> <span class="keyword">the</span> same VTEP logical <span class="keyword">switch</span>.</span><br><span class="line">specified：adj. 规定的；详细说明的 v. 指定；详细说明（specify的过去分词）</span><br><span class="line">multiple ：adj. 多重的；多样的；许多的n. 倍数；[电] 并联</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4.</span>  The  newly  created  logical  port  <span class="keyword">in</span>  <span class="keyword">the</span>  OVN_Northbound  database  <span class="keyword">and</span>  its configuration will be passed down <span class="built_in">to</span> <span class="keyword">the</span> OVN_Southbound database <span class="keyword">as</span> <span class="keyword">a</span> <span class="built_in">new</span></span><br><span class="line">    Port_Binding table entry. The ovn-controller-vtep will recognize <span class="keyword">the</span> change <span class="keyword">and</span> bind <span class="keyword">the</span> logical port <span class="built_in">to</span> <span class="keyword">the</span> corresponding VTEP gateway chassis. Configu‐</span><br><span class="line">    ration <span class="keyword">of</span> binding <span class="keyword">the</span> same VTEP logical <span class="keyword">switch</span> <span class="built_in">to</span> <span class="keyword">a</span> different OVN logical networks is <span class="keyword">not</span> allowed <span class="keyword">and</span> <span class="keyword">a</span> warning will be generated <span class="keyword">in</span> <span class="keyword">the</span> <span class="built_in">log</span>.</span><br><span class="line">newly  ：adv. 最近；重新；以新的方式</span><br><span class="line">configuration ：n. 配置；结构；外形</span><br><span class="line">recognize ：vt. 认出，识别；承认；接受，认可；赞赏 vi. 确认，承认；具结</span><br><span class="line">corresponding ：adj. 相当的，相应的；一致的；通信的 v. 类似（correspond的ing形式）；相配</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5.</span>  Beside  binding  <span class="built_in">to</span>  <span class="keyword">the</span>  VTEP gateway chassis, <span class="keyword">the</span> ovn-controller-vtep will update <span class="keyword">the</span> tunnel_key column <span class="keyword">of</span> <span class="keyword">the</span> VTEP logical <span class="keyword">switch</span> <span class="built_in">to</span> <span class="keyword">the</span> corresponding</span><br><span class="line">    Datapath_Binding table entry’s tunnel_key <span class="keyword">for</span> <span class="keyword">the</span> bound OVN logical network.</span><br><span class="line">beside  ：prep. 在旁边；与……相比；紧靠；除……以外（还）；除……以外（不再）adv. 在附近；况且，此外</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6.</span>  Next, <span class="keyword">the</span> ovn-controller-vtep will keep reacting <span class="built_in">to</span> <span class="keyword">the</span> configuration change <span class="keyword">in</span> <span class="keyword">the</span>  Port_Binding  <span class="keyword">in</span>  <span class="keyword">the</span>  OVN_Northbound  database,  <span class="keyword">and</span>  updating  <span class="keyword">the</span></span><br><span class="line">    Ucast_Macs_Remote  table  <span class="keyword">in</span>  <span class="keyword">the</span> VTEP database. This allows <span class="keyword">the</span> VTEP gateway <span class="built_in">to</span> understand where <span class="built_in">to</span> forward <span class="keyword">the</span> unicast traffic coming <span class="built_in">from</span> <span class="keyword">the</span> extended</span><br><span class="line">    external network.</span><br><span class="line">reacting :adj. 反应的 v. 起反应（react的ing形式）</span><br><span class="line">unicast :n. 单一传播</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">7.</span>  Eventually, <span class="keyword">the</span> VTEP gateway’s life cycle <span class="keyword">ends</span> when <span class="keyword">the</span> administrator unregisters <span class="keyword">the</span> VTEP gateway <span class="built_in">from</span> <span class="keyword">the</span> VTEP database. The  ovn-controller-vtep  will</span><br><span class="line">    recognize <span class="keyword">the</span> event <span class="keyword">and</span> remove all related configurations (Chassis table entry <span class="keyword">and</span> port bindings) <span class="keyword">in</span> <span class="keyword">the</span> OVN_Southbound database.</span><br><span class="line">eventually:adv. 最后，终于</span><br><span class="line">unregisters :n. 移除注册；未挂号</span><br><span class="line">event :n. 事件，大事；赛事；项目；结果</span><br><span class="line">related :adj. 有关系的，有关联的；讲述的，叙述的   v. 叙述（relate过去式）</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8.</span>  <span class="keyword">When</span>  the  ovn-controller-vtep  <span class="keyword">is</span> terminated, <span class="keyword">all</span> related configurations <span class="keyword">in</span> the OVN_Southbound <span class="keyword">database</span> <span class="keyword">and</span> the VTEP <span class="keyword">database</span> will be cleaned, including</span><br><span class="line">    Chassis <span class="keyword">table</span> entries <span class="keyword">for</span> <span class="keyword">all</span> registered VTEP gateways <span class="keyword">and</span> their port bindings, <span class="keyword">and</span> <span class="keyword">all</span> Ucast_Macs_Remote <span class="keyword">table</span> entries  <span class="keyword">and</span>  the  Logical_Switch  tunnel</span><br><span class="line">    keys.</span><br><span class="line">terminated:v. 终止；结束；终结（terminate的过去分词）adj. 终止的；有限的</span><br></pre></td></tr></table></figure>

<h2 id="Native-OVN-services-for-external-logical-ports"><a href="#Native-OVN-services-for-external-logical-ports" class="headerlink" title="Native OVN services for external logical ports"></a>Native OVN services for external logical ports</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">To</span> support OVN native services (<span class="keyword">like</span> DHCP/IPv6 RA/DNS lookup) <span class="keyword">to</span> the cloud resources which are <span class="keyword">external</span>, OVN supports <span class="keyword">external</span> logical ports.</span><br><span class="line">native:adj. 本国的；土著的；天然的；与生俱来的；天赋的n. 本地人；土产；当地居民</span><br><span class="line">RA：这个应该是RD，此处应该是误写</span><br></pre></td></tr></table></figure>

<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Below are some of the <span class="keyword">use</span> cases <span class="keyword">where</span> <span class="keyword">external</span> ports can be used.</span><br><span class="line"><span class="keyword">use</span> cases：用例（<span class="keyword">use</span> <span class="keyword">case</span>的复数）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">·      VMs connected <span class="built_in">to</span> SR-IOV nics - Traffic <span class="built_in">from</span> these VMs <span class="keyword">by</span> passes <span class="keyword">the</span> kernel stack <span class="keyword">and</span> <span class="built_in">local</span> ovn-controller <span class="built_in">do</span> <span class="keyword">not</span> bind these ports <span class="keyword">and</span> cannot serve <span class="keyword">the</span></span><br><span class="line">       native services.</span><br><span class="line">serve ：vt. 招待，供应；为…服务；对…有用；可作…用 vi. 服役，服务；适合，足够；发球；招待，侍候 n. 发球，轮到发球</span><br></pre></td></tr></table></figure>

<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">·      When CMS supports provisioning <span class="keyword">baremetal </span>servers.</span><br><span class="line">provisioning ：n. 准备金提取 v. 供应补给品（provision的ing形式）</span><br><span class="line"><span class="keyword">baremetal </span>：裸金属</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OVN will provide <span class="keyword">the</span> native services <span class="keyword">if</span> CMS has done <span class="keyword">the</span> below configuration <span class="keyword">in</span> <span class="keyword">the</span> OVN Northbound Database.</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">·      A row is created <span class="keyword">in</span> Logical_Switch_Port, configuring <span class="keyword">the</span> addresses column <span class="keyword">and</span> setting <span class="keyword">the</span> type <span class="built_in">to</span> external.</span><br><span class="line">·      ha_chassis_group column is configured.</span><br><span class="line">·      The HA chassis which belongs <span class="built_in">to</span> <span class="keyword">the</span> HA chassis group has <span class="keyword">the</span> ovn-bridge-mappings configured <span class="keyword">and</span> has proper L2 connectivity so that <span class="keyword">it</span> can receive  <span class="keyword">the</span></span><br><span class="line">       DHCP <span class="keyword">and</span> other related request packets <span class="built_in">from</span> these external resources.</span><br><span class="line">·      The Logical_Switch <span class="keyword">of</span> this port has <span class="keyword">a</span> localnet port.</span><br><span class="line">·      Native OVN services are enabled <span class="keyword">by</span> configuring <span class="keyword">the</span> DHCP <span class="keyword">and</span> other options like <span class="keyword">the</span> way <span class="keyword">it</span> is done <span class="keyword">for</span> <span class="keyword">the</span> <span class="keyword">normal</span> logical ports.</span><br><span class="line">proper ：adj. 适当的；本身的；特有的；正派的 adv. 完全地</span><br><span class="line">connectivity ：n. 连通（性），联结（度）</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">It <span class="keyword">is</span> recommended <span class="keyword">to</span> use the same HA chassis <span class="keyword">group</span> <span class="keyword">for</span> <span class="keyword">all</span> the <span class="keyword">external</span> ports <span class="keyword">of</span> a logical switch. Otherwise, the physical switch might see MAC flap issue <span class="keyword">when</span> dif‐</span><br><span class="line">ferent chassis provide the native services. <span class="keyword">For</span> example <span class="keyword">when</span> supporting native DHCPv4 service, DHCPv4 <span class="keyword">server</span> mac (configured <span class="keyword">in</span> <span class="keyword">options</span>:server_mac <span class="keyword">column</span>  <span class="keyword">in</span>  <span class="keyword">table</span></span><br><span class="line">DHCP_Options)  originating  <span class="keyword">from</span> different ports can cause MAC flap issue. The MAC <span class="keyword">of</span> the logical router IP(s) can <span class="keyword">also</span> flap <span class="keyword">if</span> the same HA chassis <span class="keyword">group</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">set</span></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">all</span> the <span class="keyword">external</span> ports <span class="keyword">of</span> a logical switch.</span><br><span class="line">recommended ：adj. 被推荐的 v. 推荐，介绍；建议（recommend的过去分词）</span><br><span class="line">otherwise：adv. 否则；另外；在其他方面 adj. 另外的；其他方面的；原本，本来 conj. 其他；如果不；然后</span><br><span class="line">might:aux. 可能，也许，可以（may 的过去式）；可能，也许（表示可能性）；（用于有礼貌地提出建议、请求）可以；（对某人未做某事表示不满）应该；也许（接受事实，但与更重要的事对比）n. 强大力量，威力，势力</span><br><span class="line">flap :n. 拍打，拍打声；神经紧张；（飞机的）襟翼；风门，挡板；[医]皮瓣 vi. 拍动；神经紧张；鼓翼而飞；（帽边等）垂下vt. 拍打；扔；拉下帽边；飘动</span><br><span class="line">issue :n. 问题；流出；期号；发行物 vt. 发行，发布；发给；放出，排出 vi. 发行；流出；造成……结果；传下</span><br><span class="line">originating  :v. 起源；创立（originate 的现在分词）</span><br><span class="line">cause :n. 原因；事业；目标 vt. 引起；使遭受</span><br></pre></td></tr></table></figure>

<h1 id="SECURITY"><a href="#SECURITY" class="headerlink" title="SECURITY"></a>SECURITY</h1><h2 id="Role-Based-Access-Controls-for-the-Soutbound-DB"><a href="#Role-Based-Access-Controls-for-the-Soutbound-DB" class="headerlink" title="Role-Based Access Controls for the Soutbound DB"></a>Role-Based Access Controls for the Soutbound DB</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> provide additional <span class="keyword">security</span> against the possibility <span class="keyword">of</span> an OVN chassis becoming compromised <span class="keyword">in</span> such a way <span class="keyword">as</span> <span class="keyword">to</span> allow rogue software  <span class="keyword">to</span>  make  arbitrary</span><br><span class="line">modifications  <span class="keyword">to</span>  the  southbound <span class="keyword">database</span> state <span class="keyword">and</span> thus disrupt the OVN network, <span class="keyword">role</span>-based <span class="keyword">access</span> controls (see ovsdb-<span class="keyword">server</span>(<span class="number">1</span>) <span class="keyword">for</span> additional details) are pro‐</span><br><span class="line">vided <span class="keyword">for</span> the southbound <span class="keyword">database</span>.</span><br><span class="line">additional :adj. 附加的，额外的</span><br><span class="line">possibility :n. 可能性；可能发生的事物</span><br><span class="line">compromised :adj. 妥协的，妥协让步的；缺乏抵抗力的 vt. 妥协；违背；连累（compromise 的过去式和过去分词）</span><br><span class="line">rogue :n. 流氓；小淘气；凶猛的离群兽；（尤指植物的）劣种 vi. 游手好闲；去劣；流浪 vt. 欺诈；去劣 adj. （野兽）凶猛的</span><br><span class="line">arbitrary:adj. [数] 任意的；武断的；专制的</span><br><span class="line">modifications  :n. 修改；修饰；变型；条款修订（modification的复数）</span><br><span class="line">disrupt :vt. 破坏；使瓦解；使分裂；使中断；使陷于混乱 adj. 分裂的，中断的；分散的</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">The implementation <span class="keyword">of</span> role-based access controls (RBAC) requires <span class="keyword">the</span> addition <span class="keyword">of</span> <span class="literal">two</span> tables <span class="built_in">to</span> <span class="keyword">an</span> OVSDB schema: <span class="keyword">the</span> RBAC_Role table, which is indexed <span class="keyword">by</span>  role  name</span><br><span class="line"><span class="keyword">and</span> maps <span class="keyword">the</span> <span class="keyword">the</span> names <span class="keyword">of</span> <span class="keyword">the</span> various tables that may be modifiable <span class="keyword">for</span> <span class="keyword">a</span> given role <span class="built_in">to</span> individual rows <span class="keyword">in</span> <span class="keyword">a</span> permissions table containing <span class="keyword">detailed</span> permission infor‐</span><br><span class="line">mation <span class="keyword">for</span> that role, <span class="keyword">and</span> <span class="keyword">the</span> permission table itself which consists <span class="keyword">of</span> rows containing <span class="keyword">the</span> following information:</span><br><span class="line">implementation :n. [计] 实现；履行；安装启用</span><br><span class="line">addition :n. 添加；[数] 加法；增加物</span><br><span class="line">various :adj. 各种各样的；多方面的</span><br><span class="line">modifiable :adj. 可修饰的；可更改的</span><br><span class="line">individual :adj. 个人的；个别的；独特的 n. 个人，个体</span><br><span class="line">permissions :n. 许可，权限</span><br><span class="line">containing :v. 包含；由……组成；（数）可整除；克制（强烈的感情）；防止……蔓延；（数）包有（区域或角）（contain 的现在分词）</span><br><span class="line">consists :v. 由…构成；由…组成（consist的三单形式）</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Table Name</span><br><span class="line">       The name <span class="keyword">of</span> <span class="keyword">the</span> associated table. This column exists primarily <span class="keyword">as</span> <span class="keyword">an</span> aid <span class="keyword">for</span> humans reading <span class="keyword">the</span> contents <span class="keyword">of</span> this table.</span><br><span class="line">associated :adj. 关联的；联合的 v. 联系（associate的过去式和过去分词）</span><br><span class="line">primarily :adv. 首先；主要地，根本上</span><br><span class="line">aid :n. 援助；帮助；助手；帮助者 vt. 援助；帮助；有助于 vi. 帮助</span><br><span class="line">contents :n. 内容；[图情] [计] 目录；要旨（content 的复数）v. 使满意（content 的三单形式）</span><br><span class="line">Auth Criteria</span><br><span class="line">       A <span class="built_in">set</span> <span class="keyword">of</span> strings containing <span class="keyword">the</span> names <span class="keyword">of</span> columns (<span class="keyword">or</span> column:key pairs <span class="keyword">for</span> columns containing <span class="keyword">string</span>:<span class="keyword">string</span> maps). The contents <span class="keyword">of</span> <span class="keyword">at</span> least <span class="literal">one</span> <span class="keyword">of</span>  <span class="keyword">the</span></span><br><span class="line">       columns <span class="keyword">or</span> column:key values <span class="keyword">in</span> <span class="keyword">a</span> row <span class="built_in">to</span> be modified, inserted, <span class="keyword">or</span> deleted must be equal <span class="built_in">to</span> <span class="keyword">the</span> ID <span class="keyword">of</span> <span class="keyword">the</span> client attempting <span class="built_in">to</span> act <span class="keyword">on</span> <span class="title">the</span> <span class="title">row</span> <span class="title">in</span> <span class="title">order</span></span><br><span class="line">       <span class="keyword">for</span> <span class="keyword">the</span> authorization check <span class="built_in">to</span> pass. If <span class="keyword">the</span> authorization criteria is <span class="literal">empty</span>, authorization checking is disabled <span class="keyword">and</span> all clients <span class="keyword">for</span> <span class="keyword">the</span> role  will  be</span><br><span class="line">       treated <span class="keyword">as</span> authorized.</span><br><span class="line">Auth :<span class="keyword">abbr</span>. 自生的（authentic）；授权的（authorized）</span><br><span class="line">Criteria:n. 标准，条件（criterion 的复数）</span><br><span class="line">containing :v. 包含；由……组成；（数）可整除；克制（强烈的感情）；防止……蔓延；（数）包有（区域或角）（contain 的现在分词）</span><br><span class="line">equal <span class="built_in">to</span>:等于；胜任</span><br><span class="line">attempting :n. 企图，试图；攻击 vt. 企图，试图；尝试</span><br><span class="line">act :v. 行动；表现；起作用；扮演（角色）；担任；假装；代理 n. 行为；假装；某种行为（或常规等）；法令；判决书；会议记录；（戏剧等的）幕；表演；演出团体 <span class="keyword">abbr</span>. 活跃的 (active)；演员 (actor)；实际的 (actual)</span><br><span class="line">authorization :n. 授权，认可；批准，委任</span><br><span class="line">authorized:adj. 经授权的；经认可的 v. 授权；批准；辩护（authorize的过去分词）</span><br><span class="line">Insert/Delete</span><br><span class="line">       Row  insertion/deletion  permission;  boolean  <span class="built_in">value</span>  indicating  whether insertion <span class="keyword">and</span> deletion <span class="keyword">of</span> rows is allowed <span class="keyword">for</span> <span class="keyword">the</span> associated table. If <span class="literal">true</span>,</span><br><span class="line">       insertion <span class="keyword">and</span> deletion <span class="keyword">of</span> rows is allowed <span class="keyword">for</span> authorized clients.</span><br><span class="line">insertion:n. 插入；嵌入；插入物</span><br><span class="line">deletion  :n. 删除；[遗] 缺失；删除部分</span><br><span class="line">permission:n. 允许，许可</span><br><span class="line">boolean  :adj. 布尔数学体系的</span><br><span class="line">indicating  :v. 表明，要求；暗示；指示；标示；写明；简要陈述；显示（量度）；打行车转向信号；有必要（indicate 的现在分词形式）</span><br><span class="line">Updatable Columns</span><br><span class="line">       A <span class="built_in">set</span> <span class="keyword">of</span> strings containing <span class="keyword">the</span> names <span class="keyword">of</span> columns <span class="keyword">or</span> column:key pairs that may be updated <span class="keyword">or</span> mutated <span class="keyword">by</span> authorized clients.  Modifications  <span class="built_in">to</span>  columns</span><br><span class="line">       <span class="keyword">within</span>  <span class="keyword">a</span> row are only permitted when <span class="keyword">the</span> authorization check <span class="keyword">for</span> <span class="keyword">the</span> client passes <span class="keyword">and</span> all columns <span class="built_in">to</span> be modified are included <span class="keyword">in</span> this <span class="built_in">set</span> <span class="keyword">of</span> modifi‐</span><br><span class="line">       able columns.</span><br><span class="line">mutated :突变,变成,经受突变</span><br><span class="line">authorized :adj. 经授权的；经认可的 v. 授权；批准；辩护（authorize的过去分词）</span><br><span class="line">Modifications  :n. 修改；修饰；变型；条款修订（modification的复数）</span><br><span class="line">permitted :v. 允许；（使）有可能；批准；可能有；允许有（permit 的过去式及过去分词）</span><br></pre></td></tr></table></figure>

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">RBAC configuration <span class="keyword">for</span> the OVN southbound database is maintained by ovn-northd. With RBAC  enabled,  modifications  are  only  permitted  <span class="keyword">for</span>  the  Chassis,  Encap,</span><br><span class="line">Port_Binding, <span class="keyword">and</span> MAC_Binding tables, <span class="keyword">and</span> are resstricted as <span class="symbol">follows:</span></span><br><span class="line">maintained <span class="symbol">:adj</span>. 被保持的 v. 维护，维修；维持（maintain的过去分词）</span><br><span class="line">modifications  <span class="symbol">:n</span>. 修改；修饰；变型；条款修订（modification的复数）</span><br><span class="line">permitted  <span class="symbol">:v</span>. 允许；（使）有可能；批准；可能有；允许有（permit 的过去式及过去分词）</span><br><span class="line">resstricted <span class="symbol">:adj</span>. 受限制的；保密的 v. 限制（restrict的过去式和过去分词）这个单词可能写错了</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Chassis</span><br><span class="line">       <span class="keyword">Authorization</span>: client ID must match the chassis <span class="type">name</span>.</span><br><span class="line">       <span class="keyword">Insert</span>/<span class="keyword">Delete</span>: authorized <span class="keyword">row</span> insertion <span class="keyword">and</span> deletion are permitted.</span><br><span class="line">       <span class="keyword">Update</span>: The <span class="keyword">columns</span> nb_cfg, external_ids, encaps, <span class="keyword">and</span> vtep_logical_switches may be modified <span class="keyword">when</span> authorized.</span><br><span class="line"><span class="keyword">Authorization</span>：n. 授权，认可；批准，委任</span><br><span class="line">authorized :adj. 经授权的；经认可的 v. 授权；批准；辩护（authorize的过去分词）</span><br><span class="line"></span><br><span class="line">Encap  <span class="keyword">Authorization</span>: client ID must match the chassis <span class="type">name</span>.</span><br><span class="line">       <span class="keyword">Insert</span>/<span class="keyword">Delete</span>: <span class="keyword">row</span> insertion <span class="keyword">and</span> <span class="keyword">row</span> deletion are permitted.</span><br><span class="line">       <span class="keyword">Update</span>: The <span class="keyword">columns</span> <span class="keyword">type</span>, <span class="keyword">options</span>, <span class="keyword">and</span> ip can be modified.</span><br><span class="line"></span><br><span class="line">Port_Binding</span><br><span class="line">       <span class="keyword">Authorization</span>:  disabled  (<span class="keyword">all</span>  clients  are considered authorized. A future enhancement may <span class="keyword">add</span> <span class="keyword">columns</span> (<span class="keyword">or</span> keys <span class="keyword">to</span> external_ids) <span class="keyword">in</span> <span class="keyword">order</span> <span class="keyword">to</span> control</span><br><span class="line">       which chassis are allowed <span class="keyword">to</span> bind <span class="keyword">each</span> port.</span><br><span class="line">       <span class="keyword">Insert</span>/<span class="keyword">Delete</span>: <span class="keyword">row</span> insertion/deletion are <span class="keyword">not</span> permitted (ovn-northd maintains <span class="keyword">rows</span> <span class="keyword">in</span> this <span class="keyword">table</span>.</span><br><span class="line">       <span class="keyword">Update</span>: <span class="keyword">Only</span> modifications <span class="keyword">to</span> the chassis <span class="keyword">column</span> are permitted.</span><br><span class="line">considered :adj. 经过深思熟虑的；被尊重的</span><br><span class="line">future :n. 未来；前途；期货；将来时 adj. 将来的，未来的</span><br><span class="line">enhancement :n. 增加；放大</span><br><span class="line">maintains :vt. 维持；继续；维修；主张；供养</span><br><span class="line">modifications :n. 修改；修饰；变型；条款修订（modification的复数）</span><br><span class="line"></span><br><span class="line">MAC_Binding</span><br><span class="line">       <span class="keyword">Authorization</span>: disabled (<span class="keyword">all</span> clients are considered <span class="keyword">to</span> be authorized).</span><br><span class="line">       <span class="keyword">Insert</span>/<span class="keyword">Delete</span>: <span class="keyword">row</span> insertion/deletion are permitted.</span><br><span class="line">       <span class="keyword">Update</span>: The <span class="keyword">columns</span> logical_port, ip, mac, <span class="keyword">and</span> datapath may be modified <span class="keyword">by</span> ovn-controller.</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enabling RBAC <span class="keyword">for</span> ovn-controller connections <span class="built_in">to</span> <span class="keyword">the</span> southbound database requires <span class="keyword">the</span> following steps:</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  Creating SSL certificates <span class="keyword">for</span> <span class="keyword">each</span> chassis <span class="keyword">with</span> the certificate CN field <span class="keyword">set</span> <span class="keyword">to</span> the chassis <span class="type">name</span> (e.g. <span class="keyword">for</span> a  chassis  <span class="keyword">with</span>  <span class="keyword">external</span>-ids:<span class="keyword">system</span>-id=chas‐</span><br><span class="line">    sis<span class="number">-1</span>, via the command &quot;ovs-pki -u req+sign chassis-1 switch&quot;).</span><br><span class="line">certificates :n. [管理] 证书（certificate的复数） v. 用证书证明（certificate的单数第三人称）</span><br><span class="line"><span class="number">2.</span>  Configuring   <span class="keyword">each</span>   ovn-controller   <span class="keyword">to</span>   use   SSL   <span class="keyword">when</span>   connecting   <span class="keyword">to</span>   the   southbound  <span class="keyword">database</span>  (e.g.  via  &quot;ovs-vsctl  set  open  .   exter‐</span><br><span class="line">    nal-ids:ovn-remote=ssl:x.x.x.x:6642&quot;).</span><br><span class="line"><span class="number">3.</span>  Configuring a southbound <span class="keyword">database</span> SSL remote <span class="keyword">with</span> &quot;ovn-controller&quot; <span class="keyword">role</span> (e.g. via &quot;ovn-sbctl set-connection role=ovn-controller pssl:6642&quot;).</span><br></pre></td></tr></table></figure>

<h1 id="DESIGN-DECISIONS"><a href="#DESIGN-DECISIONS" class="headerlink" title="DESIGN DECISIONS"></a>DESIGN DECISIONS</h1><h2 id="Tunnel-Encapsulations"><a href="#Tunnel-Encapsulations" class="headerlink" title="Tunnel Encapsulations"></a>Tunnel Encapsulations</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">OVN  annotates  logical network packets that <span class="keyword">it</span> sends <span class="built_in">from</span> <span class="literal">one</span> hypervisor <span class="built_in">to</span> another <span class="keyword">with</span> <span class="keyword">the</span> following <span class="literal">three</span> pieces <span class="keyword">of</span> metadata, which are encoded <span class="keyword">in</span> <span class="keyword">an</span> </span><br><span class="line">encapsulation-specific fashion:</span><br><span class="line">annotates  ：vi. 注释；给…作注释或评注 vt. 注释；作注解</span><br><span class="line">pieces ：n. （从某物上拆下、撕下或切下的）块，片，段；部件；表示某种事物的个体（与不可数名词搭配）；文章；作品 （piece 的复数形式）</span><br><span class="line">metadata：n. 元数据，诠释数据</span><br><span class="line">encoded ：v. 把……译成电码（或密码）；把……编码；将……译成外语（encode 的过去式和过去分词）</span><br><span class="line">encapsulation：n. 封装；包装</span><br><span class="line">fashion：n. 时尚；时装；样式；方式；时髦人物 vt. 使用；改变；做成…的形状</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">·      <span class="number">24</span>-<span class="type">bit</span> logical datapath identifier, <span class="keyword">from</span> the tunnel_key <span class="keyword">column</span> <span class="keyword">in</span> the OVN Southbound Datapath_Binding <span class="keyword">table</span>.</span><br><span class="line">·      <span class="number">15</span>-<span class="type">bit</span> logical ingress port identifier. ID <span class="number">0</span> <span class="keyword">is</span> reserved <span class="keyword">for</span> <span class="type">internal</span> use <span class="keyword">within</span> OVN. IDs <span class="number">1</span> through <span class="number">32767</span>, inclusive, may be assigned <span class="keyword">to</span> logical ports</span><br><span class="line">       (see the tunnel_key <span class="keyword">column</span> <span class="keyword">in</span> the OVN Southbound Port_Binding <span class="keyword">table</span>).</span><br><span class="line">reserved ：adj. 保留的，预订的；缄默的，冷淡的，高冷的；包租的</span><br><span class="line"><span class="type">internal</span> ：adj. 内部的；体内的；（机构）内部的；国内的；本身的；内心的；（大学生）本校生的 n. 内脏；内部特征</span><br><span class="line">inclusive：adj. 包含的，包括的；包含全部费用的； 包括提到的所有……在内的；范围广泛的；一切服务包含在内的；包括明示界限在内的；不排斥任何一方的；有意避免性别歧视的；兼收并蓄的 adv. 包括一切费用在内地</span><br><span class="line">assigned ：adj. 指定的；已分配的 v. 分配（assign的过去分词）；指定；委派</span><br><span class="line">·      <span class="number">16</span>-<span class="type">bit</span> logical egress port identifier. IDs <span class="number">0</span> through <span class="number">32767</span> have the same meaning <span class="keyword">as</span> <span class="keyword">for</span> logical ingress ports. IDs <span class="number">32768</span> through <span class="number">65535</span>, inclusive, may</span><br><span class="line">       be assigned <span class="keyword">to</span> logical multicast <span class="keyword">groups</span> (see the tunnel_key <span class="keyword">column</span> <span class="keyword">in</span> the OVN Southbound Multicast_Group <span class="keyword">table</span>).</span><br><span class="line">multicast ：v. （在网络上）多播（数据）n. 多路广播；多路传送</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">For hypervisor-<span class="keyword">to</span>-hypervisor traffic, OVN supports <span class="keyword">only</span> Geneve <span class="built_in">and</span> STT encapsulations, <span class="keyword">for</span> the following reason<span class="variable">s:</span></span><br><span class="line">encapsulations：n. 封装；包装</span><br></pre></td></tr></table></figure>

<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">·      Only STT <span class="keyword">and </span>Geneve support the large amounts of metadata (over <span class="number">32</span> <span class="keyword">bits </span>per packet) that OVN uses (as described above).</span><br><span class="line">·      STT <span class="keyword">and </span>Geneve use randomized UDP <span class="keyword">or </span>TCP source ports that allows efficient <span class="keyword">distribution </span>among <span class="keyword">multiple </span>paths in environments that use ECMP  in  their</span><br><span class="line">       underlay.</span><br><span class="line">·      NICs are available to offload STT <span class="keyword">and </span>Geneve encapsulation <span class="keyword">and </span>decapsulation.</span><br><span class="line">amounts ：n. 数量，总额（amount的复数）v. 总和（amount的第三人称单数形式）</span><br><span class="line">randomized ：adj. [数] 随机化的，随机的 v. 使随机化；做任意排列（randomize的过去分词）</span><br><span class="line">efficient ：adj. 有效率的；有能力的；生效的</span><br><span class="line"><span class="keyword">distribution </span>：n. 分布；分配；供应</span><br><span class="line">offload ：vt. 卸下；卸货 adj. 卸载的</span><br><span class="line">decapsulation：解封装</span><br><span class="line">ECMP  ：</span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Due  <span class="built_in">to</span>  its  flexibility, <span class="keyword">the</span> preferred encapsulation between hypervisors is Geneve. For Geneve encapsulation, OVN transmits <span class="keyword">the</span> logical datapath identifier <span class="keyword">in</span> <span class="keyword">the</span></span><br><span class="line">Geneve VNI. OVN transmits <span class="keyword">the</span> logical ingress <span class="keyword">and</span> logical egress ports <span class="keyword">in</span> <span class="keyword">a</span> TLV <span class="keyword">with</span> class <span class="number">0x0102</span>, type <span class="number">0x80</span>, <span class="keyword">and</span> <span class="keyword">a</span> <span class="number">32</span>-bit <span class="built_in">value</span> encoded <span class="keyword">as</span>  follows,  <span class="built_in">from</span>  MSB  <span class="built_in">to</span></span><br><span class="line">LSB:</span><br><span class="line">flexibility：n. 灵活性；弹性；适应性</span><br><span class="line">preferred ：adj. 优先的；首选的 v. 偏爱（prefer的过去分词）</span><br><span class="line">transmits ：vt. 传输；传播；发射；传达；遗传 vi. 传输；发射信号</span><br><span class="line">TLV ：TLV是tag, <span class="built_in">length</span>和<span class="built_in">value</span>的缩写.一个基本的数据元就包括上面三个域</span><br></pre></td></tr></table></figure>

<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">  1       15          16</span></span><br><span class="line"><span class="section">+---+------------+-----------+</span></span><br><span class="line"><span class="section">|rsv|ingress port|egress port|</span></span><br><span class="line"><span class="section">+---+------------+-----------+</span></span><br><span class="line"><span class="code">  0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Environments  whose  NICs  lack  Geneve offload may prefer STT encapsulation <span class="keyword">for</span> performance reasons. For STT encapsulation, OVN encodes all <span class="literal">three</span> pieces <span class="keyword">of</span> logical</span><br><span class="line">metadata <span class="keyword">in</span> <span class="keyword">the</span> STT <span class="number">64</span>-bit tunnel ID <span class="keyword">as</span> follows, <span class="built_in">from</span> MSB <span class="built_in">to</span> LSB:</span><br><span class="line">Environments  ：n. [环境] 环境；（计算机系统运行的）[环境] 环境（environment的复数）；生态环境</span><br><span class="line">lack  ：n. 缺乏，不足 v. 缺乏，不足，没有；需要</span><br><span class="line">prefer ：vt. 更喜欢；宁愿；提出；提升 vi. 喜欢；愿意</span><br></pre></td></tr></table></figure>

<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">    9          15          16         24</span></span><br><span class="line"><span class="section">+--------+------------+-----------+--------+</span></span><br><span class="line"><span class="section">|reserved|ingress port|egress port|datapath|</span></span><br><span class="line"><span class="section">+--------+------------+-----------+--------+</span></span><br><span class="line"><span class="code">    0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">For</span> connecting <span class="keyword">to</span> gateways, <span class="keyword">in</span> addition <span class="keyword">to</span> Geneve <span class="keyword">and</span> STT, OVN supports VXLAN, because <span class="keyword">only</span> VXLAN support <span class="keyword">is</span> common <span class="keyword">on</span> top-<span class="keyword">of</span>-rack (ToR) switches. Currently,  gate‐</span><br><span class="line">ways  have  a  feature <span class="keyword">set</span> that matches the capabilities <span class="keyword">as</span> defined <span class="keyword">by</span> the VTEP <span class="keyword">schema</span>, so fewer bits <span class="keyword">of</span> metadata are necessary. <span class="keyword">In</span> the future, gateways that <span class="keyword">do</span> <span class="keyword">not</span></span><br><span class="line">support encapsulations <span class="keyword">with</span> <span class="keyword">large</span> amounts <span class="keyword">of</span> metadata may <span class="keyword">continue</span> <span class="keyword">to</span> have a reduced feature <span class="keyword">set</span>.</span><br><span class="line">addition ：n. 添加；[数] 加法；增加物</span><br><span class="line"><span class="keyword">in</span> addition:另外，此外</span><br><span class="line">feature ：n. 特色，特征；容貌；特写或专题节目 vi. 起重要作用 vt. 特写；以…为特色；由…主演</span><br><span class="line">capabilities ：n. 能力；功能；性能；（军事）力量（capability 的复数）</span><br><span class="line">fewer ：adj. 较少的 pron. 较少数 <span class="type">int</span>. 较少数</span><br><span class="line">reduced ：adj. 减少的；[数] 简化的；缩减的</span><br></pre></td></tr></table></figure>
    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>dangervon
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="http://dangervon.github.io/2021/11/16/ovn-architecture/" title="ovn-architecture">http://dangervon.github.io/2021/11/16/ovn-architecture/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/translate/" rel="tag"># translate</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/11/16/OVN%E6%B5%81%E8%A1%A8%E5%88%86%E6%9E%90/" rel="prev" title="OVN流表分析">
      <i class="fa fa-chevron-left"></i> OVN流表分析
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#name"><span class="nav-number">1.</span> <span class="nav-text">name</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#description"><span class="nav-number">2.</span> <span class="nav-text">description</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#information-flow-in-ovn"><span class="nav-number">2.1.</span> <span class="nav-text">information flow in ovn</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chassis-setup"><span class="nav-number">2.2.</span> <span class="nav-text">chassis setup</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#logical-networks"><span class="nav-number">2.3.</span> <span class="nav-text">logical networks</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#life-cycle-of-a-vif"><span class="nav-number">2.4.</span> <span class="nav-text">life cycle of a vif</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#life-cycle-of-a-container-interface-inside-a-vm"><span class="nav-number">2.5.</span> <span class="nav-text">life cycle of a container interface inside a vm</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#architectural-physical-life-cycle-of-a-packet"><span class="nav-number">2.6.</span> <span class="nav-text">architectural physical life cycle of a packet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#logical-routers-and-logical-patch-ports"><span class="nav-number">2.7.</span> <span class="nav-text">logical routers and logical patch ports</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Gateway-Routers"><span class="nav-number">2.7.1.</span> <span class="nav-text">Gateway Routers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Distributed-Gateway-Ports"><span class="nav-number">2.7.2.</span> <span class="nav-text">Distributed Gateway Ports</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#High-Availability-for-Distributed-Gateway-Ports"><span class="nav-number">2.7.3.</span> <span class="nav-text">High Availability for Distributed Gateway Ports</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ARP-request-and-ND-NS-packet-processing"><span class="nav-number">2.7.4.</span> <span class="nav-text">ARP request and ND NS packet processing</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Multiple-localnet-logical-switches-connected-to-a-Logical-Router"><span class="nav-number">2.8.</span> <span class="nav-text">Multiple localnet logical switches connected to a Logical Router</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#East-West-routing"><span class="nav-number">2.8.1.</span> <span class="nav-text">East West routing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#External-traffic"><span class="nav-number">2.8.2.</span> <span class="nav-text">External traffic</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Life-Cycle-of-a-VTEP-gateway"><span class="nav-number">2.9.</span> <span class="nav-text">Life Cycle of a VTEP gateway</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Native-OVN-services-for-external-logical-ports"><span class="nav-number">2.10.</span> <span class="nav-text">Native OVN services for external logical ports</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SECURITY"><span class="nav-number">3.</span> <span class="nav-text">SECURITY</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Role-Based-Access-Controls-for-the-Soutbound-DB"><span class="nav-number">3.1.</span> <span class="nav-text">Role-Based Access Controls for the Soutbound DB</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DESIGN-DECISIONS"><span class="nav-number">4.</span> <span class="nav-text">DESIGN DECISIONS</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Tunnel-Encapsulations"><span class="nav-number">4.1.</span> <span class="nav-text">Tunnel Encapsulations</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="dangervon"
      src="/images/header.png">
  <p class="site-author-name" itemprop="name">dangervon</p>
  <div class="site-description" itemprop="description">to be a better man</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/dangervon" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;dangervon" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:cemicircle@gmail.com" title="E-Mail → mailto:cemicircle@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dangervon</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/nextlib/anime.min.js"></script>
  <script src="/nextlib/velocity/velocity.min.js"></script>
  <script src="/nextlib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
